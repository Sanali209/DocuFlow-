(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=a(n);fetch(n.href,l)}})();const an=!1;var Us=Array.isArray,Vl=Array.prototype.indexOf,Gs=Array.from,Ql=Object.defineProperty,Va=Object.getOwnPropertyDescriptor,dr=Object.getOwnPropertyDescriptors,Kl=Object.prototype,ei=Array.prototype,gn=Object.getPrototypeOf,Gn=Object.isExtensible;function ti(t){return t()}function sn(t){for(var e=0;e<t.length;e++)t[e]()}function fr(){var t,e,a=new Promise((r,n)=>{t=r,e=n});return{promise:a,resolve:t,reject:e}}function mn(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const a=[];for(const r of t)if(a.push(r),a.length===e)break;return a}const St=2,Ms=4,xs=8,pr=1<<24,ka=16,xa=32,Ha=64,bn=128,ea=512,xt=1024,Dt=2048,da=4096,Wt=8192,ga=16384,yn=32768,Ra=65536,Hn=1<<17,hr=1<<18,ns=1<<19,_r=1<<20,_a=1<<25,Ba=32768,nn=1<<21,wn=1<<22,Ca=1<<23,ma=Symbol("$state"),ai=Symbol("legacy props"),si=Symbol(""),Za=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function gr(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ni(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ri(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function li(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ii(t){throw new Error("https://svelte.dev/e/effect_orphan")}function oi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ci(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function vi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ui(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function di(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function fi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const pi=1,hi=2,mr=4,_i=8,gi=16,mi=1,bi=2,yi=4,wi=8,ki=16,xi=1,Si=2,kt=Symbol(),Ti="http://www.w3.org/1999/xhtml";function qi(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ei(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function br(t){return t===this.v}function ji(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function yr(t){return!ji(t,this.v)}let rs=!1,Pi=!1;function Ai(){rs=!0}let lt=null;function Qa(t){lt=t}function Ze(t,e=!1,a){lt={p:lt,i:!1,c:null,e:null,s:t,x:null,l:rs&&!e?{s:null,u:null,$:[]}:null}}function Ve(t){var e=lt,a=e.e;if(a!==null){e.e=null;for(var r of a)Ir(r)}return t!==void 0&&(e.x=t),e.i=!0,lt=e.p,t??{}}function Ss(){return!rs||lt!==null&&lt.l===null}let Ia=[];function wr(){var t=Ia;Ia=[],sn(t)}function ca(t){if(Ia.length===0&&!_s){var e=Ia;queueMicrotask(()=>{e===Ia&&wr()})}Ia.push(t)}function Ci(){for(;Ia.length>0;)wr()}function kr(t){var e=Je;if(e===null)return Fe.f|=Ca,t;if((e.f&yn)===0){if((e.f&bn)===0)throw t;e.b.error(t)}else Ka(t,e)}function Ka(t,e){for(;e!==null;){if((e.f&bn)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Di=-7169;function mt(t,e){t.f=t.f&Di|e}function kn(t){(t.f&ea)!==0||t.deps===null?mt(t,xt):mt(t,da)}function xr(t){if(t!==null)for(const e of t)(e.f&St)===0||(e.f&Ba)===0||(e.f^=Ba,xr(e.deps))}function Sr(t,e,a){(t.f&Dt)!==0?e.add(t):(t.f&da)!==0&&a.add(t),xr(t.deps),mt(t,xt)}const Cs=new Set;let We=null,Os=null,la=null,Yt=[],Hs=null,rn=!1,_s=!1;class Da{committed=!1;current=new Map;previous=new Map;#t=new Set;#l=new Set;#e=0;#n=0;#r=null;#s=new Set;#a=new Set;skipped_effects=new Set;is_fork=!1;#i=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){Yt=[],this.apply();var a=[],r=[];for(const n of e)this.#o(n,a,r);if(this.is_deferred())this.#c(r),this.#c(a);else{for(const n of this.#t)n();this.#t.clear(),this.#e===0&&this.#v(),Os=this,We=null,Yn(r),Yn(a),Os=null,this.#r?.resolve()}la=null}#o(e,a,r){e.f^=xt;for(var n=e.first,l=null;n!==null;){var c=n.f,u=(c&(xa|Ha))!==0,v=u&&(c&xt)!==0,f=v||(c&Wt)!==0||this.skipped_effects.has(n);if(!f&&n.fn!==null){u?n.f^=xt:l!==null&&(c&(Ms|xs|pr))!==0?l.b.defer_effect(n):(c&Ms)!==0?a.push(n):ls(n)&&((c&ka)!==0&&this.#s.add(n),ts(n));var p=n.first;if(p!==null){n=p;continue}}var _=n.parent;for(n=n.next;n===null&&_!==null;)_===l&&(l=null),n=_.next,_=_.parent}}#c(e){for(var a=0;a<e.length;a+=1)Sr(e[a],this.#s,this.#a)}capture(e,a){a!==kt&&!this.previous.has(e)&&this.previous.set(e,a),(e.f&Ca)===0&&(this.current.set(e,e.v),la?.set(e,e.v))}activate(){We=this,this.apply()}deactivate(){We===this&&(We=null,la=null)}flush(){if(this.activate(),Yt.length>0){if(Tr(),We!==null&&We!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#l)e(this);this.#l.clear()}#v(){if(Cs.size>1){this.previous.clear();var e=la,a=!0;for(const n of Cs){if(n===this){a=!1;continue}const l=[];for(const[u,v]of this.current){if(n.current.has(u))if(a&&v!==n.current.get(u))n.current.set(u,v);else continue;l.push(u)}if(l.length===0)continue;const c=[...n.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var r=Yt;Yt=[];const u=new Set,v=new Map;for(const f of l)qr(f,c,u,v);if(Yt.length>0){We=n,n.apply();for(const f of Yt)n.#o(f,[],[]);n.deactivate()}Yt=r}}We=null,la=e}this.committed=!0,Cs.delete(this)}increment(e){this.#e+=1,e&&(this.#n+=1)}decrement(e){this.#e-=1,e&&(this.#n-=1),!this.#i&&(this.#i=!0,ca(()=>{this.#i=!1,this.is_deferred()?Yt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#s)this.#a.delete(e),mt(e,Dt),wa(e);for(const e of this.#a)mt(e,da),wa(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#l.add(e)}settled(){return(this.#r??=fr()).promise}static ensure(){if(We===null){const e=We=new Da;Cs.add(We),_s||ca(()=>{We===e&&e.flush()})}return We}apply(){}}function zi(t){var e=_s;_s=!0;try{for(var a;;){if(Ci(),Yt.length===0&&(We?.flush(),Yt.length===0))return Hs=null,a;Tr()}}finally{_s=e}}function Tr(){rn=!0;var t=null;try{for(var e=0;Yt.length>0;){var a=Da.ensure();if(e++>1e3){var r,n;Ri()}a.process(Yt),za.clear()}}finally{rn=!1,Hs=null}}function Ri(){try{oi()}catch(t){Ka(t,Hs)}}let ha=null;function Yn(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(ga|Wt))===0&&ls(r)&&(ha=new Set,ts(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ur(r):r.fn=null),ha?.size>0)){za.clear();for(const n of ha){if((n.f&(ga|Wt))!==0)continue;const l=[n];let c=n.parent;for(;c!==null;)ha.has(c)&&(ha.delete(c),l.push(c)),c=c.parent;for(let u=l.length-1;u>=0;u--){const v=l[u];(v.f&(ga|Wt))===0&&ts(v)}}ha.clear()}}ha=null}}function qr(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const n of t.reactions){const l=n.f;(l&St)!==0?qr(n,e,a,r):(l&(wn|ka))!==0&&(l&Dt)===0&&Er(n,e,r)&&(mt(n,Dt),wa(n))}}function Er(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const n of t.deps){if(e.includes(n))return!0;if((n.f&St)!==0&&Er(n,e,a))return a.set(n,!0),!0}return a.set(t,!1),!1}function wa(t){for(var e=Hs=t;e.parent!==null;){e=e.parent;var a=e.f;if(rn&&e===Je&&(a&ka)!==0&&(a&hr)===0)return;if((a&(Ha|xa))!==0){if((a&xt)===0)return;e.f^=xt}}Yt.push(e)}function Ni(t){let e=0,a=Ua(0),r;return()=>{qn()&&(s(a),Es(()=>(e===0&&(r=Ma(()=>t(()=>gs(a)))),e+=1,()=>{ca(()=>{e-=1,e===0&&(r?.(),r=void 0,gs(a))})})))}}var Mi=Ra|ns|bn;function Oi(t,e,a){new Ii(t,e,a)}class Ii{parent;is_pending=!1;#t;#l=null;#e;#n;#r;#s=null;#a=null;#i=null;#o=null;#c=null;#v=0;#d=0;#p=!1;#f=!1;#h=new Set;#_=new Set;#u=null;#w=Ni(()=>(this.#u=Ua(this.#v),()=>{this.#u=null}));constructor(e,a,r){this.#t=e,this.#e=a,this.#n=r,this.parent=Je.b,this.is_pending=!!this.#e.pending,this.#r=js(()=>{Je.b=this;{var n=this.#b();try{this.#s=Kt(()=>r(n))}catch(l){this.error(l)}this.#d>0?this.#m():this.is_pending=!1}return()=>{this.#c?.remove()}},Mi)}#k(){try{this.#s=Kt(()=>this.#n(this.#t))}catch(e){this.error(e)}}#x(){const e=this.#e.pending;e&&(this.#a=Kt(()=>e(this.#t)),ca(()=>{var a=this.#b();this.#s=this.#g(()=>(Da.ensure(),Kt(()=>this.#n(a)))),this.#d>0?this.#m():($a(this.#a,()=>{this.#a=null}),this.is_pending=!1)}))}#b(){var e=this.#t;return this.is_pending&&(this.#c=ba(),this.#t.before(this.#c),e=this.#c),e}defer_effect(e){Sr(e,this.#h,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(e){var a=Je,r=Fe,n=lt;va(this.#r),Ot(this.#r),Qa(this.#r.ctx);try{return e()}catch(l){return kr(l),null}finally{va(a),Ot(r),Qa(n)}}#m(){const e=this.#e.pending;this.#s!==null&&(this.#o=document.createDocumentFragment(),this.#o.append(this.#c),Yr(this.#s,this.#o)),this.#a===null&&(this.#a=Kt(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}if(this.#d+=e,this.#d===0){this.is_pending=!1;for(const a of this.#h)mt(a,Dt),wa(a);for(const a of this.#_)mt(a,da),wa(a);this.#h.clear(),this.#_.clear(),this.#a&&$a(this.#a,()=>{this.#a=null}),this.#o&&(this.#t.before(this.#o),this.#o=null)}}update_pending_count(e){this.#y(e),this.#v+=e,!(!this.#u||this.#p)&&(this.#p=!0,ca(()=>{this.#p=!1,this.#u&&es(this.#u,this.#v)}))}get_effect_pending(){return this.#w(),s(this.#u)}error(e){var a=this.#e.onerror;let r=this.#e.failed;if(this.#f||!a&&!r)throw e;this.#s&&(It(this.#s),this.#s=null),this.#a&&(It(this.#a),this.#a=null),this.#i&&(It(this.#i),this.#i=null);var n=!1,l=!1;const c=()=>{if(n){Ei();return}n=!0,l&&fi(),Da.ensure(),this.#v=0,this.#i!==null&&$a(this.#i,()=>{this.#i=null}),this.is_pending=this.has_pending_snippet(),this.#s=this.#g(()=>(this.#f=!1,Kt(()=>this.#n(this.#t)))),this.#d>0?this.#m():this.is_pending=!1};var u=Fe;try{Ot(null),l=!0,a?.(e,c),l=!1}catch(v){Ka(v,this.#r&&this.#r.parent)}finally{Ot(u)}r&&ca(()=>{this.#i=this.#g(()=>{Da.ensure(),this.#f=!0;try{return Kt(()=>{r(this.#t,()=>e,()=>c)})}catch(v){return Ka(v,this.#r.parent),null}finally{this.#f=!1}})})}}function Li(t,e,a,r){const n=Ss()?Ts:xn;var l=t.filter(h=>!h.settled);if(a.length===0&&l.length===0){r(e.map(n));return}var c=We,u=Je,v=$i(),f=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(h=>h.promise)):null;function p(h){v();try{r(h)}catch(m){(u.f&ga)===0&&Ka(m,u)}c?.deactivate(),ln()}if(a.length===0){f.then(()=>p(e.map(n)));return}function _(){v(),Promise.all(a.map(h=>Fi(h))).then(h=>p([...e.map(n),...h])).catch(h=>Ka(h,u))}f?f.then(_):_()}function $i(){var t=Je,e=Fe,a=lt,r=We;return function(l=!0){va(t),Ot(e),Qa(a),l&&r?.activate()}}function ln(){va(null),Ot(null),Qa(null)}function Ts(t){var e=St|Dt,a=Fe!==null&&(Fe.f&St)!==0?Fe:null;return Je!==null&&(Je.f|=ns),{ctx:lt,deps:null,effects:null,equals:br,f:e,fn:t,reactions:null,rv:0,v:kt,wv:0,parent:a??Je,ac:null}}function Fi(t,e,a){let r=Je;r===null&&ni();var n=r.b,l=void 0,c=Ua(kt),u=!Fe,v=new Map;return Ki(()=>{var f=fr();l=f.promise;try{Promise.resolve(t()).then(f.resolve,f.reject).then(()=>{p===We&&p.committed&&p.deactivate(),ln()})}catch(m){f.reject(m),ln()}var p=We;if(u){var _=n.is_rendered();n.update_pending_count(1),p.increment(_),v.get(p)?.reject(Za),v.delete(p),v.set(p,f)}const h=(m,S=void 0)=>{if(p.activate(),S)S!==Za&&(c.f|=Ca,es(c,S));else{(c.f&Ca)!==0&&(c.f^=Ca),es(c,m);for(const[q,y]of v){if(v.delete(q),q===p)break;y.reject(Za)}}u&&(n.update_pending_count(-1),p.decrement(_))};f.promise.then(h,m=>h(null,m||"unknown"))}),En(()=>{for(const f of v.values())f.reject(Za)}),new Promise(f=>{function p(_){function h(){_===l?f(c):p(l)}_.then(h,h)}p(l)})}function rt(t){const e=Ts(t);return Wr(e),e}function xn(t){const e=Ts(t);return e.equals=yr,e}function jr(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)It(e[a])}}function Bi(t){for(var e=t.parent;e!==null;){if((e.f&St)===0)return(e.f&ga)===0?e:null;e=e.parent}return null}function Sn(t){var e,a=Je;va(Bi(t));try{t.f&=~Ba,jr(t),e=Vr(t)}finally{va(a)}return e}function Pr(t){var e=Sn(t);if(!t.equals(e)&&(t.wv=Xr(),(!We?.is_fork||t.deps===null)&&(t.v=e,t.deps===null))){mt(t,xt);return}Na||(la!==null?(qn()||We?.is_fork)&&la.set(t,e):kn(t))}let on=new Set;const za=new Map;let Ar=!1;function Ua(t,e){var a={f:0,v:t,reactions:null,equals:br,rv:0,wv:0};return a}function x(t,e){const a=Ua(t);return Wr(a),a}function ds(t,e=!1,a=!0){const r=Ua(t);return e||(r.equals=yr),rs&&a&&lt!==null&&lt.l!==null&&(lt.l.s??=[]).push(r),r}function d(t,e,a=!1){Fe!==null&&(!ia||(Fe.f&Hn)!==0)&&Ss()&&(Fe.f&(St|ka|wn|Hn))!==0&&!ya?.includes(t)&&di();let r=a?Te(e):e;return es(t,r)}function es(t,e){if(!t.equals(e)){var a=t.v;Na?za.set(t,e):za.set(t,a),t.v=e;var r=Da.ensure();if(r.capture(t,a),(t.f&St)!==0){const n=t;(t.f&Dt)!==0&&Sn(n),kn(n)}t.wv=Xr(),Cr(t,Dt),Ss()&&Je!==null&&(Je.f&xt)!==0&&(Je.f&(xa|Ha))===0&&(Qt===null?to([t]):Qt.push(t)),!r.is_fork&&on.size>0&&!Ar&&Ui()}return e}function Ui(){Ar=!1;for(const t of on)(t.f&xt)!==0&&mt(t,da),ls(t)&&ts(t);on.clear()}function Ds(t,e=1){var a=s(t),r=e===1?a++:a--;return d(t,a),r}function gs(t){d(t,t.v+1)}function Cr(t,e){var a=t.reactions;if(a!==null)for(var r=Ss(),n=a.length,l=0;l<n;l++){var c=a[l],u=c.f;if(!(!r&&c===Je)){var v=(u&Dt)===0;if(v&&mt(c,e),(u&St)!==0){var f=c;la?.delete(f),(u&Ba)===0&&(u&ea&&(c.f|=Ba),Cr(f,da))}else v&&((u&ka)!==0&&ha!==null&&ha.add(c),wa(c))}}}function Te(t){if(typeof t!="object"||t===null||ma in t)return t;const e=gn(t);if(e!==Kl&&e!==ei)return t;var a=new Map,r=Us(t),n=x(0),l=Fa,c=u=>{if(Fa===l)return u();var v=Fe,f=Fa;Ot(null),Zn(l);var p=u();return Ot(v),Zn(f),p};return r&&a.set("length",x(t.length)),new Proxy(t,{defineProperty(u,v,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&vi();var p=a.get(v);return p===void 0?p=c(()=>{var _=x(f.value);return a.set(v,_),_}):d(p,f.value,!0),!0},deleteProperty(u,v){var f=a.get(v);if(f===void 0){if(v in u){const p=c(()=>x(kt));a.set(v,p),gs(n)}}else d(f,kt),gs(n);return!0},get(u,v,f){if(v===ma)return t;var p=a.get(v),_=v in u;if(p===void 0&&(!_||Va(u,v)?.writable)&&(p=c(()=>{var m=Te(_?u[v]:kt),S=x(m);return S}),a.set(v,p)),p!==void 0){var h=s(p);return h===kt?void 0:h}return Reflect.get(u,v,f)},getOwnPropertyDescriptor(u,v){var f=Reflect.getOwnPropertyDescriptor(u,v);if(f&&"value"in f){var p=a.get(v);p&&(f.value=s(p))}else if(f===void 0){var _=a.get(v),h=_?.v;if(_!==void 0&&h!==kt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return f},has(u,v){if(v===ma)return!0;var f=a.get(v),p=f!==void 0&&f.v!==kt||Reflect.has(u,v);if(f!==void 0||Je!==null&&(!p||Va(u,v)?.writable)){f===void 0&&(f=c(()=>{var h=p?Te(u[v]):kt,m=x(h);return m}),a.set(v,f));var _=s(f);if(_===kt)return!1}return p},set(u,v,f,p){var _=a.get(v),h=v in u;if(r&&v==="length")for(var m=f;m<_.v;m+=1){var S=a.get(m+"");S!==void 0?d(S,kt):m in u&&(S=c(()=>x(kt)),a.set(m+"",S))}if(_===void 0)(!h||Va(u,v)?.writable)&&(_=c(()=>x(void 0)),d(_,Te(f)),a.set(v,_));else{h=_.v!==kt;var q=c(()=>Te(f));d(_,q)}var y=Reflect.getOwnPropertyDescriptor(u,v);if(y?.set&&y.set.call(p,f),!h){if(r&&typeof v=="string"){var j=a.get("length"),z=Number(v);Number.isInteger(z)&&z>=j.v&&d(j,z+1)}gs(n)}return!0},ownKeys(u){s(n);var v=Reflect.ownKeys(u).filter(_=>{var h=a.get(_);return h===void 0||h.v!==kt});for(var[f,p]of a)p.v!==kt&&!(f in u)&&v.push(f);return v},setPrototypeOf(){ui()}})}function Wn(t){try{if(t!==null&&typeof t=="object"&&ma in t)return t[ma]}catch{}return t}function Gi(t,e){return Object.is(Wn(t),Wn(e))}var cn,Dr,zr,Rr;function Hi(){if(cn===void 0){cn=window,Dr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;zr=Va(e,"firstChild").get,Rr=Va(e,"nextSibling").get,Gn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Gn(a)&&(a.__t=void 0)}}function ba(t=""){return document.createTextNode(t)}function Aa(t){return zr.call(t)}function qs(t){return Rr.call(t)}function o(t,e){return Aa(t)}function Ee(t,e=!1){{var a=Aa(t);return a instanceof Comment&&a.data===""?qs(a):a}}function i(t,e=1,a=!1){let r=t;for(;e--;)r=qs(r);return r}function Yi(t){t.textContent=""}function Nr(){return!1}function Tn(t,e){{const a=document.body;t.autofocus=!0,ca(()=>{document.activeElement===a&&t.focus()})}}let Jn=!1;function Wi(){Jn||(Jn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Ys(t){var e=Fe,a=Je;Ot(null),va(null);try{return t()}finally{Ot(e),va(a)}}function Mr(t,e,a,r=a){t.addEventListener(e,()=>Ys(a));const n=t.__on_r;n?t.__on_r=()=>{n(),r(!0)}:t.__on_r=()=>r(!0),Wi()}function Or(t){Je===null&&(Fe===null&&ii(),li()),Na&&ri()}function Ji(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function fa(t,e,a){var r=Je;r!==null&&(r.f&Wt)!==0&&(t|=Wt);var n={ctx:lt,deps:null,nodes:null,f:t|Dt|ea,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{ts(n),n.f|=yn}catch(u){throw It(n),u}else e!==null&&wa(n);var l=n;if(a&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&ns)===0&&(l=l.first,(t&ka)!==0&&(t&Ra)!==0&&l!==null&&(l.f|=Ra)),l!==null&&(l.parent=r,r!==null&&Ji(l,r),Fe!==null&&(Fe.f&St)!==0&&(t&Ha)===0)){var c=Fe;(c.effects??=[]).push(l)}return n}function qn(){return Fe!==null&&!ia}function En(t){const e=fa(xs,null,!1);return mt(e,xt),e.teardown=t,e}function zt(t){Or();var e=Je.f,a=!Fe&&(e&xa)!==0&&(e&yn)===0;if(a){var r=lt;(r.e??=[]).push(t)}else return Ir(t)}function Ir(t){return fa(Ms|_r,t,!1)}function Xi(t){return Or(),fa(xs|_r,t,!0)}function Zi(t){Da.ensure();const e=fa(Ha|ns,t,!0);return(a={})=>new Promise(r=>{a.outro?$a(e,()=>{It(e),r(void 0)}):(It(e),r(void 0))})}function Lr(t){return fa(Ms,t,!1)}function Vi(t,e){var a=lt,r={effect:null,ran:!1,deps:t};a.l.$.push(r),r.effect=Es(()=>{t(),!r.ran&&(r.ran=!0,Ma(e))})}function Qi(){var t=lt;Es(()=>{for(var e of t.l.$){e.deps();var a=e.effect;(a.f&xt)!==0&&a.deps!==null&&mt(a,da),ls(a)&&ts(a),e.ran=!1}})}function Ki(t){return fa(wn|ns,t,!0)}function Es(t,e=0){return fa(xs|e,t,!0)}function U(t,e=[],a=[],r=[]){Li(r,e,a,n=>{fa(xs,()=>t(...n.map(s)),!0)})}function js(t,e=0){var a=fa(ka|e,t,!0);return a}function Kt(t){return fa(xa|ns,t,!0)}function $r(t){var e=t.teardown;if(e!==null){const a=Na,r=Fe;Xn(!0),Ot(null);try{e.call(null)}finally{Xn(a),Ot(r)}}}function Fr(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const n=a.ac;n!==null&&Ys(()=>{n.abort(Za)});var r=a.next;(a.f&Ha)!==0?a.parent=null:It(a,e),a=r}}function eo(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&xa)===0&&It(e),e=a}}function It(t,e=!0){var a=!1;(e||(t.f&hr)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Br(t.nodes.start,t.nodes.end),a=!0),Fr(t,e&&!a),Is(t,0),mt(t,ga);var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)l.stop();$r(t);var n=t.parent;n!==null&&n.first!==null&&Ur(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Br(t,e){for(;t!==null;){var a=t===e?null:qs(t);t.remove(),t=a}}function Ur(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function $a(t,e,a=!0){var r=[];Gr(t,r,!0);var n=()=>{a&&It(t),e&&e()},l=r.length;if(l>0){var c=()=>--l||n();for(var u of r)u.out(c)}else n()}function Gr(t,e,a){if((t.f&Wt)===0){t.f^=Wt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const u of r)(u.is_global||a)&&e.push(u);for(var n=t.first;n!==null;){var l=n.next,c=(n.f&Ra)!==0||(n.f&xa)!==0&&(t.f&ka)!==0;Gr(n,e,c?a:!1),n=l}}}function jn(t){Hr(t,!0)}function Hr(t,e){if((t.f&Wt)!==0){t.f^=Wt,(t.f&xt)===0&&(mt(t,Dt),wa(t));for(var a=t.first;a!==null;){var r=a.next,n=(a.f&Ra)!==0||(a.f&xa)!==0;Hr(a,n?e:!1),a=r}var l=t.nodes&&t.nodes.t;if(l!==null)for(const c of l)(c.is_global||e)&&c.in()}}function Yr(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var n=a===r?null:qs(a);e.append(a),a=n}}let Ns=!1,Na=!1;function Xn(t){Na=t}let Fe=null,ia=!1;function Ot(t){Fe=t}let Je=null;function va(t){Je=t}let ya=null;function Wr(t){Fe!==null&&(ya===null?ya=[t]:ya.push(t))}let Mt=null,Ht=0,Qt=null;function to(t){Qt=t}let Jr=1,La=0,Fa=La;function Zn(t){Fa=t}function Xr(){return++Jr}function ls(t){var e=t.f;if((e&Dt)!==0)return!0;if(e&St&&(t.f&=~Ba),(e&da)!==0){for(var a=t.deps,r=a.length,n=0;n<r;n++){var l=a[n];if(ls(l)&&Pr(l),l.wv>t.wv)return!0}(e&ea)!==0&&la===null&&mt(t,xt)}return!1}function Zr(t,e,a=!0){var r=t.reactions;if(r!==null&&!ya?.includes(t))for(var n=0;n<r.length;n++){var l=r[n];(l.f&St)!==0?Zr(l,e,!1):e===l&&(a?mt(l,Dt):(l.f&xt)!==0&&mt(l,da),wa(l))}}function Vr(t){var e=Mt,a=Ht,r=Qt,n=Fe,l=ya,c=lt,u=ia,v=Fa,f=t.f;Mt=null,Ht=0,Qt=null,Fe=(f&(xa|Ha))===0?t:null,ya=null,Qa(t.ctx),ia=!1,Fa=++La,t.ac!==null&&(Ys(()=>{t.ac.abort(Za)}),t.ac=null);try{t.f|=nn;var p=t.fn,_=p(),h=t.deps;if(Mt!==null){var m;if(Is(t,Ht),h!==null&&Ht>0)for(h.length=Ht+Mt.length,m=0;m<Mt.length;m++)h[Ht+m]=Mt[m];else t.deps=h=Mt;if(qn()&&(t.f&ea)!==0)for(m=Ht;m<h.length;m++)(h[m].reactions??=[]).push(t)}else h!==null&&Ht<h.length&&(Is(t,Ht),h.length=Ht);if(Ss()&&Qt!==null&&!ia&&h!==null&&(t.f&(St|da|Dt))===0)for(m=0;m<Qt.length;m++)Zr(Qt[m],t);if(n!==null&&n!==t){if(La++,n.deps!==null)for(let S=0;S<a;S+=1)n.deps[S].rv=La;if(e!==null)for(const S of e)S.rv=La;Qt!==null&&(r===null?r=Qt:r.push(...Qt))}return(t.f&Ca)!==0&&(t.f^=Ca),_}catch(S){return kr(S)}finally{t.f^=nn,Mt=e,Ht=a,Qt=r,Fe=n,ya=l,Qa(c),ia=u,Fa=v}}function ao(t,e){let a=e.reactions;if(a!==null){var r=Vl.call(a,t);if(r!==-1){var n=a.length-1;n===0?a=e.reactions=null:(a[r]=a[n],a.pop())}}if(a===null&&(e.f&St)!==0&&(Mt===null||!Mt.includes(e))){var l=e;(l.f&ea)!==0&&(l.f^=ea,l.f&=~Ba),kn(l),jr(l),Is(l,0)}}function Is(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)ao(t,a[r])}function ts(t){var e=t.f;if((e&ga)===0){mt(t,xt);var a=Je,r=Ns;Je=t,Ns=!0;try{(e&(ka|pr))!==0?eo(t):Fr(t),$r(t);var n=Vr(t);t.teardown=typeof n=="function"?n:null,t.wv=Jr;var l;an&&Pi&&(t.f&Dt)!==0&&t.deps}finally{Ns=r,Je=a}}}async function so(){await Promise.resolve(),zi()}function s(t){var e=t.f,a=(e&St)!==0;if(Fe!==null&&!ia){var r=Je!==null&&(Je.f&ga)!==0;if(!r&&!ya?.includes(t)){var n=Fe.deps;if((Fe.f&nn)!==0)t.rv<La&&(t.rv=La,Mt===null&&n!==null&&n[Ht]===t?Ht++:Mt===null?Mt=[t]:Mt.push(t));else{(Fe.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[Fe]:l.includes(Fe)||l.push(Fe)}}}if(Na&&za.has(t))return za.get(t);if(a){var c=t;if(Na){var u=c.v;return((c.f&xt)===0&&c.reactions!==null||Kr(c))&&(u=Sn(c)),za.set(c,u),u}var v=(c.f&ea)===0&&!ia&&Fe!==null&&(Ns||(Fe.f&ea)!==0),f=c.deps===null;ls(c)&&(v&&(c.f|=ea),Pr(c)),v&&!f&&Qr(c)}if(la?.has(t))return la.get(t);if((t.f&Ca)!==0)throw t.v;return t.v}function Qr(t){if(t.deps!==null){t.f|=ea;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&St)!==0&&(e.f&ea)===0&&Qr(e)}}function Kr(t){if(t.v===kt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(za.has(e)||(e.f&St)!==0&&Kr(e))return!0;return!1}function Ma(t){var e=ia;try{return ia=!0,t()}finally{ia=e}}function el(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ma in t)vn(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&ma in a&&vn(a)}}}function vn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{vn(t[r],e)}catch{}const a=gn(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=dr(a);for(let n in r){const l=r[n].get;if(l)try{l.call(t)}catch{}}}}}const no=["touchstart","touchmove"];function ro(t){return no.includes(t)}const tl=new Set,un=new Set;function lo(t,e,a,r={}){function n(l){if(r.capture||fs.call(e,l),!l.cancelBubble)return Ys(()=>a?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ca(()=>{e.addEventListener(t,n,r)}):e.addEventListener(t,n,r),n}function ua(t,e,a,r,n){var l={capture:r,passive:n},c=lo(t,e,a,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&En(()=>{e.removeEventListener(t,c,l)})}function tt(t){for(var e=0;e<t.length;e++)tl.add(t[e]);for(var a of un)a(t)}let Vn=null;function fs(t){var e=this,a=e.ownerDocument,r=t.type,n=t.composedPath?.()||[],l=n[0]||t.target;Vn=t;var c=0,u=Vn===t&&t.__root;if(u){var v=n.indexOf(u);if(v!==-1&&(e===document||e===window)){t.__root=e;return}var f=n.indexOf(e);if(f===-1)return;v<=f&&(c=v)}if(l=n[c]||t.target,l!==e){Ql(t,"currentTarget",{configurable:!0,get(){return l||a}});var p=Fe,_=Je;Ot(null),va(null);try{for(var h,m=[];l!==null;){var S=l.assignedSlot||l.parentNode||l.host||null;try{var q=l["__"+r];q!=null&&(!l.disabled||t.target===l)&&q.call(l,t)}catch(y){h?m.push(y):h=y}if(t.cancelBubble||S===e||S===null)break;l=S}if(h){for(let y of m)queueMicrotask(()=>{throw y});throw h}}finally{t.__root=e,delete t.currentTarget,Ot(p),va(_)}}}function al(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ws(t,e){var a=Je;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function w(t,e){var a=(e&xi)!==0,r=(e&Si)!==0,n,l=!t.startsWith("<!>");return()=>{n===void 0&&(n=al(l?t:"<!>"+t),a||(n=Aa(n)));var c=r||Dr?document.importNode(n,!0):n.cloneNode(!0);if(a){var u=Aa(c),v=c.lastChild;ws(u,v)}else ws(c,c);return c}}function sl(t=""){{var e=ba(t+"");return ws(e,e),e}}function Ke(){var t=document.createDocumentFragment(),e=document.createComment(""),a=ba();return t.append(e,a),ws(e,a),t}function g(t,e){t!==null&&t.before(e)}function T(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??=t.nodeValue)&&(t.__t=a,t.nodeValue=a+"")}function io(t,e){return oo(t,e)}const Ja=new Map;function oo(t,{target:e,anchor:a,props:r={},events:n,context:l,intro:c=!0}){Hi();var u=new Set,v=_=>{for(var h=0;h<_.length;h++){var m=_[h];if(!u.has(m)){u.add(m);var S=ro(m);e.addEventListener(m,fs,{passive:S});var q=Ja.get(m);q===void 0?(document.addEventListener(m,fs,{passive:S}),Ja.set(m,1)):Ja.set(m,q+1)}}};v(Gs(tl)),un.add(v);var f=void 0,p=Zi(()=>{var _=a??e.appendChild(ba());return Oi(_,{pending:()=>{}},h=>{if(l){Ze({});var m=lt;m.c=l}n&&(r.$$events=n),f=t(h,r)||{},l&&Ve()}),()=>{for(var h of u){e.removeEventListener(h,fs);var m=Ja.get(h);--m===0?(document.removeEventListener(h,fs),Ja.delete(h)):Ja.set(h,m)}un.delete(v),_!==a&&_.parentNode?.removeChild(_)}});return co.set(f,p),f}let co=new WeakMap;class Pn{anchor;#t=new Map;#l=new Map;#e=new Map;#n=new Set;#r=!0;constructor(e,a=!0){this.anchor=e,this.#r=a}#s=()=>{var e=We;if(this.#t.has(e)){var a=this.#t.get(e),r=this.#l.get(a);if(r)jn(r),this.#n.delete(a);else{var n=this.#e.get(a);n&&(this.#l.set(a,n.effect),this.#e.delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[l,c]of this.#t){if(this.#t.delete(l),l===e)break;const u=this.#e.get(c);u&&(It(u.effect),this.#e.delete(c))}for(const[l,c]of this.#l){if(l===a||this.#n.has(l))continue;const u=()=>{if(Array.from(this.#t.values()).includes(l)){var f=document.createDocumentFragment();Yr(c,f),f.append(ba()),this.#e.set(l,{effect:c,fragment:f})}else It(c);this.#n.delete(l),this.#l.delete(l)};this.#r||!r?(this.#n.add(l),$a(c,u,!1)):u()}}};#a=e=>{this.#t.delete(e);const a=Array.from(this.#t.values());for(const[r,n]of this.#e)a.includes(r)||(It(n.effect),this.#e.delete(r))};ensure(e,a){var r=We,n=Nr();if(a&&!this.#l.has(e)&&!this.#e.has(e))if(n){var l=document.createDocumentFragment(),c=ba();l.append(c),this.#e.set(e,{effect:Kt(()=>a(c)),fragment:l})}else this.#l.set(e,Kt(()=>a(this.anchor)));if(this.#t.set(r,e),n){for(const[u,v]of this.#l)u===e?r.skipped_effects.delete(v):r.skipped_effects.add(v);for(const[u,v]of this.#e)u===e?r.skipped_effects.delete(v.effect):r.skipped_effects.add(v.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function I(t,e,a=!1){var r=new Pn(t),n=a?Ra:0;function l(c,u){r.ensure(c,u)}js(()=>{var c=!1;e((u,v=!0)=>{c=!0,l(v,u)}),c||l(!1,null)},n)}function Ue(t,e){return e}function vo(t,e,a){for(var r=[],n=e.length,l,c=e.length,u=0;u<n;u++){let _=e[u];$a(_,()=>{if(l){if(l.pending.delete(_),l.done.add(_),l.pending.size===0){var h=t.outrogroups;dn(Gs(l.done)),h.delete(l),h.size===0&&(t.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=r.length===0&&a!==null;if(v){var f=a,p=f.parentNode;Yi(p),p.append(f),t.items.clear()}dn(e,!v)}else l={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(l)}function dn(t,e=!0){for(var a=0;a<t.length;a++)It(t[a],e)}var Qn;function ze(t,e,a,r,n,l=null){var c=t,u=new Map,v=(e&mr)!==0;if(v){var f=t;c=f.appendChild(ba())}var p=null,_=xn(()=>{var j=a();return Us(j)?j:j==null?[]:Gs(j)}),h,m=!0;function S(){y.fallback=p,uo(y,h,c,e,r),p!==null&&(h.length===0?(p.f&_a)===0?jn(p):(p.f^=_a,ps(p,null,c)):$a(p,()=>{p=null}))}var q=js(()=>{h=s(_);for(var j=h.length,z=new Set,b=We,E=Nr(),D=0;D<j;D+=1){var M=h[D],$=r(M,D),Y=m?null:u.get($);Y?(Y.v&&es(Y.v,M),Y.i&&es(Y.i,D),E&&b.skipped_effects.delete(Y.e)):(Y=fo(u,m?c:Qn??=ba(),M,$,D,n,e,a),m||(Y.e.f|=_a),u.set($,Y)),z.add($)}if(j===0&&l&&!p&&(m?p=Kt(()=>l(c)):(p=Kt(()=>l(Qn??=ba())),p.f|=_a)),!m)if(E){for(const[R,W]of u)z.has(R)||b.skipped_effects.add(W.e);b.oncommit(S),b.ondiscard(()=>{})}else S();s(_)}),y={effect:q,items:u,outrogroups:null,fallback:p};m=!1}function uo(t,e,a,r,n){var l=(r&_i)!==0,c=e.length,u=t.items,v=t.effect.first,f,p=null,_,h=[],m=[],S,q,y,j;if(l)for(j=0;j<c;j+=1)S=e[j],q=n(S,j),y=u.get(q).e,(y.f&_a)===0&&(y.nodes?.a?.measure(),(_??=new Set).add(y));for(j=0;j<c;j+=1){if(S=e[j],q=n(S,j),y=u.get(q).e,t.outrogroups!==null)for(const W of t.outrogroups)W.pending.delete(y),W.done.delete(y);if((y.f&_a)!==0)if(y.f^=_a,y===v)ps(y,null,a);else{var z=p?p.next:v;y===t.effect.last&&(t.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),Ea(t,p,y),Ea(t,y,z),ps(y,z,a),p=y,h=[],m=[],v=p.next;continue}if((y.f&Wt)!==0&&(jn(y),l&&(y.nodes?.a?.unfix(),(_??=new Set).delete(y))),y!==v){if(f!==void 0&&f.has(y)){if(h.length<m.length){var b=m[0],E;p=b.prev;var D=h[0],M=h[h.length-1];for(E=0;E<h.length;E+=1)ps(h[E],b,a);for(E=0;E<m.length;E+=1)f.delete(m[E]);Ea(t,D.prev,M.next),Ea(t,p,D),Ea(t,M,b),v=b,p=M,j-=1,h=[],m=[]}else f.delete(y),ps(y,v,a),Ea(t,y.prev,y.next),Ea(t,y,p===null?t.effect.first:p.next),Ea(t,p,y),p=y;continue}for(h=[],m=[];v!==null&&v!==y;)(f??=new Set).add(v),m.push(v),v=v.next;if(v===null)continue}(y.f&_a)===0&&h.push(y),p=y,v=y.next}if(t.outrogroups!==null){for(const W of t.outrogroups)W.pending.size===0&&(dn(Gs(W.done)),t.outrogroups?.delete(W));t.outrogroups.size===0&&(t.outrogroups=null)}if(v!==null||f!==void 0){var $=[];if(f!==void 0)for(y of f)(y.f&Wt)===0&&$.push(y);for(;v!==null;)(v.f&Wt)===0&&v!==t.fallback&&$.push(v),v=v.next;var Y=$.length;if(Y>0){var R=(r&mr)!==0&&c===0?a:null;if(l){for(j=0;j<Y;j+=1)$[j].nodes?.a?.measure();for(j=0;j<Y;j+=1)$[j].nodes?.a?.fix()}vo(t,$,R)}}l&&ca(()=>{if(_!==void 0)for(y of _)y.nodes?.a?.apply()})}function fo(t,e,a,r,n,l,c,u){var v=(c&pi)!==0?(c&gi)===0?ds(a,!1,!1):Ua(a):null,f=(c&hi)!==0?Ua(n):null;return{v,i:f,e:Kt(()=>(l(e,v??a,f??n,u),()=>{t.delete(r)}))}}function ps(t,e,a){if(t.nodes)for(var r=t.nodes.start,n=t.nodes.end,l=e&&(e.f&_a)===0?e.nodes.start:a;r!==null;){var c=qs(r);if(l.before(r),r===n)return;r=c}}function Ea(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function po(t,e,a=!1,r=!1,n=!1){var l=t,c="";U(()=>{var u=Je;if(c!==(c=e()??"")&&(u.nodes!==null&&(Br(u.nodes.start,u.nodes.end),u.nodes=null),c!=="")){var v=c+"";a?v=`<svg>${v}</svg>`:r&&(v=`<math>${v}</math>`);var f=al(v);if((a||r)&&(f=Aa(f)),ws(Aa(f),f.lastChild),a||r)for(;Aa(f);)l.before(Aa(f));else l.before(f)}})}function ho(t,e,...a){var r=new Pn(t);js(()=>{const n=e()??null;r.ensure(n,n&&(l=>n(l,...a)))},Ra)}function _o(t,e,a){var r=new Pn(t);js(()=>{var n=e()??null;r.ensure(n,n&&(l=>a(l,n)))},Ra)}const Kn=[...` 	
\r\fÂ \v\uFEFF`];function go(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var n in a)if(a[n])r=r?r+" "+n:n;else if(r.length)for(var l=n.length,c=0;(c=r.indexOf(n,c))>=0;){var u=c+l;(c===0||Kn.includes(r[c-1]))&&(u===r.length||Kn.includes(r[u]))?r=(c===0?"":r.substring(0,c))+r.substring(u+1):c=u}}return r===""?null:r}function mo(t,e){return t==null?null:String(t)}function Le(t,e,a,r,n,l){var c=t.__className;if(c!==a||c===void 0){var u=go(a,r,l);u==null?t.removeAttribute("class"):t.className=u,t.__className=a}else if(l&&n!==l)for(var v in l){var f=!!l[v];(n==null||f!==!!n[v])&&t.classList.toggle(v,f)}return l}function as(t,e,a,r){var n=t.__style;if(n!==e){var l=mo(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return r}function ks(t,e,a=!1){if(t.multiple){if(e==null)return;if(!Us(e))return qi();for(var r of t.options)r.selected=e.includes(ms(r));return}for(r of t.options){var n=ms(r);if(Gi(n,e)){r.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function Ls(t){var e=new MutationObserver(()=>{ks(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),En(()=>{e.disconnect()})}function ht(t,e,a=e){var r=new WeakSet,n=!0;Mr(t,"change",l=>{var c=l?"[selected]":":checked",u;if(t.multiple)u=[].map.call(t.querySelectorAll(c),ms);else{var v=t.querySelector(c)??t.querySelector("option:not([disabled])");u=v&&ms(v)}a(u),We!==null&&r.add(We)}),Lr(()=>{var l=e();if(t===document.activeElement){var c=Os??We;if(r.has(c))return}if(ks(t,l,n),n&&l===void 0){var u=t.querySelector(":checked");u!==null&&(l=ms(u),a(l))}t.__value=l,n=!1}),Ls(t)}function ms(t){return"__value"in t?t.__value:t.value}const bo=Symbol("is custom element"),yo=Symbol("is html");function cs(t,e){var a=An(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Qs(t,e){var a=An(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function He(t,e,a,r){var n=An(t);n[e]!==(n[e]=a)&&(e==="loading"&&(t[si]=a),a==null?t.removeAttribute(e):typeof a!="string"&&wo(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function An(t){return t.__attributes??={[bo]:t.nodeName.includes("-"),[yo]:t.namespaceURI===Ti}}var er=new Map;function wo(t){var e=t.getAttribute("is")||t.nodeName,a=er.get(e);if(a)return a;er.set(e,a=[]);for(var r,n=t,l=Element.prototype;l!==n;){r=dr(n);for(var c in r)r[c].set&&a.push(c);n=gn(n)}return a}function Ce(t,e,a=e){var r=new WeakSet;Mr(t,"input",async n=>{var l=n?t.defaultValue:t.value;if(l=Ks(t)?en(l):l,a(l),We!==null&&r.add(We),await so(),l!==(l=e())){var c=t.selectionStart,u=t.selectionEnd,v=t.value.length;if(t.value=l??"",u!==null){var f=t.value.length;c===u&&u===v&&f>v?(t.selectionStart=f,t.selectionEnd=f):(t.selectionStart=c,t.selectionEnd=Math.min(u,f))}}}),Ma(e)==null&&t.value&&(a(Ks(t)?en(t.value):t.value),We!==null&&r.add(We)),Es(()=>{var n=e();if(t===document.activeElement){var l=Os??We;if(r.has(l))return}Ks(t)&&n===en(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function Ks(t){var e=t.type;return e==="number"||e==="range"}function en(t){return t===""?null:+t}function tr(t,e){return t===e||t?.[ma]===e}function Cn(t={},e,a,r){return Lr(()=>{var n,l;return Es(()=>{n=l,l=[],Ma(()=>{t!==a(...l)&&(e(t,...l),n&&tr(a(...n),t)&&e(null,...n))})}),()=>{ca(()=>{l&&tr(a(...l),t)&&e(null,...l)})}}),t}function nl(t=!1){const e=lt,a=e.l.u;if(!a)return;let r=()=>el(e.s);if(t){let n=0,l={};const c=Ts(()=>{let u=!1;const v=e.s;for(const f in v)v[f]!==l[f]&&(l[f]=v[f],u=!0);return u&&n++,n});r=()=>s(c)}a.b.length&&Xi(()=>{ar(e,r),sn(a.b)}),zt(()=>{const n=Ma(()=>a.m.map(ti));return()=>{for(const l of n)typeof l=="function"&&l()}}),a.a.length&&zt(()=>{ar(e,r),sn(a.a)})}function ar(t,e){if(t.l.s)for(const a of t.l.s)s(a);e()}let zs=!1;function ko(t){var e=zs;try{return zs=!1,[t(),zs]}finally{zs=e}}function _t(t,e,a,r){var n=!rs||(a&bi)!==0,l=(a&wi)!==0,c=(a&ki)!==0,u=r,v=!0,f=()=>(v&&(v=!1,u=c?Ma(r):r),u),p;if(l){var _=ma in t||ai in t;p=Va(t,e)?.set??(_&&e in t?b=>t[e]=b:void 0)}var h,m=!1;l?[h,m]=ko(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=f(),p&&(n&&ci(),p(h)));var S;if(n?S=()=>{var b=t[e];return b===void 0?f():(v=!0,b)}:S=()=>{var b=t[e];return b!==void 0&&(u=void 0),b===void 0?u:b},n&&(a&yi)===0)return S;if(p){var q=t.$$legacy;return(function(b,E){return arguments.length>0?((!n||!E||q||m)&&p(E?S():b),b):S()})}var y=!1,j=((a&mi)!==0?Ts:xn)(()=>(y=!1,S()));l&&s(j);var z=Je;return(function(b,E){if(arguments.length>0){const D=E?s(j):n&&l?Te(b):b;return d(j,D),y=!0,u!==void 0&&(u=D),b}return Na&&y||(z.f&ga)!==0?j.v:s(j)})}function Lt(t){lt===null&&gr(),rs&&lt.l!==null?So(lt).m.push(t):zt(()=>{const e=Ma(t);if(typeof e=="function")return e})}function xo(t,e,{bubbles:a=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:a,cancelable:r})}function rl(){const t=lt;return t===null&&gr(),(e,a,r)=>{const n=t.s.$$events?.[e];if(n){const l=Us(n)?n.slice():[n],c=xo(e,a,r);for(const u of l)u.call(t.x,c);return!c.defaultPrevented}return!0}}function So(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const To="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(To);function sa(t){window.history.pushState({},"",t),window.dispatchEvent(new Event("popstate"))}let fn=Te({path:window.location.pathname});if(typeof window<"u"){const t=history.pushState;history.pushState=function(...e){t.apply(this,e),fn.path=window.location.pathname,window.dispatchEvent(new Event("popstate"))},window.addEventListener("popstate",()=>{fn.path=window.location.pathname})}const ja={get path(){return fn.path}};var qo=w("<p>404 Not Found</p>");function Eo(t,e){Ze(e,!0);let a=x(Te(window.location.pathname)),r=x(null);function n(){d(a,window.location.pathname,!0)}zt(()=>{let f=s(a),p=null;if(!e.routes)return;const _=Object.keys(e.routes).sort((h,m)=>m.length-h.length);for(const h of _){if(h===f){p=e.routes[h];break}if(f.startsWith(h)&&h!=="/"){p=e.routes[h];break}}p||(p=e.routes["/"]||null),d(r,p,!0)}),Lt(()=>(window.addEventListener("popstate",n),()=>{window.removeEventListener("popstate",n)}));var l=Ke(),c=Ee(l);{var u=f=>{var p=Ke(),_=Ee(p);_o(_,()=>s(r),(h,m)=>{m(h,{})}),g(f,p)},v=f=>{var p=qo();g(f,p)};I(c,f=>{s(r)?f(u):f(v,!1)})}g(t,l),Ve()}const Me="";function Oe(t={}){return{"X-User-Role":localStorage.getItem("user_role")||"admin",...t}}async function Ws(t){const e=new FormData;e.append("file",t);const a=await fetch(`${Me}/upload`,{method:"POST",headers:Oe(),body:e});if(!a.ok)throw new Error("Upload failed");return await a.json()}async function Js(t="",e="",a="",r="registration_date",n="desc",l="",c="",u="",v="registration_date",f="",p=""){const _=new URLSearchParams;return t&&_.append("search",t),e&&_.append("type",e),a&&_.append("status",a),l&&_.append("tag",l),c&&_.append("start_date",c),u&&_.append("end_date",u),v&&_.append("date_field",v),r&&_.append("sort_by",r),n&&_.append("sort_order",n),f&&_.append("assignee",f),p&&_.append("part_search",p),await(await fetch(`${Me}/documents/?${_.toString()}`,{headers:Oe()})).json()}async function ll(){return await(await fetch(`${Me}/tags`,{headers:Oe()})).json()}async function Pa(t){const e=await fetch(`${Me}/settings/${t}`,{headers:Oe()});if(!e.ok)throw new Error("Failed to fetch setting");return await e.json()}async function Xa(t,e){const a=await fetch(`${Me}/settings/`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({key:t,value:e})});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||`Failed to update setting (${a.status})`)}return await a.json()}async function il(t){return await(await fetch(`${Me}/settings/test-path`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({path:t})})).json()}async function ol(t){const e=await fetch(`${Me}/documents/`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(t)});if(!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.detail||`Failed to create document (${e.status})`)}return await e.json()}async function cl(t,e){return await(await fetch(`${Me}/documents/${t}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({status:e})})).json()}async function vl(t,e){const a=await fetch(`${Me}/documents/${t}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||`Failed to update document (${a.status})`)}return await a.json()}async function ul(t,e){const a=await fetch(`${Me}/documents/${t}/download-zip`,{headers:Oe()});if(!a.ok)throw new Error("Download failed");const r=await a.blob(),n=window.URL.createObjectURL(r),l=document.createElement("a");l.href=n,l.download=`${e}_source.zip`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(n)}async function dl(t){return await(await fetch(`${Me}/documents/${t}`,{method:"DELETE",headers:Oe()})).json()}async function fl(t="",e="",a=""){const r=new URLSearchParams;return t&&r.append("type",t),e&&r.append("status",e),a&&r.append("document_id",a),await(await fetch(`${Me}/journal/?${r.toString()}`,{headers:Oe()})).json()}async function Dn(t){return await(await fetch(`${Me}/journal/`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function Xs(t,e){return await(await fetch(`${Me}/journal/${t}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(e)})).json()}async function pl(t){return await(await fetch(`${Me}/journal/${t}`,{method:"DELETE",headers:Oe()})).json()}async function hl(t){return await(await fetch(`${Me}/documents/${t}/tasks`,{headers:Oe()})).json()}async function _l(t,e){return await(await fetch(`${Me}/documents/${t}/tasks`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(e)})).json()}async function jo(t,e,a){const r=await fetch(`${Me}/documents/save-as-new-order`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({name:t,sheet:e,original_document_id:a})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.detail||`Failed to create order (${r.status})`)}return await r.json()}async function bs(t,e){return await(await fetch(`${Me}/tasks/${t}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(e)})).json()}async function gl(t){return await(await fetch(`${Me}/tasks/${t}`,{method:"DELETE",headers:Oe()})).json()}async function ml(t){return await(await fetch(`${Me}/attachments/${t}`,{method:"DELETE",headers:Oe()})).json()}async function bl(){return await(await fetch(`${Me}/filter-presets`,{headers:Oe()})).json()}async function Sa(){return await(await fetch(`${Me}/materials`,{headers:Oe()})).json()}async function yl(t){return await(await fetch(`${Me}/materials`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function wl(t,e){const a=await fetch(`${Me}/documents/order`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({name:e,parts:t})});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||`Failed to create order (${a.status})`)}return await a.json()}async function kl(t,e){return await(await fetch(`${Me}/materials/${t}?name=${encodeURIComponent(e)}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"})})).json()}async function xl(t){return await(await fetch(`${Me}/materials/${t}`,{method:"DELETE",headers:Oe()})).json()}async function Sl(t=0,e=100,a={}){const r=new URLSearchParams({skip:String(t),limit:String(e)});return a.search&&r.append("search",a.search),a.material_id&&r.append("material_id",a.material_id),a.min_width&&r.append("min_width",a.min_width),a.max_width&&r.append("max_width",a.max_width),a.min_height&&r.append("min_height",a.min_height),a.max_height&&r.append("max_height",a.max_height),await(await fetch(`${Me}/parts?${r.toString()}`,{headers:Oe()})).json()}async function zn(){return await(await fetch(`${Me}/stock`,{headers:Oe()})).json()}async function Tl(t){return await(await fetch(`${Me}/stock`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function ql(t){return await(await fetch(`${Me}/stock/${t}`,{method:"DELETE",headers:Oe()})).json()}async function El(t){const e=new FormData;e.append("file",t);const a=await fetch(`${Me}/gnc/parse`,{method:"POST",headers:Oe(),body:e});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||"Failed to parse GNC file")}return await a.json()}async function jl(t,e,a=!0){const r=await fetch(`${Me}/gnc/save`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({sheet:t,filename:e,overwrite:a})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.detail||"Failed to save GNC file")}return await r.json()}async function Pl(t){const e=await fetch(`${Me}/parts/scan`,{method:"POST",headers:Oe()});if(!e.ok)throw new Error("Failed to start scan");const a=e.body.getReader(),r=new TextDecoder;for(;;){const{done:n,value:l}=await a.read();if(n)break;const u=r.decode(l).split(`
`).filter(v=>v.trim());for(const v of u)try{const f=JSON.parse(v);t(f)}catch{console.error("Failed to parse progress:",v)}}}async function Al(t,e){const a=await fetch(`${Me}/parts/${t}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!a.ok)throw new Error("Failed to update part");return await a.json()}async function Cl(t){const e=await fetch(`${Me}/parts/${t}/gnc`,{headers:Oe()});if(!e.ok)throw new Error("Failed to fetch part GNC");return await e.json()}async function ss(){return await(await fetch(`${Me}/assignees/`,{headers:Oe()})).json()}async function Dl(t){return await(await fetch(`${Me}/assignees/`,{method:"POST",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function zl(t,e){return await(await fetch(`${Me}/assignees/${t}`,{method:"PUT",headers:Oe({"Content-Type":"application/json"}),body:JSON.stringify({name:e})})).json()}async function Rl(t){return await(await fetch(`${Me}/assignees/${t}`,{method:"DELETE",headers:Oe()})).json()}const Po=Object.freeze(Object.defineProperty({__proto__:null,createAssignee:Dl,createDocument:ol,createJournalEntry:Dn,createMaterial:yl,createOrder:wl,createStockItem:Tl,createTask:_l,deleteAssignee:Rl,deleteAttachment:ml,deleteDocument:dl,deleteJournalEntry:pl,deleteMaterial:xl,deleteStockItem:ql,deleteTask:gl,downloadDocumentZip:ul,fetchAssignees:ss,fetchDocuments:Js,fetchFilterPresets:bl,fetchJournalEntries:fl,fetchMaterials:Sa,fetchPartGnc:Cl,fetchParts:Sl,fetchSetting:Pa,fetchStock:zn,fetchTags:ll,fetchTasks:hl,parseGnc:El,saveAsNewOrder:jo,saveGnc:jl,scanParts:Pl,testPath:il,updateAssignee:zl,updateDocument:vl,updateDocumentStatus:cl,updateJournalEntry:Xs,updateMaterial:kl,updatePart:Al,updateSetting:Xa,updateTask:bs,uploadFile:Ws},Symbol.toStringTag,{value:"Module"}));var Ao=w('<div class="loading svelte-plcxj0">Loading dashboard...</div>'),Co=w('<div class="recent-doc-item svelte-plcxj0"><div class="doc-info svelte-plcxj0"><span class="doc-name svelte-plcxj0"> </span> <span class="doc-date svelte-plcxj0"> </span></div> <span> </span></div>'),Do=w('<div class="empty-state svelte-plcxj0">No documents yet</div>'),zo=w('<div class="dashboard-section svelte-plcxj0"><h2 class="svelte-plcxj0">ðŸ“Š Overview</h2> <div class="stats-grid svelte-plcxj0"><div class="stat-card documents svelte-plcxj0"><div class="stat-icon svelte-plcxj0">ðŸ“„</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Total Documents</div> <div class="stat-breakdown svelte-plcxj0"><span class="in-progress svelte-plcxj0"> </span> <span class="done svelte-plcxj0"> </span></div></div></div> <div class="stat-card tasks svelte-plcxj0"><div class="stat-icon svelte-plcxj0">âœ“</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Total Tasks</div> <div class="stat-breakdown svelte-plcxj0"><span class="planned svelte-plcxj0"> </span> <span class="pending svelte-plcxj0"> </span> <span class="done svelte-plcxj0"> </span></div></div></div> <div class="stat-card materials svelte-plcxj0"><div class="stat-icon svelte-plcxj0">ðŸ“¦</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Materials</div></div></div> <div class="stat-card completion svelte-plcxj0"><div class="stat-icon svelte-plcxj0">ðŸ“ˆ</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Completion Rate</div></div></div></div></div> <div class="dashboard-section svelte-plcxj0"><h2 class="svelte-plcxj0">ðŸ“… Reports</h2> <div class="reports-grid svelte-plcxj0"><div class="report-card svelte-plcxj0"><h3 class="svelte-plcxj0">Today</h3> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Created:</span> <span class="report-value svelte-plcxj0"> </span></div> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Completed:</span> <span class="report-value svelte-plcxj0"> </span></div></div> <div class="report-card svelte-plcxj0"><h3 class="svelte-plcxj0">Last 7 Days</h3> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Created:</span> <span class="report-value svelte-plcxj0"> </span></div> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Completed:</span> <span class="report-value svelte-plcxj0"> </span></div></div> <div class="report-card svelte-plcxj0"><h3 class="svelte-plcxj0">Last 30 Days</h3> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Created:</span> <span class="report-value svelte-plcxj0"> </span></div> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Completed:</span> <span class="report-value svelte-plcxj0"> </span></div></div></div></div> <div class="dashboard-section svelte-plcxj0"><h2 class="svelte-plcxj0">ðŸ“ Recent Documents</h2> <div class="recent-documents svelte-plcxj0"><!> <!></div></div>',1),Ro=w('<div class="dashboard-container svelte-plcxj0"><!></div>');function No(t,e){Ze(e,!0);let a=Te({totalDocuments:0,totalTasks:0,totalMaterials:0,documentsInProgress:0,documentsDone:0,tasksPlanned:0,tasksPending:0,tasksDone:0}),r=Te({tasksCompleted:0,documentsCreated:0,documentsCompleted:0}),n=Te({tasksCompleted:0,documentsCreated:0,documentsCompleted:0}),l=Te({tasksCompleted:0,documentsCreated:0,documentsCompleted:0}),c=x(Te([])),u=x(!0);Lt(()=>{v()});async function v(){d(u,!0);try{const m=await Js("","","","registration_date","desc"),S=await Sa();a.totalDocuments=m.length,a.totalMaterials=S.length,a.documentsInProgress=m.filter(b=>b.status==="in_progress").length,a.documentsDone=m.filter(b=>b.status==="done").length;let q=[];m.forEach(b=>{b.tasks&&(q=q.concat(b.tasks))}),a.totalTasks=q.length,a.tasksPlanned=q.filter(b=>b.status==="planned").length,a.tasksPending=q.filter(b=>b.status==="pending").length,a.tasksDone=q.filter(b=>b.status==="done").length;const y=new Date;y.setHours(0,0,0,0),r.documentsCreated=m.filter(b=>{const E=new Date(b.registration_date);return E.setHours(0,0,0,0),E.getTime()===y.getTime()}).length,r.documentsCompleted=m.filter(b=>{if(!b.done_date)return!1;const E=new Date(b.done_date);return E.setHours(0,0,0,0),E.getTime()===y.getTime()}).length;const j=new Date;j.setDate(j.getDate()-7),j.setHours(0,0,0,0),n.documentsCreated=m.filter(b=>new Date(b.registration_date)>=j).length,n.documentsCompleted=m.filter(b=>b.done_date?new Date(b.done_date)>=j:!1).length;const z=new Date;z.setDate(z.getDate()-30),z.setHours(0,0,0,0),l.documentsCreated=m.filter(b=>new Date(b.registration_date)>=z).length,l.documentsCompleted=m.filter(b=>b.done_date?new Date(b.done_date)>=z:!1).length,d(c,m.slice(0,5),!0)}catch(m){console.error("Failed to load dashboard data",m)}finally{d(u,!1)}}var f=Ro(),p=o(f);{var _=m=>{var S=Ao();g(m,S)},h=m=>{var S=zo(),q=Ee(S),y=i(o(q),2),j=o(y),z=i(o(j),2),b=o(z),E=o(b),D=i(b,4),M=o(D),$=o(M),Y=i(M,2),R=o(Y),W=i(j,2),Z=i(o(W),2),F=o(Z),O=o(F),se=i(F,4),ae=o(se),ye=o(ae),ge=i(ae,2),ke=o(ge),be=i(ge,2),oe=o(be),je=i(W,2),qe=i(o(je),2),ne=o(qe),k=o(ne),N=i(je,2),K=i(o(N),2),Q=o(K),fe=o(Q),G=i(q,2),V=i(o(G),2),re=o(V),de=i(o(re),2),J=i(o(de),2),ee=o(J),he=i(de,2),_e=i(o(he),2),ce=o(_e),te=i(re,2),pe=i(o(te),2),ve=i(o(pe),2),we=o(ve),xe=i(pe,2),H=i(o(xe),2),le=o(H),A=i(te,2),P=i(o(A),2),ue=i(o(P),2),Pe=o(ue),L=i(P,2),C=i(o(L),2),ie=o(C),Re=i(G,2),Ie=i(o(Re),2),B=o(Ie);ze(B,17,()=>s(c),Ue,(me,De)=>{var Ae=Co(),$e=o(Ae),Be=o($e),Ge=o(Be),at=i(Be,2),ot=o(at),ut=i($e,2),Tt=o(ut);U(()=>{T(Ge,s(De).name),T(ot,s(De).registration_date),Le(ut,1,`doc-status ${s(De).status??""}`,"svelte-plcxj0"),T(Tt,s(De).status)}),g(me,Ae)});var X=i(B,2);{var Se=me=>{var De=Do();g(me,De)};I(X,me=>{s(c).length===0&&me(Se)})}U(me=>{T(E,a.totalDocuments),T($,`${a.documentsInProgress??""} in progress`),T(R,`${a.documentsDone??""} done`),T(O,a.totalTasks),T(ye,`${a.tasksPlanned??""} planned`),T(ke,`${a.tasksPending??""} pending`),T(oe,`${a.tasksDone??""} done`),T(k,a.totalMaterials),T(fe,`${me??""}%`),T(ee,r.documentsCreated),T(ce,r.documentsCompleted),T(we,n.documentsCreated),T(le,n.documentsCompleted),T(Pe,l.documentsCreated),T(ie,l.documentsCompleted)},[()=>a.totalDocuments>0?Math.round(a.documentsDone/a.totalDocuments*100):0]),g(m,S)};I(p,m=>{s(u)?m(_):m(h,!1)})}g(t,f),Ve()}var Mo=w('<div class="modal-backdrop svelte-5awcn0" role="button" tabindex="0"><div class="modal-content svelte-5awcn0" role="document" tabindex="0"><button class="close-btn svelte-5awcn0">&times;</button> <!></div></div>');function Rn(t,e){Ze(e,!0);let a=_t(e,"maxWidth",3,"500px");function r(u){u.key==="Escape"&&e.close()}var n=Ke(),l=Ee(n);{var c=u=>{var v=Mo();v.__click=function(...h){e.close?.apply(this,h)},v.__keydown=r;var f=o(v);f.__click=h=>h.stopPropagation(),f.__keydown=h=>h.stopPropagation();var p=o(f);p.__click=function(...h){e.close?.apply(this,h)};var _=i(p,2);ho(_,()=>e.children),U(()=>as(f,`max-width: ${a()??""}`)),g(u,v)};I(l,u=>{e.isOpen&&u(c)})}g(t,n),Ve()}tt(["click","keydown"]);function Nn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ya=Nn();function Nl(t){Ya=t}var ys={exec:()=>null};function Ye(t,e=""){let a=typeof t=="string"?t:t.source,r={replace:(n,l)=>{let c=typeof l=="string"?l:l.source;return c=c.replace(Ct.caret,"$1"),a=a.replace(n,c),r},getRegex:()=>new RegExp(a,e)};return r}var Oo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),Ct={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Io=/^(?:[ \t]*(?:\n|$))+/,Lo=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,$o=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ps=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Fo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Mn=/(?:[*+-]|\d{1,9}[.)])/,Ml=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ol=Ye(Ml).replace(/bull/g,Mn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Bo=Ye(Ml).replace(/bull/g,Mn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),On=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Uo=/^[^\n]+/,In=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Go=Ye(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",In).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ho=Ye(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Mn).getRegex(),Zs="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ln=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Yo=Ye("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ln).replace("tag",Zs).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Il=Ye(On).replace("hr",Ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zs).getRegex(),Wo=Ye(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Il).getRegex(),$n={blockquote:Wo,code:Lo,def:Go,fences:$o,heading:Fo,hr:Ps,html:Yo,lheading:Ol,list:Ho,newline:Io,paragraph:Il,table:ys,text:Uo},sr=Ye("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zs).getRegex(),Jo={...$n,lheading:Bo,table:sr,paragraph:Ye(On).replace("hr",Ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",sr).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zs).getRegex()},Xo={...$n,html:Ye(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ln).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ys,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ye(On).replace("hr",Ps).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ol).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Zo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Vo=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ll=/^( {2,}|\\)\n(?!\s*$)/,Qo=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Vs=/[\p{P}\p{S}]/u,Fn=/[\s\p{P}\p{S}]/u,$l=/[^\s\p{P}\p{S}]/u,Ko=Ye(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Fn).getRegex(),Fl=/(?!~)[\p{P}\p{S}]/u,ec=/(?!~)[\s\p{P}\p{S}]/u,tc=/(?:[^\s\p{P}\p{S}]|~)/u,ac=Ye(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",Oo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Bl=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,sc=Ye(Bl,"u").replace(/punct/g,Vs).getRegex(),nc=Ye(Bl,"u").replace(/punct/g,Fl).getRegex(),Ul="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",rc=Ye(Ul,"gu").replace(/notPunctSpace/g,$l).replace(/punctSpace/g,Fn).replace(/punct/g,Vs).getRegex(),lc=Ye(Ul,"gu").replace(/notPunctSpace/g,tc).replace(/punctSpace/g,ec).replace(/punct/g,Fl).getRegex(),ic=Ye("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,$l).replace(/punctSpace/g,Fn).replace(/punct/g,Vs).getRegex(),oc=Ye(/\\(punct)/,"gu").replace(/punct/g,Vs).getRegex(),cc=Ye(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),vc=Ye(Ln).replace("(?:-->|$)","-->").getRegex(),uc=Ye("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",vc).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),$s=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,dc=Ye(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",$s).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Gl=Ye(/^!?\[(label)\]\[(ref)\]/).replace("label",$s).replace("ref",In).getRegex(),Hl=Ye(/^!?\[(ref)\](?:\[\])?/).replace("ref",In).getRegex(),fc=Ye("reflink|nolink(?!\\()","g").replace("reflink",Gl).replace("nolink",Hl).getRegex(),nr=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,Bn={_backpedal:ys,anyPunctuation:oc,autolink:cc,blockSkip:ac,br:Ll,code:Vo,del:ys,emStrongLDelim:sc,emStrongRDelimAst:rc,emStrongRDelimUnd:ic,escape:Zo,link:dc,nolink:Hl,punctuation:Ko,reflink:Gl,reflinkSearch:fc,tag:uc,text:Qo,url:ys},pc={...Bn,link:Ye(/^!?\[(label)\]\((.*?)\)/).replace("label",$s).getRegex(),reflink:Ye(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",$s).getRegex()},pn={...Bn,emStrongRDelimAst:lc,emStrongLDelim:nc,url:Ye(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",nr).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ye(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",nr).getRegex()},hc={...pn,br:Ye(Ll).replace("{2,}","*").getRegex(),text:Ye(pn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Rs={normal:$n,gfm:Jo,pedantic:Xo},vs={normal:Bn,gfm:pn,breaks:hc,pedantic:pc},_c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rr=t=>_c[t];function pa(t,e){if(e){if(Ct.escapeTest.test(t))return t.replace(Ct.escapeReplace,rr)}else if(Ct.escapeTestNoEncode.test(t))return t.replace(Ct.escapeReplaceNoEncode,rr);return t}function lr(t){try{t=encodeURI(t).replace(Ct.percentDecode,"%")}catch{return null}return t}function ir(t,e){let a=t.replace(Ct.findPipe,(l,c,u)=>{let v=!1,f=c;for(;--f>=0&&u[f]==="\\";)v=!v;return v?"|":" |"}),r=a.split(Ct.splitPipe),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(Ct.slashPipe,"|");return r}function us(t,e,a){let r=t.length;if(r===0)return"";let n=0;for(;n<r&&t.charAt(r-n-1)===e;)n++;return t.slice(0,r-n)}function gc(t,e){if(t.indexOf(e[1])===-1)return-1;let a=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])a++;else if(t[r]===e[1]&&(a--,a<0))return r;return a>0?-2:-1}function or(t,e,a,r,n){let l=e.href,c=e.title||null,u=t[1].replace(n.other.outputLinkReplace,"$1");r.state.inLink=!0;let v={type:t[0].charAt(0)==="!"?"image":"link",raw:a,href:l,title:c,text:u,tokens:r.inlineTokens(u)};return r.state.inLink=!1,v}function mc(t,e,a){let r=t.match(a.other.indentCodeCompensation);if(r===null)return e;let n=r[1];return e.split(`
`).map(l=>{let c=l.match(a.other.beginningSpace);if(c===null)return l;let[u]=c;return u.length>=n.length?l.slice(n.length):l}).join(`
`)}var Fs=class{options;rules;lexer;constructor(t){this.options=t||Ya}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let a=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?a:us(a,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let a=e[0],r=mc(a,e[3]||"",this.rules);return{type:"code",raw:a,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let a=e[2].trim();if(this.rules.other.endingHash.test(a)){let r=us(a,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(a=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:us(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let a=us(e[0],`
`).split(`
`),r="",n="",l=[];for(;a.length>0;){let c=!1,u=[],v;for(v=0;v<a.length;v++)if(this.rules.other.blockquoteStart.test(a[v]))u.push(a[v]),c=!0;else if(!c)u.push(a[v]);else break;a=a.slice(v);let f=u.join(`
`),p=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${f}`:f,n=n?`${n}
${p}`:p;let _=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,l,!0),this.lexer.state.top=_,a.length===0)break;let h=l.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let m=h,S=m.raw+`
`+a.join(`
`),q=this.blockquote(S);l[l.length-1]=q,r=r.substring(0,r.length-m.raw.length)+q.raw,n=n.substring(0,n.length-m.text.length)+q.text;break}else if(h?.type==="list"){let m=h,S=m.raw+`
`+a.join(`
`),q=this.list(S);l[l.length-1]=q,r=r.substring(0,r.length-h.raw.length)+q.raw,n=n.substring(0,n.length-m.raw.length)+q.raw,a=S.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:l,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let a=e[1].trim(),r=a.length>1,n={type:"list",raw:"",ordered:r,start:r?+a.slice(0,-1):"",loose:!1,items:[]};a=r?`\\d{1,9}\\${a.slice(-1)}`:`\\${a}`,this.options.pedantic&&(a=r?a:"[*+-]");let l=this.rules.other.listItemRegex(a),c=!1;for(;t;){let v=!1,f="",p="";if(!(e=l.exec(t))||this.rules.block.hr.test(t))break;f=e[0],t=t.substring(f.length);let _=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,q=>" ".repeat(3*q.length)),h=t.split(`
`,1)[0],m=!_.trim(),S=0;if(this.options.pedantic?(S=2,p=_.trimStart()):m?S=e[1].length+1:(S=e[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,p=_.slice(S),S+=e[1].length),m&&this.rules.other.blankLine.test(h)&&(f+=h+`
`,t=t.substring(h.length+1),v=!0),!v){let q=this.rules.other.nextBulletRegex(S),y=this.rules.other.hrRegex(S),j=this.rules.other.fencesBeginRegex(S),z=this.rules.other.headingBeginRegex(S),b=this.rules.other.htmlBeginRegex(S);for(;t;){let E=t.split(`
`,1)[0],D;if(h=E,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),D=h):D=h.replace(this.rules.other.tabCharGlobal,"    "),j.test(h)||z.test(h)||b.test(h)||q.test(h)||y.test(h))break;if(D.search(this.rules.other.nonSpaceChar)>=S||!h.trim())p+=`
`+D.slice(S);else{if(m||_.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||j.test(_)||z.test(_)||y.test(_))break;p+=`
`+h}!m&&!h.trim()&&(m=!0),f+=E+`
`,t=t.substring(E.length+1),_=D.slice(S)}}n.loose||(c?n.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(c=!0)),n.items.push({type:"list_item",raw:f,task:!!this.options.gfm&&this.rules.other.listIsTask.test(p),loose:!1,text:p,tokens:[]}),n.raw+=f}let u=n.items.at(-1);if(u)u.raw=u.raw.trimEnd(),u.text=u.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let v of n.items){if(this.lexer.state.top=!1,v.tokens=this.lexer.blockTokens(v.text,[]),v.task){if(v.text=v.text.replace(this.rules.other.listReplaceTask,""),v.tokens[0]?.type==="text"||v.tokens[0]?.type==="paragraph"){v.tokens[0].raw=v.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),v.tokens[0].text=v.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let p=this.lexer.inlineQueue.length-1;p>=0;p--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[p].src)){this.lexer.inlineQueue[p].src=this.lexer.inlineQueue[p].src.replace(this.rules.other.listReplaceTask,"");break}}let f=this.rules.other.listTaskCheckbox.exec(v.raw);if(f){let p={type:"checkbox",raw:f[0]+" ",checked:f[0]!=="[ ]"};v.checked=p.checked,n.loose?v.tokens[0]&&["paragraph","text"].includes(v.tokens[0].type)&&"tokens"in v.tokens[0]&&v.tokens[0].tokens?(v.tokens[0].raw=p.raw+v.tokens[0].raw,v.tokens[0].text=p.raw+v.tokens[0].text,v.tokens[0].tokens.unshift(p)):v.tokens.unshift({type:"paragraph",raw:p.raw,text:p.raw,tokens:[p]}):v.tokens.unshift(p)}}if(!n.loose){let f=v.tokens.filter(_=>_.type==="space"),p=f.length>0&&f.some(_=>this.rules.other.anyLine.test(_.raw));n.loose=p}}if(n.loose)for(let v of n.items){v.loose=!0;for(let f of v.tokens)f.type==="text"&&(f.type="paragraph")}return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let a=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:a,raw:e[0],href:r,title:n}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let a=ir(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(a.length===r.length){for(let c of r)this.rules.other.tableAlignRight.test(c)?l.align.push("right"):this.rules.other.tableAlignCenter.test(c)?l.align.push("center"):this.rules.other.tableAlignLeft.test(c)?l.align.push("left"):l.align.push(null);for(let c=0;c<a.length;c++)l.header.push({text:a[c],tokens:this.lexer.inline(a[c]),header:!0,align:l.align[c]});for(let c of n)l.rows.push(ir(c,l.header.length).map((u,v)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:l.align[v]})));return l}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let a=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:a,tokens:this.lexer.inline(a)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let a=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;let l=us(a.slice(0,-1),"\\");if((a.length-l.length)%2===0)return}else{let l=gc(e[2],"()");if(l===-2)return;if(l>-1){let c=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,c).trim(),e[3]=""}}let r=e[2],n="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(r);l&&(r=l[1],n=l[3])}else n=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?r=r.slice(1):r=r.slice(1,-1)),or(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let a;if((a=this.rules.inline.reflink.exec(t))||(a=this.rules.inline.nolink.exec(t))){let r=(a[2]||a[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=e[r.toLowerCase()];if(!n){let l=a[0].charAt(0);return{type:"text",raw:l,text:l}}return or(a,n,a[0],this.lexer,this.rules)}}emStrong(t,e,a=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&a.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!a||this.rules.inline.punctuation.exec(a))){let n=[...r[0]].length-1,l,c,u=n,v=0,f=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,e=e.slice(-1*t.length+n);(r=f.exec(e))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(c=[...l].length,r[3]||r[4]){u+=c;continue}else if((r[5]||r[6])&&n%3&&!((n+c)%3)){v+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+v);let p=[...r[0]][0].length,_=t.slice(0,n+r.index+p+c);if(Math.min(n,c)%2){let m=_.slice(1,-1);return{type:"em",raw:_,text:m,tokens:this.lexer.inlineTokens(m)}}let h=_.slice(2,-2);return{type:"strong",raw:_,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let a=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(a),n=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return r&&n&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:e[0],text:a}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let a,r;return e[2]==="@"?(a=e[1],r="mailto:"+a):(a=e[1],r=a),{type:"link",raw:e[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let a,r;if(e[2]==="@")a=e[0],r="mailto:"+a;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);a=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let a=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:a}}}},na=class hn{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ya,this.options.tokenizer=this.options.tokenizer||new Fs,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={other:Ct,block:Rs.normal,inline:vs.normal};this.options.pedantic?(a.block=Rs.pedantic,a.inline=vs.pedantic):this.options.gfm&&(a.block=Rs.gfm,this.options.breaks?a.inline=vs.breaks:a.inline=vs.gfm),this.tokenizer.rules=a}static get rules(){return{block:Rs,inline:vs}}static lex(e,a){return new hn(a).lex(e)}static lexInline(e,a){return new hn(a).inlineTokens(e)}lex(e){e=e.replace(Ct.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let a=0;a<this.inlineQueue.length;a++){let r=this.inlineQueue[a];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,a=[],r=!1){for(this.options.pedantic&&(e=e.replace(Ct.tabCharGlobal,"    ").replace(Ct.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(c=>(n=c.call({lexer:this},e,a))?(e=e.substring(n.raw.length),a.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let c=a.at(-1);n.raw.length===1&&c!==void 0?c.raw+=`
`:a.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let c=a.at(-1);c?.type==="paragraph"||c?.type==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+n.raw,c.text+=`
`+n.text,this.inlineQueue.at(-1).src=c.text):a.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let c=a.at(-1);c?.type==="paragraph"||c?.type==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+n.raw,c.text+=`
`+n.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},a.push(n));continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),a.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),a.push(n);continue}let l=e;if(this.options.extensions?.startBlock){let c=1/0,u=e.slice(1),v;this.options.extensions.startBlock.forEach(f=>{v=f.call({lexer:this},u),typeof v=="number"&&v>=0&&(c=Math.min(c,v))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(n=this.tokenizer.paragraph(l))){let c=a.at(-1);r&&c?.type==="paragraph"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+n.raw,c.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):a.push(n),r=l.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let c=a.at(-1);c?.type==="text"?(c.raw+=(c.raw.endsWith(`
`)?"":`
`)+n.raw,c.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):a.push(n);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,a}inline(e,a=[]){return this.inlineQueue.push({src:e,tokens:a}),a}inlineTokens(e,a=[]){let r=e,n=null;if(this.tokens.links){let v=Object.keys(this.tokens.links);if(v.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)v.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(n=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)l=n[2]?n[2].length:0,r=r.slice(0,n.index+l)+"["+"a".repeat(n[0].length-l-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let c=!1,u="";for(;e;){c||(u=""),c=!1;let v;if(this.options.extensions?.inline?.some(p=>(v=p.call({lexer:this},e,a))?(e=e.substring(v.raw.length),a.push(v),!0):!1))continue;if(v=this.tokenizer.escape(e)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.tag(e)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.link(e)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(v.raw.length);let p=a.at(-1);v.type==="text"&&p?.type==="text"?(p.raw+=v.raw,p.text+=v.text):a.push(v);continue}if(v=this.tokenizer.emStrong(e,r,u)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.codespan(e)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.br(e)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.del(e)){e=e.substring(v.raw.length),a.push(v);continue}if(v=this.tokenizer.autolink(e)){e=e.substring(v.raw.length),a.push(v);continue}if(!this.state.inLink&&(v=this.tokenizer.url(e))){e=e.substring(v.raw.length),a.push(v);continue}let f=e;if(this.options.extensions?.startInline){let p=1/0,_=e.slice(1),h;this.options.extensions.startInline.forEach(m=>{h=m.call({lexer:this},_),typeof h=="number"&&h>=0&&(p=Math.min(p,h))}),p<1/0&&p>=0&&(f=e.substring(0,p+1))}if(v=this.tokenizer.inlineText(f)){e=e.substring(v.raw.length),v.raw.slice(-1)!=="_"&&(u=v.raw.slice(-1)),c=!0;let p=a.at(-1);p?.type==="text"?(p.raw+=v.raw,p.text+=v.text):a.push(v);continue}if(e){let p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return a}},Bs=class{options;parser;constructor(t){this.options=t||Ya}space(t){return""}code({text:t,lang:e,escaped:a}){let r=(e||"").match(Ct.notSpaceStart)?.[0],n=t.replace(Ct.endingNewline,"")+`
`;return r?'<pre><code class="language-'+pa(r)+'">'+(a?n:pa(n,!0))+`</code></pre>
`:"<pre><code>"+(a?n:pa(n,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,a=t.start,r="";for(let c=0;c<t.items.length;c++){let u=t.items[c];r+=this.listitem(u)}let n=e?"ol":"ul",l=e&&a!==1?' start="'+a+'"':"";return"<"+n+l+`>
`+r+"</"+n+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",a="";for(let n=0;n<t.header.length;n++)a+=this.tablecell(t.header[n]);e+=this.tablerow({text:a});let r="";for(let n=0;n<t.rows.length;n++){let l=t.rows[n];a="";for(let c=0;c<l.length;c++)a+=this.tablecell(l[c]);r+=this.tablerow({text:a})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),a=t.header?"th":"td";return(t.align?`<${a} align="${t.align}">`:`<${a}>`)+e+`</${a}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${pa(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:a}){let r=this.parser.parseInline(a),n=lr(t);if(n===null)return r;t=n;let l='<a href="'+t+'"';return e&&(l+=' title="'+pa(e)+'"'),l+=">"+r+"</a>",l}image({href:t,title:e,text:a,tokens:r}){r&&(a=this.parser.parseInline(r,this.parser.textRenderer));let n=lr(t);if(n===null)return pa(a);t=n;let l=`<img src="${t}" alt="${a}"`;return e&&(l+=` title="${pa(e)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:pa(t.text)}},Un=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},ra=class _n{options;renderer;textRenderer;constructor(e){this.options=e||Ya,this.options.renderer=this.options.renderer||new Bs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Un}static parse(e,a){return new _n(a).parse(e)}static parseInline(e,a){return new _n(a).parseInline(e)}parse(e){let a="";for(let r=0;r<e.length;r++){let n=e[r];if(this.options.extensions?.renderers?.[n.type]){let c=n,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(c.type)){a+=u||"";continue}}let l=n;switch(l.type){case"space":{a+=this.renderer.space(l);break}case"hr":{a+=this.renderer.hr(l);break}case"heading":{a+=this.renderer.heading(l);break}case"code":{a+=this.renderer.code(l);break}case"table":{a+=this.renderer.table(l);break}case"blockquote":{a+=this.renderer.blockquote(l);break}case"list":{a+=this.renderer.list(l);break}case"checkbox":{a+=this.renderer.checkbox(l);break}case"html":{a+=this.renderer.html(l);break}case"def":{a+=this.renderer.def(l);break}case"paragraph":{a+=this.renderer.paragraph(l);break}case"text":{a+=this.renderer.text(l);break}default:{let c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return a}parseInline(e,a=this.renderer){let r="";for(let n=0;n<e.length;n++){let l=e[n];if(this.options.extensions?.renderers?.[l.type]){let u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){r+=u||"";continue}}let c=l;switch(c.type){case"escape":{r+=a.text(c);break}case"html":{r+=a.html(c);break}case"link":{r+=a.link(c);break}case"image":{r+=a.image(c);break}case"checkbox":{r+=a.checkbox(c);break}case"strong":{r+=a.strong(c);break}case"em":{r+=a.em(c);break}case"codespan":{r+=a.codespan(c);break}case"br":{r+=a.br(c);break}case"del":{r+=a.del(c);break}case"text":{r+=a.text(c);break}default:{let u='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}},hs=class{options;block;constructor(t){this.options=t||Ya}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?na.lex:na.lexInline}provideParser(){return this.block?ra.parse:ra.parseInline}},bc=class{defaults=Nn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ra;Renderer=Bs;TextRenderer=Un;Lexer=na;Tokenizer=Fs;Hooks=hs;constructor(...t){this.use(...t)}walkTokens(t,e){let a=[];for(let r of t)switch(a=a.concat(e.call(this,r)),r.type){case"table":{let n=r;for(let l of n.header)a=a.concat(this.walkTokens(l.tokens,e));for(let l of n.rows)for(let c of l)a=a.concat(this.walkTokens(c.tokens,e));break}case"list":{let n=r;a=a.concat(this.walkTokens(n.items,e));break}default:{let n=r;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(l=>{let c=n[l].flat(1/0);a=a.concat(this.walkTokens(c,e))}):n.tokens&&(a=a.concat(this.walkTokens(n.tokens,e)))}}return a}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(a=>{let r={...a};if(r.async=this.defaults.async||r.async||!1,a.extensions&&(a.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let l=e.renderers[n.name];l?e.renderers[n.name]=function(...c){let u=n.renderer.apply(this,c);return u===!1&&(u=l.apply(this,c)),u}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[n.level];l?l.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),r.extensions=e),a.renderer){let n=this.defaults.renderer||new Bs(this.defaults);for(let l in a.renderer){if(!(l in n))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let c=l,u=a.renderer[c],v=n[c];n[c]=(...f)=>{let p=u.apply(n,f);return p===!1&&(p=v.apply(n,f)),p||""}}r.renderer=n}if(a.tokenizer){let n=this.defaults.tokenizer||new Fs(this.defaults);for(let l in a.tokenizer){if(!(l in n))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let c=l,u=a.tokenizer[c],v=n[c];n[c]=(...f)=>{let p=u.apply(n,f);return p===!1&&(p=v.apply(n,f)),p}}r.tokenizer=n}if(a.hooks){let n=this.defaults.hooks||new hs;for(let l in a.hooks){if(!(l in n))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let c=l,u=a.hooks[c],v=n[c];hs.passThroughHooks.has(l)?n[c]=f=>{if(this.defaults.async&&hs.passThroughHooksRespectAsync.has(l))return(async()=>{let _=await u.call(n,f);return v.call(n,_)})();let p=u.call(n,f);return v.call(n,p)}:n[c]=(...f)=>{if(this.defaults.async)return(async()=>{let _=await u.apply(n,f);return _===!1&&(_=await v.apply(n,f)),_})();let p=u.apply(n,f);return p===!1&&(p=v.apply(n,f)),p}}r.hooks=n}if(a.walkTokens){let n=this.defaults.walkTokens,l=a.walkTokens;r.walkTokens=function(c){let u=[];return u.push(l.call(this,c)),n&&(u=u.concat(n.call(this,c))),u}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return na.lex(t,e??this.defaults)}parser(t,e){return ra.parse(t,e??this.defaults)}parseMarkdown(t){return(e,a)=>{let r={...a},n={...this.defaults,...r},l=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&r.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(n.hooks&&(n.hooks.options=n,n.hooks.block=t),n.async)return(async()=>{let c=n.hooks?await n.hooks.preprocess(e):e,u=await(n.hooks?await n.hooks.provideLexer():t?na.lex:na.lexInline)(c,n),v=n.hooks?await n.hooks.processAllTokens(u):u;n.walkTokens&&await Promise.all(this.walkTokens(v,n.walkTokens));let f=await(n.hooks?await n.hooks.provideParser():t?ra.parse:ra.parseInline)(v,n);return n.hooks?await n.hooks.postprocess(f):f})().catch(l);try{n.hooks&&(e=n.hooks.preprocess(e));let c=(n.hooks?n.hooks.provideLexer():t?na.lex:na.lexInline)(e,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let u=(n.hooks?n.hooks.provideParser():t?ra.parse:ra.parseInline)(c,n);return n.hooks&&(u=n.hooks.postprocess(u)),u}catch(c){return l(c)}}}onError(t,e){return a=>{if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+pa(a.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(a);throw a}}},Ga=new bc;function Xe(t,e){return Ga.parse(t,e)}Xe.options=Xe.setOptions=function(t){return Ga.setOptions(t),Xe.defaults=Ga.defaults,Nl(Xe.defaults),Xe};Xe.getDefaults=Nn;Xe.defaults=Ya;Xe.use=function(...t){return Ga.use(...t),Xe.defaults=Ga.defaults,Nl(Xe.defaults),Xe};Xe.walkTokens=function(t,e){return Ga.walkTokens(t,e)};Xe.parseInline=Ga.parseInline;Xe.Parser=ra;Xe.parser=ra.parse;Xe.Renderer=Bs;Xe.TextRenderer=Un;Xe.Lexer=na;Xe.lexer=na.lex;Xe.Tokenizer=Fs;Xe.Hooks=hs;Xe.parse=Xe;Xe.options;Xe.setOptions;Xe.use;Xe.walkTokens;Xe.parseInline;ra.parse;na.lex;var yc=w('<span class="author"> </span>'),wc=w('<span class="date"> </span>'),kc=w('<span class="tag-badge svelte-187zyvb"> </span>'),xc=w('<div class="tags-row svelte-187zyvb"></div>'),Sc=w('<img class="svelte-187zyvb"/>'),Tc=w('<div class="attachment-card svelte-187zyvb"><!> <a target="_blank" rel="noreferrer" class="svelte-187zyvb"> </a></div>'),qc=w('<div class="attachments svelte-187zyvb"><h3 class="svelte-187zyvb">Attachments</h3> <div class="grid svelte-187zyvb"></div></div>'),Ec=w('<a target="_blank" rel="noreferrer" class="note-attachment-link svelte-187zyvb"> </a>'),jc=w('<div class="note-attachments svelte-187zyvb"><strong class="svelte-187zyvb">Attachments:</strong> <!></div>'),Pc=w('<div class="note-card svelte-187zyvb"><div class="note-header svelte-187zyvb"><span> </span> <span class="note-author svelte-187zyvb"> </span> <span class="note-date svelte-187zyvb"> </span> <span> </span></div> <p class="note-text svelte-187zyvb"> </p> <!></div>'),Ac=w('<div class="notes-section svelte-187zyvb"><h3 class="svelte-187zyvb">Notes</h3> <div class="notes-list svelte-187zyvb"></div></div>'),Cc=w('<div class="document-view"><h2 class="svelte-187zyvb"> </h2> <div class="meta svelte-187zyvb"><span> </span> <span> </span> <span class="date"> </span> <!> <!></div> <!> <div class="content markdown-body svelte-187zyvb"><!></div> <!> <!></div>');function Dc(t,e){Ze(e,!0);let a=rt(()=>e.document&&e.document.content?Xe.parse(e.document.content):"<p>No content available.</p>");var r=Cc(),n=o(r),l=o(n),c=i(n,2),u=o(c),v=o(u),f=i(u,2),p=o(f),_=i(f,2),h=o(_),m=i(_,2);{var S=R=>{var W=yc(),Z=o(W);U(()=>T(Z,`By ${e.document.author??""}`)),g(R,W)};I(m,R=>{e.document?.author&&R(S)})}var q=i(m,2);{var y=R=>{var W=wc(),Z=o(W);U(()=>T(Z,`Done: ${e.document.done_date??""}`)),g(R,W)};I(q,R=>{e.document?.done_date&&R(y)})}var j=i(c,2);{var z=R=>{var W=xc();ze(W,21,()=>e.document.tags,Ue,(Z,F)=>{var O=kc(),se=o(O);U(()=>T(se,`#${s(F).name??""}`)),g(Z,O)}),g(R,W)};I(j,R=>{e.document?.tags?.length>0&&R(z)})}var b=i(j,2),E=o(b);po(E,()=>s(a));var D=i(b,2);{var M=R=>{var W=qc(),Z=i(o(W),2);ze(Z,21,()=>e.document.attachments,Ue,(F,O)=>{var se=Tc(),ae=o(se);{var ye=be=>{var oe=Sc();U(()=>{He(oe,"src",s(O).file_path),He(oe,"alt",s(O).filename)}),g(be,oe)};I(ae,be=>{s(O).media_type&&s(O).media_type.startsWith("image/")&&be(ye)})}var ge=i(ae,2),ke=o(ge);U(()=>{He(ge,"href",s(O).file_path),T(ke,s(O).filename)}),g(F,se)}),g(R,W)};I(D,R=>{e.document?.attachments?.length>0&&R(M)})}var $=i(D,2);{var Y=R=>{var W=Ac(),Z=i(o(W),2);ze(Z,21,()=>e.document.journal_entries,Ue,(F,O)=>{var se=Pc(),ae=o(se),ye=o(ae),ge=o(ye),ke=i(ye,2),be=o(ke),oe=i(ke,2),je=o(oe),qe=i(oe,2),ne=o(qe),k=i(ae,2),N=o(k),K=i(k,2);{var Q=fe=>{var G=jc(),V=i(o(G),2);ze(V,17,()=>s(O).attachments,Ue,(re,de)=>{var J=Ec(),ee=o(J);U(()=>{He(J,"href",s(de).file_path),T(ee,`ðŸ“Ž ${s(de).filename??""}`)}),g(re,J)}),g(fe,G)};I(K,fe=>{s(O).attachments?.length>0&&fe(Q)})}U(()=>{Le(ye,1,`note-badge ${s(O).type??""}`,"svelte-187zyvb"),T(ge,s(O).type),T(be,s(O).author||"Unknown"),T(je,s(O).created_at),Le(qe,1,`note-status ${s(O).status??""}`,"svelte-187zyvb"),T(ne,s(O).status),T(N,s(O).text)}),g(F,se)}),g(R,W)};I($,R=>{e.document?.journal_entries?.length>0&&R(Y)})}U(R=>{T(l,e.document?.name),Le(u,1,`badge ${e.document?.type??""}`,"svelte-187zyvb"),T(v,e.document?.type),Le(f,1,`badge status-${e.document?.status??""}`,"svelte-187zyvb"),T(p,R),T(h,e.document?.registration_date)},[()=>e.document?.status.replace("_"," ")]),g(t,r),Ve()}var zc=w('<input type="text" class="edit-input svelte-1b0y5ne"/>'),Rc=w('<button class="btn-icon svelte-1b0y5ne" title="Save">âœ“</button> <button class="btn-icon svelte-1b0y5ne" title="Cancel">âœ•</button>',1),Nc=w('<button class="btn-icon svelte-1b0y5ne" title="Edit">âœï¸</button> <button class="btn-icon delete svelte-1b0y5ne" title="Delete">ðŸ—‘ï¸</button>',1),Mc=w('<tr class="svelte-1b0y5ne"><td class="svelte-1b0y5ne"><!></td><td class="svelte-1b0y5ne"><!></td></tr>'),Oc=w('<div class="empty-state svelte-1b0y5ne">No materials yet. Add one above.</div>'),Ic=w('<div class="modal-overlay svelte-1b0y5ne"><div class="modal-content svelte-1b0y5ne"><div class="modal-header svelte-1b0y5ne"><h3 class="svelte-1b0y5ne">Material Library</h3> <button class="close-btn svelte-1b0y5ne">&times;</button></div> <div class="modal-body svelte-1b0y5ne"><div class="add-section svelte-1b0y5ne"><input type="text" placeholder="New material name..." class="svelte-1b0y5ne"/> <button class="btn-add svelte-1b0y5ne">Add</button></div> <table class="materials-table svelte-1b0y5ne"><thead><tr><th class="svelte-1b0y5ne">Name</th><th class="svelte-1b0y5ne">Actions</th></tr></thead><tbody></tbody></table> <!></div></div></div>');function Lc(t,e){Ze(e,!0);let a=x(Te([])),r=x(""),n=x(null),l=x("");async function c(){e.isOpen&&d(a,await Sa(),!0)}zt(()=>{c()});async function u(){if(s(r).trim())try{await yl({name:s(r).trim()}),d(r,""),await c()}catch(q){console.error(q),alert("Failed to add material")}}function v(q){d(n,q.id,!0),d(l,q.name,!0)}async function f(){if(!(!s(l).trim()||s(n)===null))try{await kl(s(n),s(l).trim()),d(n,null),d(l,""),await c()}catch(q){console.error(q),alert("Failed to update material")}}function p(){d(n,null),d(l,"")}async function _(q){if(confirm("Delete this material?"))try{await xl(q),await c()}catch(y){console.error(y),alert("Failed to delete material")}}var h=Ke(),m=Ee(h);{var S=q=>{var y=Ic();y.__click=function(...F){e.close?.apply(this,F)};var j=o(y);j.__click=F=>F.stopPropagation();var z=o(j),b=i(o(z),2);b.__click=function(...F){e.close?.apply(this,F)};var E=i(z,2),D=o(E),M=o(D);M.__keydown=F=>F.key==="Enter"&&u();var $=i(M,2);$.__click=u;var Y=i(D,2),R=i(o(Y));ze(R,21,()=>s(a),F=>F.id,(F,O)=>{var se=Mc(),ae=o(se),ye=o(ae);{var ge=ne=>{var k=zc();Tn(k),k.__keydown=N=>{N.key==="Enter"&&f(),N.key==="Escape"&&p()},Ce(k,()=>s(l),N=>d(l,N)),g(ne,k)},ke=ne=>{var k=sl();U(()=>T(k,s(O).name)),g(ne,k)};I(ye,ne=>{s(n)===s(O).id?ne(ge):ne(ke,!1)})}var be=i(ae),oe=o(be);{var je=ne=>{var k=Rc(),N=Ee(k);N.__click=f;var K=i(N,2);K.__click=p,g(ne,k)},qe=ne=>{var k=Nc(),N=Ee(k);N.__click=()=>v(s(O));var K=i(N,2);K.__click=()=>_(s(O).id),g(ne,k)};I(oe,ne=>{s(n)===s(O).id?ne(je):ne(qe,!1)})}g(F,se)});var W=i(Y,2);{var Z=F=>{var O=Oc();g(F,O)};I(W,F=>{s(a).length===0&&F(Z)})}Ce(M,()=>s(r),F=>d(r,F)),g(q,y)};I(m,q=>{e.isOpen&&q(S)})}g(t,h),Ve()}tt(["click","keydown"]);var $c=w('<input type="text" class="edit-input svelte-1w6q42o"/>'),Fc=w('<button class="btn-icon svelte-1w6q42o" title="Save">âœ“</button> <button class="btn-icon svelte-1w6q42o" title="Cancel">âœ•</button>',1),Bc=w('<button class="btn-icon svelte-1w6q42o" title="Edit">âœï¸</button> <button class="btn-icon delete svelte-1w6q42o" title="Delete">ðŸ—‘ï¸</button>',1),Uc=w('<tr class="svelte-1w6q42o"><td class="svelte-1w6q42o"><!></td><td class="svelte-1w6q42o"><!></td></tr>'),Gc=w('<div class="empty-state svelte-1w6q42o">No assignees yet. Add one above.</div>'),Hc=w('<div class="modal-overlay svelte-1w6q42o"><div class="modal-content svelte-1w6q42o"><div class="modal-header svelte-1w6q42o"><h3 class="svelte-1w6q42o">Assignee Library</h3> <button class="close-btn svelte-1w6q42o">&times;</button></div> <div class="modal-body svelte-1w6q42o"><div class="add-section svelte-1w6q42o"><input type="text" placeholder="New assignee name..." class="svelte-1w6q42o"/> <button class="btn-add svelte-1w6q42o">Add</button></div> <table class="assignees-table svelte-1w6q42o"><thead><tr><th class="svelte-1w6q42o">Name</th><th class="svelte-1w6q42o">Actions</th></tr></thead><tbody></tbody></table> <!></div></div></div>');function Yl(t,e){Ze(e,!0);let a=x(Te([])),r=x(""),n=x(null),l=x("");async function c(){e.isOpen&&d(a,await ss(),!0)}zt(()=>{c()});async function u(){if(s(r).trim())try{await Dl({name:s(r).trim()}),d(r,""),await c()}catch(q){console.error(q),alert("Failed to add assignee")}}function v(q){d(n,q.id,!0),d(l,q.name,!0)}async function f(){if(!(!s(l).trim()||s(n)===null))try{await zl(s(n),s(l).trim()),d(n,null),d(l,""),await c()}catch(q){console.error(q),alert("Failed to update assignee")}}function p(){d(n,null),d(l,"")}async function _(q){if(confirm("Delete this assignee?"))try{await Rl(q),await c()}catch(y){console.error(y),alert("Failed to delete assignee")}}var h=Ke(),m=Ee(h);{var S=q=>{var y=Hc();y.__click=function(...F){e.close?.apply(this,F)};var j=o(y);j.__click=F=>F.stopPropagation();var z=o(j),b=i(o(z),2);b.__click=function(...F){e.close?.apply(this,F)};var E=i(z,2),D=o(E),M=o(D);M.__keydown=F=>F.key==="Enter"&&u();var $=i(M,2);$.__click=u;var Y=i(D,2),R=i(o(Y));ze(R,21,()=>s(a),F=>F.id,(F,O)=>{var se=Uc(),ae=o(se),ye=o(ae);{var ge=ne=>{var k=$c();Tn(k),k.__keydown=N=>{N.key==="Enter"&&f(),N.key==="Escape"&&p()},Ce(k,()=>s(l),N=>d(l,N)),g(ne,k)},ke=ne=>{var k=sl();U(()=>T(k,s(O).name)),g(ne,k)};I(ye,ne=>{s(n)===s(O).id?ne(ge):ne(ke,!1)})}var be=i(ae),oe=o(be);{var je=ne=>{var k=Fc(),N=Ee(k);N.__click=f;var K=i(N,2);K.__click=p,g(ne,k)},qe=ne=>{var k=Bc(),N=Ee(k);N.__click=()=>v(s(O));var K=i(N,2);K.__click=()=>_(s(O).id),g(ne,k)};I(oe,ne=>{s(n)===s(O).id?ne(je):ne(qe,!1)})}g(F,se)});var W=i(Y,2);{var Z=F=>{var O=Gc();g(F,O)};I(W,F=>{s(a).length===0&&F(Z)})}Ce(M,()=>s(r),F=>d(r,F)),g(q,y)};I(m,q=>{e.isOpen&&q(S)})}g(t,h),Ve()}tt(["click","keydown"]);var Yc=w("<option> </option>"),Wc=w('<div class="part-item svelte-1iwbfq1"><span class="part-name svelte-1iwbfq1"> </span> <span class="part-qty svelte-1iwbfq1"> </span></div>'),Jc=w('<div class="form-group svelte-1iwbfq1"><label class="svelte-1iwbfq1">Associated Parts</label> <div class="parts-list svelte-1iwbfq1"></div></div>'),Xc=w("<option> </option>"),Zc=w('<div class="modal-overlay svelte-1iwbfq1"><div class="modal-content svelte-1iwbfq1"><div class="modal-header svelte-1iwbfq1"><h3 class="svelte-1iwbfq1"> </h3> <button class="close-btn svelte-1iwbfq1">&times;</button></div> <form class="modal-body svelte-1iwbfq1"><div class="form-group svelte-1iwbfq1"><label for="name" class="svelte-1iwbfq1">Task Name</label> <input id="name" type="text" placeholder="Enter task name..." required class="svelte-1iwbfq1"/></div> <div class="form-group svelte-1iwbfq1"><label for="material" class="svelte-1iwbfq1">Material</label> <div class="material-row svelte-1iwbfq1"><select id="material" class="material-select svelte-1iwbfq1"><option>-- No Material --</option><!></select> <button type="button" class="btn-library svelte-1iwbfq1" title="Edit Material Library">ðŸ“š</button></div></div> <div class="form-group svelte-1iwbfq1"><label for="gnc_path" class="svelte-1iwbfq1">GNC File Path</label> <input id="gnc_path" type="text" placeholder="e.g. Z:\\Sidra\\Part1.gnc" class="svelte-1iwbfq1"/></div> <!> <div class="form-group svelte-1iwbfq1"><label for="assignee" class="svelte-1iwbfq1">Assignee</label> <div class="material-row svelte-1iwbfq1"><select id="assignee" class="material-select svelte-1iwbfq1"><option>-- No Assignee --</option><!></select> <button type="button" class="btn-library svelte-1iwbfq1" title="Edit Assignee Library">ðŸ‘¥</button></div></div> <div class="actions svelte-1iwbfq1"><button type="button" class="btn-secondary svelte-1iwbfq1">Cancel</button> <button type="submit" class="btn-primary svelte-1iwbfq1"> </button></div></form></div></div>'),Vc=w("<!> <!> <!>",1);function Qc(t,e){Ze(e,!0);let a=_t(e,"task",3,null),r=x(""),n=x(""),l=x(null),c=x(""),u=x(!1),v=x(Te([])),f=x(Te([])),p=x(!1),_=x(!1);async function h(){d(v,await Sa(),!0)}async function m(){d(f,await ss(),!0)}zt(()=>{e.isOpen&&(console.log("TaskModal Opened. Task:",a()),a()?(d(r,a().name,!0),d(n,a().assignee||"",!0),d(l,a().material_id||(a().material?a().material.id:null),!0),d(c,a().gnc_file_path||"",!0)):(d(n,localStorage.getItem("task_assignee")||"",!0),d(r,""),d(l,null),d(c,"")),h(),m())});async function S(Y){if(Y.preventDefault(),!!s(r)){d(u,!0);try{s(n)&&!a()&&localStorage.setItem("task_assignee",s(n)),await e.onSubmit({id:a()?a().id:void 0,name:s(r),assignee:s(n),material_id:s(l),gnc_file_path:s(c)}),e.close()}catch(R){console.error(R),alert("Failed to add task")}finally{d(u,!1)}}}function q(){d(p,!0)}function y(){d(p,!1),h()}function j(){d(_,!0)}function z(){d(_,!1),m()}var b=Vc(),E=Ee(b);{var D=Y=>{var R=Zc();R.__click=function(...te){e.close?.apply(this,te)};var W=o(R);W.__click=te=>te.stopPropagation();var Z=o(W),F=o(Z),O=o(F),se=i(F,2);se.__click=function(...te){e.close?.apply(this,te)};var ae=i(Z,2),ye=o(ae),ge=i(o(ye),2);Tn(ge);var ke=i(ye,2),be=i(o(ke),2),oe=o(be),je=o(oe);je.value=(je.__value=null)??"";var qe=i(je);ze(qe,17,()=>s(v),Ue,(te,pe)=>{var ve=Yc(),we=o(ve),xe={};U(()=>{T(we,s(pe).name),xe!==(xe=s(pe).id)&&(ve.value=(ve.__value=s(pe).id)??"")}),g(te,ve)});var ne=i(oe,2);ne.__click=q;var k=i(ke,2),N=i(o(k),2),K=i(k,2);{var Q=te=>{var pe=Jc(),ve=i(o(pe),2);ze(ve,21,()=>a().part_associations,Ue,(we,xe)=>{var H=Wc(),le=o(H),A=o(le),P=i(le,2),ue=o(P);U(()=>{He(le,"title",s(xe).part.name),T(A,s(xe).part.name),T(ue,`x${s(xe).quantity??""}`)}),g(we,H)}),g(te,pe)};I(K,te=>{a()&&a().part_associations&&a().part_associations.length>0&&te(Q)})}var fe=i(K,2),G=i(o(fe),2),V=o(G),re=o(V);re.value=re.__value="";var de=i(re);ze(de,17,()=>s(f),Ue,(te,pe)=>{var ve=Xc(),we=o(ve),xe={};U(()=>{T(we,s(pe).name),xe!==(xe=s(pe).name)&&(ve.value=(ve.__value=s(pe).name)??"")}),g(te,ve)});var J=i(V,2);J.__click=j;var ee=i(fe,2),he=o(ee);he.__click=function(...te){e.close?.apply(this,te)};var _e=i(he,2),ce=o(_e);U(()=>{T(O,a()?"Edit Task":"Add Task"),_e.disabled=s(u),T(ce,s(u)?a()?"Saving...":"Adding...":a()?"Save Changes":"Add Task")}),ua("submit",ae,S),Ce(ge,()=>s(r),te=>d(r,te)),ht(oe,()=>s(l),te=>d(l,te)),Ce(N,()=>s(c),te=>d(c,te)),ht(V,()=>s(n),te=>d(n,te)),g(Y,R)};I(E,Y=>{e.isOpen&&Y(D)})}var M=i(E,2);Lc(M,{get isOpen(){return s(p)},close:y});var $=i(M,2);Yl($,{get isOpen(){return s(_)},close:z}),g(t,b),Ve()}tt(["click"]);var Kc=w('<div class="material-group-header svelte-ty272s"><span class="material-group-name svelte-ty272s"> </span> <span class="material-group-count svelte-ty272s"> </span></div>'),ev=w("<option> </option>"),tv=w('<span class="material-badge svelte-ty272s"> </span>'),av=w('<div class="task-item svelte-ty272s"><div class="task-line-1 svelte-ty272s"><span> </span> <div class="task-right-group svelte-ty272s"><select><option>Planned</option><option>Pending</option><option>Done</option></select> <div class="task-actions svelte-ty272s"><button class="edit-btn svelte-ty272s" title="Edit">âœŽ</button> <button class="delete-btn svelte-ty272s" title="Delete">Ã—</button></div></div></div> <div class="task-line-2 svelte-ty272s"><div class="assignee-container svelte-ty272s"><select class="assignee-select svelte-ty272s"><option>Assignee</option><!></select> <button class="assignee-add-btn svelte-ty272s" title="Manage Assignees">+</button></div> <!></div></div>'),sv=w("<!> <!>",1),nv=w('<div class="empty-tasks svelte-ty272s"> </div>'),rv=w('<div class="embedded-tasks svelte-ty272s"><div class="tasks-header svelte-ty272s"><h4 class="svelte-ty272s">Tasks</h4> <div class="header-actions svelte-ty272s"><button class="group-toggle-btn svelte-ty272s"> </button> <select class="filter-select svelte-ty272s"><option>Hide Done</option><option>Show All</option><option>Pending</option></select> <button class="add-task-btn svelte-ty272s">+ Add</button></div></div> <div class="tasks-list svelte-ty272s"><!> <!></div></div> <!> <!>',1);function lv(t,e){Ze(e,!0);let a=_t(e,"filterAssignee",3,""),r=_t(e,"partSearch",3,""),n=x(Te(e.document.tasks||[]));zt(()=>{d(n,e.document.tasks||[],!0)});let l=x("hide_done"),c=x(!1),u=x(null),v=x(!0),f=x(Te([])),p=x(!1);Lt(async()=>{d(f,await ss(),!0)});async function _(){d(f,await ss(),!0)}let h=rt(()=>[...s(n)].sort((k,N)=>k.status==="done"&&N.status!=="done"?1:k.status!=="done"&&N.status==="done"?-1:0)),m=rt(()=>s(h).filter(k=>{if(s(l)==="hide_done"&&k.status==="done"||s(l)==="pending"&&k.status!=="pending")return!1;if(s(l)==="all"){if(a()&&a().trim()){const N=(k.assignee||"").toLowerCase(),K=a().toLowerCase();return N.includes(K)}return!0}if(a()&&a().trim()){const N=(k.assignee||"").toLowerCase(),K=a().toLowerCase();if(!N.includes(K))return!1}if(r()&&r().trim()){if(!k.part_associations||k.part_associations.length===0)return!1;const N=r().toLowerCase();if(!k.part_associations.some(Q=>{const fe=Q.part;return fe?fe.name&&fe.name.toLowerCase().includes(N)||fe.registration_number&&fe.registration_number.toLowerCase().includes(N):!1}))return!1}return!0})),S=rt(()=>()=>{if(!s(v))return{"All Tasks":s(m)};const k={};s(m).forEach(Q=>{const fe=Q.material?Q.material.name:"(No Material)";k[fe]||(k[fe]=[]),k[fe].push(Q)});const N={};return Object.keys(k).sort((Q,fe)=>Q==="(No Material)"?1:fe==="(No Material)"?-1:Q.localeCompare(fe)).forEach(Q=>{N[Q]=k[Q]}),N});async function q(k,N){try{k.status=N,await bs(k.id,{status:N}),e.refresh()}catch(K){console.error(K)}}async function y(k,N){try{await bs(k.id,{assignee:N})}catch(K){console.error(K)}}async function j(k){if(confirm("Delete task?"))try{await gl(k),d(n,s(n).filter(N=>N.id!==k),!0),e.refresh()}catch(N){console.error(N)}}async function z(k){try{if(k.id){const N=await bs(k.id,{name:k.name,assignee:k.assignee,material_id:k.material_id,gnc_file_path:k.gnc_file_path});d(n,s(n).map(K=>K.id===k.id?{...K,...N}:K),!0),e.refresh()}else{const N=await _l(e.document.id,{name:k.name,assignee:k.assignee,status:"planned",material_id:k.material_id,gnc_file_path:k.gnc_file_path});d(n,[...s(n),N],!0),e.refresh()}}catch(N){throw console.error(N),N}}function b(){d(p,!0)}function E(){d(p,!1),_()}function D(){console.log("Opening Add Modal"),d(u,null),d(c,!0)}function M(k){console.log("Opening Edit Modal for:",k),d(u,k,!0),d(c,!0)}var $=rv(),Y=Ee($),R=o(Y),W=i(o(R),2),Z=o(W);Z.__click=()=>d(v,!s(v));var F=o(Z),O=i(Z,2),se=o(O);se.value=se.__value="hide_done";var ae=i(se);ae.value=ae.__value="all";var ye=i(ae);ye.value=ye.__value="pending";var ge=i(O,2);ge.__click=D;var ke=i(R,2),be=o(ke);ze(be,17,()=>Object.entries(s(S)()),([k,N])=>k,(k,N)=>{var K=rt(()=>mn(s(N),2));let Q=()=>s(K)[0],fe=()=>s(K)[1];var G=sv(),V=Ee(G);{var re=J=>{var ee=Kc(),he=o(ee),_e=o(he),ce=i(he,2),te=o(ce);U(()=>{T(_e,Q()),T(te,`(${fe().length??""})`)}),g(J,ee)};I(V,J=>{s(v)&&Object.keys(s(S)()).length>1&&J(re)})}var de=i(V,2);ze(de,17,fe,J=>J.id,(J,ee)=>{var he=av(),_e=o(he),ce=o(_e),te=o(ce),pe=i(ce,2),ve=o(pe);ve.__change=me=>q(s(ee),me.currentTarget.value);var we=o(ve);we.value=we.__value="planned";var xe=i(we);xe.value=xe.__value="pending";var H=i(xe);H.value=H.__value="done";var le;Ls(ve);var A=i(ve,2),P=o(A);P.__click=()=>M(s(ee));var ue=i(P,2);ue.__click=()=>j(s(ee).id);var Pe=i(_e,2),L=o(Pe),C=o(L);C.__change=me=>y(s(ee),me.currentTarget.value);var ie=o(C);ie.value=ie.__value="";var Re=i(ie);ze(Re,17,()=>s(f),Ue,(me,De)=>{var Ae=ev(),$e=o(Ae),Be={};U(()=>{T($e,s(De).name),Be!==(Be=s(De).name)&&(Ae.value=(Ae.__value=s(De).name)??"")}),g(me,Ae)});var Ie;Ls(C);var B=i(C,2);B.__click=b;var X=i(L,2);{var Se=me=>{var De=tv(),Ae=o(De);U(()=>{He(De,"title",`Material: ${s(ee).material.name??""}`),T(Ae,`ðŸ“¦ ${s(ee).material.name??""}`)}),g(me,De)};I(X,me=>{s(ee).material&&me(Se)})}U(()=>{Le(ce,1,`task-name ${s(ee).status==="done"?"done-text":""}`,"svelte-ty272s"),He(ce,"title",s(ee).name),T(te,s(ee).name),Le(ve,1,`status-select ${s(ee).status??""}`,"svelte-ty272s"),le!==(le=s(ee).status)&&(ve.value=(ve.__value=s(ee).status)??"",ks(ve,s(ee).status)),Ie!==(Ie=s(ee).assignee||"")&&(C.value=(C.__value=s(ee).assignee||"")??"",ks(C,s(ee).assignee||""))}),g(J,he)}),g(k,G)});var oe=i(be,2);{var je=k=>{var N=nv(),K=o(N);U(()=>T(K,s(n).length>0?"No tasks match filter.":"No tasks yet.")),g(k,N)};I(oe,k=>{s(m).length===0&&k(je)})}var qe=i(Y,2);Qc(qe,{get isOpen(){return s(c)},close:()=>d(c,!1),onSubmit:z,get task(){return s(u)}});var ne=i(qe,2);Yl(ne,{get isOpen(){return s(p)},close:E}),U(()=>{He(Z,"title",s(v)?"Show flat list":"Group by material"),T(F,s(v)?"ðŸ“¦":"ðŸ“‹")}),ht(O,()=>s(l),k=>d(l,k)),g(t,$),Ve()}tt(["click","change"]);var iv=w('<p class="upload-status svelte-1yijx0t">Uploading...</p>'),ov=w('<div class="attachment-item svelte-1yijx0t"><span class="attachment-name svelte-1yijx0t"> </span> <button type="button" class="remove-btn svelte-1yijx0t">Ã—</button></div>'),cv=w('<div class="attachments-list svelte-1yijx0t"></div>'),vv=w('<div class="modal-overlay svelte-1yijx0t"><div class="modal-content svelte-1yijx0t"><div class="modal-header svelte-1yijx0t"><h3 class="svelte-1yijx0t"> </h3> <button class="close-btn svelte-1yijx0t">&times;</button></div> <form class="modal-body svelte-1yijx0t"><div class="form-group svelte-1yijx0t"><label for="author" class="svelte-1yijx0t">Author</label> <input id="author" type="text" placeholder="Your Name" class="svelte-1yijx0t"/></div> <div class="form-group svelte-1yijx0t"><label for="type" class="svelte-1yijx0t">Type</label> <select id="type" class="svelte-1yijx0t"><option>Info</option><option>Warning</option><option>Error</option></select></div> <div class="form-group svelte-1yijx0t"><label for="text" class="svelte-1yijx0t">Message</label> <textarea id="text" required rows="4" class="svelte-1yijx0t"></textarea></div> <div class="form-group svelte-1yijx0t"><label for="attachments" class="svelte-1yijx0t">Attachments</label> <div class="file-upload-wrapper svelte-1yijx0t"><input id="attachments" type="file" multiple class="svelte-1yijx0t"/> <!></div> <!></div> <div class="actions svelte-1yijx0t"><button type="button" class="btn-secondary svelte-1yijx0t">Cancel</button> <button type="submit" class="btn-primary svelte-1yijx0t"> </button></div></form></div></div>');function Wl(t,e){Ze(e,!0);let a=_t(e,"entry",3,null),r=x(""),n=x("info"),l=x(""),c=x(!1),u=x(Te([])),v=x(!1);zt(()=>{e.isOpen&&(a()?(d(r,a().text||"",!0),d(n,a().type||"info",!0),d(l,a().author||"",!0),d(u,a().attachments||[],!0)):(d(l,localStorage.getItem("journal_author")||"",!0),d(r,""),d(n,"info"),d(u,[],!0)))});async function f(q){const y=Array.from(q.target.files);if(y.length!==0){d(v,!0);try{for(const j of y){const z=await Ws(j);s(u).push({file_path:z.file_path,filename:z.filename,media_type:z.media_type})}}catch(j){console.error("Upload failed",j),alert("Failed to upload attachment")}finally{d(v,!1),q.target.value=""}}}function p(q){s(u).splice(q,1)}async function _(q){q.preventDefault(),d(c,!0),s(l)&&localStorage.setItem("journal_author",s(l));try{const y={text:s(r),type:s(n),status:a()?.status||"pending",author:s(l),document_id:e.documentId,attachments:s(u)};a()?await Xs(a().id,y):await Dn(y),window.dispatchEvent(new CustomEvent("journal-entries-updated")),e.close()}catch(y){console.error(y),alert(a()?"Failed to update note":"Failed to create note")}finally{d(c,!1)}}var h=Ke(),m=Ee(h);{var S=q=>{var y=vv();y.__click=function(...Q){e.close?.apply(this,Q)};var j=o(y);j.__click=Q=>Q.stopPropagation();var z=o(j),b=o(z),E=o(b),D=i(b,2);D.__click=function(...Q){e.close?.apply(this,Q)};var M=i(z,2),$=o(M),Y=i(o($),2),R=i($,2),W=i(o(R),2),Z=o(W);Z.value=Z.__value="info";var F=i(Z);F.value=F.__value="warning";var O=i(F);O.value=O.__value="error";var se=i(R,2),ae=i(o(se),2),ye=i(se,2),ge=i(o(ye),2),ke=o(ge);ke.__change=f;var be=i(ke,2);{var oe=Q=>{var fe=iv();g(Q,fe)};I(be,Q=>{s(v)&&Q(oe)})}var je=i(ge,2);{var qe=Q=>{var fe=cv();ze(fe,21,()=>s(u),Ue,(G,V,re)=>{var de=ov(),J=o(de),ee=o(J),he=i(J,2);he.__click=()=>p(re),U(()=>T(ee,s(V).filename)),g(G,de)}),g(Q,fe)};I(je,Q=>{s(u).length>0&&Q(qe)})}var ne=i(ye,2),k=o(ne);k.__click=function(...Q){e.close?.apply(this,Q)};var N=i(k,2),K=o(N);U(()=>{T(E,a()?"Edit Note":`Add Note to ${e.documentName}`),ke.disabled=s(v),N.disabled=s(c),T(K,s(c)?"Saving...":a()?"Update Note":"Add Note")}),ua("submit",M,_),Ce(Y,()=>s(l),Q=>d(l,Q)),ht(W,()=>s(n),Q=>d(n,Q)),Ce(ae,()=>s(r),Q=>d(r,Q)),g(q,y)};I(m,q=>{e.isOpen&&q(S)})}g(t,h),Ve()}tt(["click","change"]);var uv=w('<img class="svelte-jm2ier"/>'),dv=w('<div class="file-placeholder svelte-jm2ier"><span> </span> <a target="_blank" rel="noreferrer">Download</a></div>'),fv=w('<div class="image-wrapper svelte-jm2ier"><!></div>'),pv=w('<div class="modal-overlay svelte-jm2ier"><div class="modal-content svelte-jm2ier"><button class="close-btn svelte-jm2ier">&times;</button> <div class="gallery svelte-jm2ier"></div></div></div>');function Jl(t,e){var a=Ke(),r=Ee(a);{var n=l=>{var c=pv();c.__click=function(...p){e.close?.apply(this,p)};var u=o(c);u.__click=p=>p.stopPropagation();var v=o(u);v.__click=function(...p){e.close?.apply(this,p)};var f=i(v,2);ze(f,21,()=>e.attachments,Ue,(p,_)=>{var h=fv(),m=o(h);{var S=y=>{var j=uv();U(()=>{He(j,"src",s(_).file_path),He(j,"alt",s(_).filename)}),g(y,j)},q=y=>{var j=dv(),z=o(j),b=o(z),E=i(z,2);U(()=>{T(b,`ðŸ“„ ${s(_).filename??""}`),He(E,"href",s(_).file_path)}),g(y,j)};I(m,y=>{s(_).media_type&&s(_).media_type.startsWith("image/")?y(S):y(q,!1)})}g(p,h)}),g(l,c)};I(r,l=>{e.isOpen&&l(n)})}g(t,a)}tt(["click"]);var hv=w("<option> </option>"),_v=w("<option> </option>"),gv=w('<div class="modal-overlay svelte-12q38jy"><div class="modal-content svelte-12q38jy"><div class="modal-header svelte-12q38jy"><h3 class="svelte-12q38jy">ðŸ” Filter Documents</h3> <button class="close-btn svelte-12q38jy">&times;</button></div> <div class="modal-body svelte-12q38jy"><div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Document Type</h4> <select class="filter-input svelte-12q38jy"><option>All Types</option><option>Plan</option><option>Mail</option><option>Other</option></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Status</h4> <select class="filter-input svelte-12q38jy"><option>All Statuses</option><option>In Progress</option><option>Done</option></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Tag</h4> <input type="text" placeholder="Filter by tag..." class="filter-input svelte-12q38jy"/></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Part Number / Name</h4> <input type="text" placeholder="Search for parts..." class="filter-input svelte-12q38jy"/></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Assignee</h4> <select class="filter-input svelte-12q38jy"><option>All Assignees</option><!></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Material</h4> <select class="filter-input svelte-12q38jy"><option>All Materials</option><!></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Task Types (Show documents with these task types)</h4> <div class="checkbox-group svelte-12q38jy"><label class="checkbox-label svelte-12q38jy"><input type="checkbox" class="svelte-12q38jy"/> <span class="checkbox-text svelte-12q38jy">Planned</span></label> <label class="checkbox-label svelte-12q38jy"><input type="checkbox" class="svelte-12q38jy"/> <span class="checkbox-text svelte-12q38jy">Pending</span></label> <label class="checkbox-label svelte-12q38jy"><input type="checkbox" class="svelte-12q38jy"/> <span class="checkbox-text svelte-12q38jy">Done</span></label></div></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Date Range</h4> <select class="filter-input svelte-12q38jy"><option>Registration Date</option><option>Done Date</option></select> <div class="date-range svelte-12q38jy"><input type="date" class="filter-input svelte-12q38jy" placeholder="Start Date"/> <span class="date-separator svelte-12q38jy">to</span> <input type="date" class="filter-input svelte-12q38jy" placeholder="End Date"/></div></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Sort By</h4> <div class="sort-controls svelte-12q38jy"><select class="filter-input svelte-12q38jy"><option>Date</option><option>Name</option><option>Author</option><option>Status</option><option>Done Date</option></select> <button class="sort-order-btn svelte-12q38jy" title="Toggle sort order"> </button></div></div></div> <div class="modal-footer svelte-12q38jy"><button class="btn-secondary svelte-12q38jy">Reset All</button> <button class="btn-primary svelte-12q38jy">Apply Filters</button></div></div></div>');function mv(t,e){Ze(e,!0);let a=x(Te({filterType:"",filterStatus:"",filterTag:"",filterAssignee:"",partSearch:"",filterMaterial:"",filterTaskTypes:[],startDate:"",endDate:"",dateField:"registration_date",sortBy:"registration_date",sortOrder:"desc"})),r=x(Te([])),n=x(Te([])),l=!1;zt(()=>{e.isOpen&&!l&&(e.filters&&(d(a,{...e.filters},!0),Array.isArray(s(a).filterTaskTypes)||(s(a).filterTaskTypes=[])),c(),u()),l=e.isOpen});async function c(){try{d(r,await Sa(),!0)}catch(S){console.error("Failed to load materials",S)}}async function u(){try{d(n,await ss(),!0)}catch(S){console.error("Failed to load assignees",S)}}function v(){e.onApply(s(a)),e.close()}function f(){d(a,{filterType:"",filterStatus:"",filterTag:"",filterAssignee:"",partSearch:"",filterMaterial:"",filterTaskTypes:[],startDate:"",endDate:"",dateField:"registration_date",sortBy:"registration_date",sortOrder:"desc"},!0)}function p(S){s(a).filterTaskTypes.includes(S)?s(a).filterTaskTypes=s(a).filterTaskTypes.filter(q=>q!==S):s(a).filterTaskTypes=[...s(a).filterTaskTypes,S]}var _=Ke(),h=Ee(_);{var m=S=>{var q=gv();q.__click=function(...X){e.close?.apply(this,X)};var y=o(q);y.__click=X=>X.stopPropagation();var j=o(y),z=i(o(j),2);z.__click=function(...X){e.close?.apply(this,X)};var b=i(j,2),E=o(b),D=i(o(E),2),M=o(D);M.value=M.__value="";var $=i(M);$.value=$.__value="plan";var Y=i($);Y.value=Y.__value="mail";var R=i(Y);R.value=R.__value="other";var W=i(E,2),Z=i(o(W),2),F=o(Z);F.value=F.__value="";var O=i(F);O.value=O.__value="in_progress";var se=i(O);se.value=se.__value="done";var ae=i(W,2),ye=i(o(ae),2),ge=i(ae,2),ke=i(o(ge),2),be=i(ge,2),oe=i(o(be),2),je=o(oe);je.value=je.__value="";var qe=i(je);ze(qe,17,()=>s(n),Ue,(X,Se)=>{var me=hv(),De=o(me),Ae={};U(()=>{T(De,s(Se).name),Ae!==(Ae=s(Se).name)&&(me.value=(me.__value=s(Se).name)??"")}),g(X,me)});var ne=i(be,2),k=i(o(ne),2),N=o(k);N.value=N.__value="";var K=i(N);ze(K,17,()=>s(r),Ue,(X,Se)=>{var me=_v(),De=o(me),Ae={};U(()=>{T(De,s(Se).name),Ae!==(Ae=s(Se).id)&&(me.value=(me.__value=s(Se).id)??"")}),g(X,me)});var Q=i(ne,2),fe=i(o(Q),2),G=o(fe),V=o(G);V.__change=()=>p("planned");var re=i(G,2),de=o(re);de.__change=()=>p("pending");var J=i(re,2),ee=o(J);ee.__change=()=>p("done");var he=i(Q,2),_e=i(o(he),2),ce=o(_e);ce.value=ce.__value="registration_date";var te=i(ce);te.value=te.__value="done_date";var pe=i(_e,2),ve=o(pe),we=i(ve,4),xe=i(he,2),H=i(o(xe),2),le=o(H),A=o(le);A.value=A.__value="registration_date";var P=i(A);P.value=P.__value="name";var ue=i(P);ue.value=ue.__value="author";var Pe=i(ue);Pe.value=Pe.__value="status";var L=i(Pe);L.value=L.__value="done_date";var C=i(le,2);C.__click=()=>s(a).sortOrder=s(a).sortOrder==="desc"?"asc":"desc";var ie=o(C),Re=i(b,2),Ie=o(Re);Ie.__click=f;var B=i(Ie,2);B.__click=v,U((X,Se,me)=>{Qs(V,X),Qs(de,Se),Qs(ee,me),T(ie,s(a).sortOrder==="desc"?"â†“ Desc":"â†‘ Asc")},[()=>s(a).filterTaskTypes.includes("planned"),()=>s(a).filterTaskTypes.includes("pending"),()=>s(a).filterTaskTypes.includes("done")]),ht(D,()=>s(a).filterType,X=>s(a).filterType=X),ht(Z,()=>s(a).filterStatus,X=>s(a).filterStatus=X),Ce(ye,()=>s(a).filterTag,X=>s(a).filterTag=X),Ce(ke,()=>s(a).partSearch,X=>s(a).partSearch=X),ht(oe,()=>s(a).filterAssignee,X=>s(a).filterAssignee=X),ht(k,()=>s(a).filterMaterial,X=>s(a).filterMaterial=X),ht(_e,()=>s(a).dateField,X=>s(a).dateField=X),Ce(ve,()=>s(a).startDate,X=>s(a).startDate=X),Ce(we,()=>s(a).endDate,X=>s(a).endDate=X),ht(le,()=>s(a).sortBy,X=>s(a).sortBy=X),g(S,q)};I(h,S=>{e.isOpen&&S(m)})}g(t,_),Ve()}tt(["click","change"]);var bv=w('<span class="tag-chip svelte-1qsxu3n"> <button type="button" class="svelte-1qsxu3n">&times;</button></span>'),yv=w('<li class="svelte-1qsxu3n"> </li>'),wv=w('<ul class="suggestions svelte-1qsxu3n"></ul>'),kv=w('<div class="tag-input-container svelte-1qsxu3n"><!> <div class="input-wrapper svelte-1qsxu3n"><input type="text" class="svelte-1qsxu3n"/> <!></div></div>');function xv(t,e){Ze(e,!0);let a=_t(e,"selectedTags",31,()=>Te([])),r=_t(e,"placeholder",3,"Add tag..."),n=x(""),l=x(Te([])),c=x(Te([])),u=x(!1),v;Lt(async()=>{try{d(l,await ll(),!0)}catch(b){console.error("Failed to fetch tags",b)}});function f(b){if(d(n,b.target.value,!0),s(n).includes(",")){const E=s(n).split(",");for(let D of E)D=D.trim(),D&&(a().includes(D)||a([...a(),D]));d(n,""),d(u,!1);return}s(n)?(d(c,s(l).filter(E=>E.name.toLowerCase().includes(s(n).toLowerCase())&&!a().includes(E.name)),!0),d(u,!0)):d(u,!1)}function p(b){b&&!a().includes(b)&&a([...a(),b]),d(n,""),d(u,!1),v.focus()}function _(b){a(a().filter(E=>E!==b))}function h(b){b.key==="Enter"?(b.preventDefault(),s(n).trim()&&p(s(n).trim())):b.key==="Backspace"&&!s(n)&&a().length>0&&_(a()[a().length-1])}var m=kv(),S=o(m);ze(S,17,a,Ue,(b,E)=>{var D=bv(),M=o(D),$=i(M);$.__click=()=>_(s(E)),U(()=>T(M,`${s(E)??""} `)),g(b,D)});var q=i(S,2),y=o(q);y.__input=f,y.__keydown=h,Cn(y,b=>v=b,()=>v);var j=i(y,2);{var z=b=>{var E=wv();ze(E,21,()=>s(c),Ue,(D,M)=>{var $=yv();$.__click=()=>p(s(M).name);var Y=o($);U(()=>T(Y,s(M).name)),g(D,$)}),g(b,E)};I(j,b=>{s(u)&&s(c).length>0&&b(z)})}U(()=>He(y,"placeholder",r())),ua("blur",y,()=>setTimeout(()=>d(u,!1),200)),ua("focus",y,()=>s(n)&&d(u,!0)),Ce(y,()=>s(n),b=>d(n,b)),g(t,m),Ve()}tt(["click","input","keydown"]);var Sv=w('<span class="filter-badge svelte-s90sg6">â—</span>'),Tv=w('<div class="card-desc svelte-s90sg6"> </div>'),qv=w('<span class="tag-badge svelte-s90sg6"> </span>'),Ev=w('<button class="icon-badge attachment-badge svelte-s90sg6" title="View Attachments"> </button>'),jv=w('<span class="icon-badge task-planned svelte-s90sg6" title="Planned Tasks"> </span>'),Pv=w('<span class="icon-badge task-pending svelte-s90sg6" title="Pending Tasks"> </span>'),Av=w('<span class="icon-badge task-done svelte-s90sg6" title="Completed Tasks"> </span>'),Cv=w("<!> <!> <!>",1),Dv=w('<span class="icon-badge journal-info svelte-s90sg6" title="Info Notes"> </span>'),zv=w('<span class="icon-badge journal-warning svelte-s90sg6" title="Warnings"> </span>'),Rv=w('<span class="icon-badge journal-error svelte-s90sg6" title="Errors"> </span>'),Nv=w("<!> <!> <!>",1),Mv=w('<div class="badges-tags-row svelte-s90sg6"><!> <!> <!> <!></div>'),Ov=w('<div class="meta-item svelte-s90sg6"><span class="label svelte-s90sg6">Done:</span> <span class="value"> </span></div>'),Iv=w('<button class="note-attachment-btn svelte-s90sg6"> </button>'),Lv=w('<div><div class="note-header svelte-s90sg6"><span> </span> <span class="note-author svelte-s90sg6"> </span> <span class="note-date svelte-s90sg6"> </span> <!> <button class="note-edit-btn svelte-s90sg6" title="Edit note">âœï¸</button> <button> </button></div> <p class="note-text svelte-s90sg6"> </p></div>'),$v=w('<div class="embedded-notes svelte-s90sg6"><h4 class="svelte-s90sg6">Notes</h4> <div class="notes-list svelte-s90sg6"></div></div>'),Fv=w('<button class="action-btn primary-btn svelte-s90sg6" title="Register Document"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> Register</button>'),Bv=w('<button class="action-btn primary-btn svelte-s90sg6" title="View Content"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg> View</button>'),Uv=w('<button class="dropdown-item svelte-s90sg6">ðŸ“¦ Download Zip</button>'),Gv=w('<div class="dropdown-menu svelte-s90sg6"><button class="dropdown-item svelte-s90sg6">ðŸ“ Add Note</button> <button class="dropdown-item svelte-s90sg6"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> Edit</button> <!> <button class="dropdown-item delete-item svelte-s90sg6"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg> Delete</button></div>'),Hv=w('<div class="card svelte-s90sg6"><div class="card-header svelte-s90sg6"><div class="title-group svelte-s90sg6"><h3 class="svelte-s90sg6"> </h3> <span class="badge badge-type svelte-s90sg6"> </span></div> <select><option>Unregistered</option><option>In Progress</option><option>Done</option></select></div> <!> <!> <div class="card-meta svelte-s90sg6"><div class="meta-item svelte-s90sg6"><span class="label svelte-s90sg6">Author:</span> <span class="value"> </span></div> <div class="meta-item svelte-s90sg6"><span class="label svelte-s90sg6">Date:</span> <span class="value"> </span></div> <!></div> <!> <!> <div class="card-actions svelte-s90sg6"><!> <div class="dropdown-container svelte-s90sg6"><button class="action-btn dropdown-btn svelte-s90sg6" title="More actions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg></button> <!></div></div></div>'),Yv=w('<div class="empty-state svelte-s90sg6"><p>No documents found.</p></div>'),Wv=w('<div class="list-container svelte-s90sg6"><div class="filters-bar svelte-s90sg6"><div class="main-filters svelte-s90sg6"><div class="search-box svelte-s90sg6"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon svelte-s90sg6"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <input type="text" placeholder="Search documents..." class="svelte-s90sg6"/></div> <button class="filter-btn svelte-s90sg6" title="Filter &amp; Sort"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> Filters <!></button></div></div> <div class="cards-wrapper svelte-s90sg6"><!> <!></div> <!> <!> <!> <!></div>');function Jv(t,e){Ze(e,!0);let a=x(Te([])),r=x(""),n=x(""),l=x(""),c=x(""),u=x(""),v=x(""),f=x(""),p=x(Te([])),_=x(""),h=x(""),m=x("registration_date"),S=x(Te([])),q=x(null),y=x(null),j=x(null),z=x(null),b=x(!1),E=x("registration_date"),D=x("desc"),M=x(null);async function $(){let A=await Js(s(r),s(l),s(c),s(E),s(D),s(u),s(_),s(h),s(m),s(v),s(n));s(p)&&s(p).length>0&&(A=A.filter(P=>!P.tasks||P.tasks.length===0?!1:P.tasks.some(ue=>s(p).includes(ue.status)))),s(f)&&(A=A.filter(P=>!P.tasks||P.tasks.length===0?!1:P.tasks.some(ue=>ue.material_id&&ue.material_id.toString()===s(f).toString()))),d(a,A,!0)}async function Y(){d(S,await bl(),!0)}Lt(()=>{const A=new URLSearchParams(window.location.search);A.has("part_search")&&d(n,A.get("part_search"),!0),$(),Y()});async function R(A,P){await cl(A.id,P),$()}async function W(A){confirm("Are you sure you want to delete this document?")&&(await dl(A),$())}function Z(){$()}function F(A){d(q,A,!0)}function O(){d(q,null)}function se(A){d(y,A,!0),d(j,null)}function ae(A,P){d(y,A,!0),d(j,P,!0)}function ye(){d(y,null),d(j,null),$()}async function ge(A,P){const ue=P==="pending"?"done":"pending";try{await Xs(A,{status:ue}),$(),window.dispatchEvent(new CustomEvent("journal-entries-updated"))}catch(Pe){console.error("Failed to update note status",Pe)}}function ke(A){d(z,A,!0)}function be(){d(z,null)}function oe(A){if(!A)return null;const P={planned:0,pending:0,done:0};return A.forEach(ue=>{P[ue.status]!==void 0&&P[ue.status]++}),P}function je(A){if(!A)return null;const P={info:0,warning:0,error:0};return A.forEach(ue=>{P[ue.type]!==void 0&&P[ue.type]++}),P}function qe(){d(b,!0)}function ne(){d(b,!1)}function k(A){d(l,A.filterType,!0),d(c,A.filterStatus,!0),d(u,A.filterTag,!0),d(v,A.filterAssignee,!0),d(n,A.partSearch||"",!0),d(f,A.filterMaterial||"",!0),d(p,A.filterTaskTypes||[],!0),d(_,A.startDate,!0),d(h,A.endDate,!0),d(m,A.dateField,!0),d(E,A.sortBy,!0),d(D,A.sortOrder,!0),$()}function N(A){d(M,s(M)===A?null:A,!0)}function K(){d(M,null)}async function Q(A){try{await ul(A.id,A.name)}catch(P){console.error(P),alert("Failed to download zip. Ensure the source folder exists on the server.")}}var fe={refresh:$},G=Wv(),V=o(G),re=o(V),de=o(re),J=i(o(de),2);J.__input=Z;var ee=i(de,2);ee.__click=qe;var he=i(o(ee),2);{var _e=A=>{var P=Sv();g(A,P)};I(he,A=>{(s(l)||s(c)||s(u)||s(v)||s(_)||s(h)||s(p)&&s(p).length>0)&&A(_e)})}var ce=i(V,2),te=o(ce);ze(te,17,()=>s(a),A=>A.id,(A,P)=>{const ue=rt(()=>oe(s(P).tasks)),Pe=rt(()=>je(s(P).journal_entries));var L=Hv(),C=o(L),ie=o(C),Re=o(ie),Ie=o(Re),B=i(Re,2),X=o(B),Se=i(ie,2);Se.__change=Ne=>R(s(P),Ne.target.value);var me=o(Se);me.value=me.__value="unregistered";var De=i(me);De.value=De.__value="in_progress";var Ae=i(De);Ae.value=Ae.__value="done";var $e;Ls(Se);var Be=i(C,2);{var Ge=Ne=>{var et=Tv(),pt=o(et);U(()=>T(pt,s(P).description)),g(Ne,et)};I(Be,Ne=>{s(P).description&&Ne(Ge)})}var at=i(Be,2);{var ot=Ne=>{var et=Mv(),pt=o(et);{var Ft=it=>{var ct=Ke(),Et=Ee(ct);ze(Et,17,()=>s(P).tags,Ue,(Nt,Ut)=>{var Gt=qv(),Vt=o(Gt);U(()=>T(Vt,`#${s(Ut).name??""}`)),g(Nt,Gt)}),g(it,ct)};I(pt,it=>{s(P).tags&&s(P).tags.length>0&&it(Ft)})}var Qe=i(pt,2);{var Zt=it=>{var ct=Ev();ct.__click=()=>ke(s(P).attachments);var Et=o(ct);U(()=>T(Et,`ðŸ“· ${s(P).attachments.length??""}`)),g(it,ct)};I(Qe,it=>{s(P).attachments&&s(P).attachments.length>0&&it(Zt)})}var qt=i(Qe,2);{var Bt=it=>{var ct=Cv(),Et=Ee(ct);{var Nt=nt=>{var gt=jv(),At=o(gt);U(()=>T(At,`ðŸ“… ${s(ue).planned??""}`)),g(nt,gt)};I(Et,nt=>{s(ue).planned>0&&nt(Nt)})}var Ut=i(Et,2);{var Gt=nt=>{var gt=Pv(),At=o(gt);U(()=>T(At,`â³ ${s(ue).pending??""}`)),g(nt,gt)};I(Ut,nt=>{s(ue).pending>0&&nt(Gt)})}var Vt=i(Ut,2);{var os=nt=>{var gt=Av(),At=o(gt);U(()=>T(At,`âœ… ${s(ue).done??""}`)),g(nt,gt)};I(Vt,nt=>{s(ue).done>0&&nt(os)})}g(it,ct)};I(qt,it=>{s(ue)&&it(Bt)})}var aa=i(qt,2);{var qa=it=>{var ct=Nv(),Et=Ee(ct);{var Nt=nt=>{var gt=Dv(),At=o(gt);U(()=>T(At,`â„¹ï¸ ${s(Pe).info??""}`)),g(nt,gt)};I(Et,nt=>{s(Pe).info>0&&nt(Nt)})}var Ut=i(Et,2);{var Gt=nt=>{var gt=zv(),At=o(gt);U(()=>T(At,`âš ï¸ ${s(Pe).warning??""}`)),g(nt,gt)};I(Ut,nt=>{s(Pe).warning>0&&nt(Gt)})}var Vt=i(Ut,2);{var os=nt=>{var gt=Rv(),At=o(gt);U(()=>T(At,`âŒ ${s(Pe).error??""}`)),g(nt,gt)};I(Vt,nt=>{s(Pe).error>0&&nt(os)})}g(it,ct)};I(aa,it=>{s(Pe)&&it(qa)})}g(Ne,et)};I(at,Ne=>{(s(P).tags&&s(P).tags.length>0||s(P).attachments&&s(P).attachments.length>0||s(ue)||s(Pe))&&Ne(ot)})}var ut=i(at,2),Tt=o(ut),Jt=i(o(Tt),2),vt=o(Jt),st=i(Tt,2),dt=i(o(st),2),Rt=o(dt),yt=i(st,2);{var ft=Ne=>{var et=Ov(),pt=i(o(et),2),Ft=o(pt);U(()=>T(Ft,s(P).done_date)),g(Ne,et)};I(yt,Ne=>{s(P).done_date&&Ne(ft)})}var jt=i(ut,2);lv(jt,{get document(){return s(P)},refresh:$,get filterAssignee(){return s(v)},get partSearch(){return s(n)}});var $t=i(jt,2);{var Xt=Ne=>{var et=$v(),pt=i(o(et),2);ze(pt,21,()=>s(P).journal_entries,Ue,(Ft,Qe)=>{var Zt=Lv(),qt=o(Zt),Bt=o(qt),aa=o(Bt),qa=i(Bt,2),it=o(qa),ct=i(qa,2),Et=o(ct),Nt=i(ct,2);{var Ut=At=>{var As=Iv();As.__click=()=>ke(s(Qe).attachments);var Zl=o(As);U(()=>{He(As,"title",`View attachments (${s(Qe).attachments.length??""})`),T(Zl,`ðŸ“Ž ${s(Qe).attachments.length??""}`)}),g(At,As)};I(Nt,At=>{s(Qe).attachments&&s(Qe).attachments.length>0&&At(Ut)})}var Gt=i(Nt,2);Gt.__click=()=>ae(s(P),s(Qe));var Vt=i(Gt,2);Vt.__click=()=>ge(s(Qe).id,s(Qe).status);var os=o(Vt),nt=i(qt,2),gt=o(nt);U(()=>{Le(Zt,1,`note-item ${s(Qe).type??""}`,"svelte-s90sg6"),Le(Bt,1,`note-badge ${s(Qe).type??""}`,"svelte-s90sg6"),T(aa,s(Qe).type),T(it,s(Qe).author||"Unknown"),T(Et,s(Qe).created_at),Le(Vt,1,`note-status-btn ${s(Qe).status??""}`,"svelte-s90sg6"),He(Vt,"title",s(Qe).status==="pending"?"Click to mark as done":"Click to mark as pending"),T(os,s(Qe).status),T(gt,s(Qe).text)}),g(Ft,Zt)}),g(Ne,et)};I($t,Ne=>{s(P).journal_entries&&s(P).journal_entries.length>0&&Ne(Xt)})}var wt=i($t,2),Pt=o(wt);{var ta=Ne=>{var et=Fv();et.__click=()=>e.onEdit(s(P)),g(Ne,et)},Oa=Ne=>{var et=Bv();et.__click=()=>F(s(P)),g(Ne,et)};I(Pt,Ne=>{s(P).status==="unregistered"?Ne(ta):Ne(Oa,!1)})}var Ta=i(Pt,2),Wa=o(Ta);Wa.__click=()=>N(s(P).id);var is=i(Wa,2);{var oa=Ne=>{var et=Gv(),pt=o(et);pt.__click=()=>{se(s(P)),K()};var Ft=i(pt,2);Ft.__click=()=>{e.onEdit(s(P)),K()};var Qe=i(Ft,2);{var Zt=Bt=>{var aa=Uv();aa.__click=()=>{Q(s(P)),K()},g(Bt,aa)};I(Qe,Bt=>{s(P).type==="order"&&Bt(Zt)})}var qt=i(Qe,2);qt.__click=()=>{W(s(P).id),K()},g(Ne,et)};I(is,Ne=>{s(M)===s(P).id&&Ne(oa)})}U(()=>{T(Ie,s(P).name),T(X,s(P).type),Le(Se,1,`status-select ${s(P).status??""}`,"svelte-s90sg6"),me.disabled=s(P).status!=="unregistered",$e!==($e=s(P).status)&&(Se.value=(Se.__value=s(P).status)??"",ks(Se,s(P).status)),T(vt,s(P).author||"-"),T(Rt,s(P).registration_date)}),g(A,L)});var pe=i(te,2);{var ve=A=>{var P=Yv();g(A,P)};I(pe,A=>{s(a).length===0&&A(ve)})}var we=i(ce,2);{let A=rt(()=>!!s(q));Rn(we,{get isOpen(){return s(A)},close:O,maxWidth:"800px",children:(P,ue)=>{Dc(P,{get document(){return s(q)}})},$$slots:{default:!0}})}var xe=i(we,2);{let A=rt(()=>!!s(y)),P=rt(()=>s(y)?.id),ue=rt(()=>s(y)?.name);Wl(xe,{get isOpen(){return s(A)},close:ye,get documentId(){return s(P)},get documentName(){return s(ue)},get entry(){return s(j)}})}var H=i(xe,2);{let A=rt(()=>!!s(z)),P=rt(()=>s(z)||[]);Jl(H,{get isOpen(){return s(A)},close:be,get attachments(){return s(P)}})}var le=i(H,2);{let A=rt(()=>({filterType:s(l),filterStatus:s(c),filterTag:s(u),filterAssignee:s(v),filterMaterial:s(f),filterTaskTypes:s(p),startDate:s(_),endDate:s(h),dateField:s(m),sortBy:s(E),sortOrder:s(D)}));mv(le,{get isOpen(){return s(b)},close:ne,get filters(){return s(A)},onApply:k})}return Ce(J,()=>s(r),A=>d(r,A)),g(t,G),Ve(fe)}tt(["input","click","change"]);var Xv=w('<button type="button" class="btn-outline svelte-f0yvr0">ðŸ“· View Gallery</button>'),Zv=w('<p class="info-text svelte-f0yvr0">Uploading...</p>'),Vv=w('<p class="error-text svelte-f0yvr0"> </p>'),Qv=w('<div class="attachment-item svelte-f0yvr0"><span class="file-name svelte-f0yvr0"> </span> <button type="button" class="remove-btn svelte-f0yvr0">âŒ</button></div>'),Kv=w('<div class="attachment-item new svelte-f0yvr0"><span class="file-name svelte-f0yvr0"> </span> <button type="button" class="remove-btn svelte-f0yvr0">âŒ</button></div>'),eu=w('<div class="attachments-list svelte-f0yvr0"><!> <!></div>'),tu=w('<span class="part-dims svelte-f0yvr0"> </span>'),au=w('<li class="part-item-li svelte-f0yvr0"><span class="part-name svelte-f0yvr0"> </span> <span class="part-reg svelte-f0yvr0"> </span> <!></li>'),su=w('<ul class="parts-list svelte-f0yvr0"></ul>'),nu=w('<p class="no-parts svelte-f0yvr0">No linked parts found in GNC.</p>'),ru=w('<details class="task-item svelte-f0yvr0"><summary class="svelte-f0yvr0"><span class="task-icon">âš™ï¸</span> <span class="task-name svelte-f0yvr0"> </span> <span> </span></summary> <div class="task-details svelte-f0yvr0"><div class="task-meta svelte-f0yvr0"><div class="meta-item svelte-f0yvr0"><span class="label svelte-f0yvr0">Assignee:</span> <span> </span></div> <div class="meta-item svelte-f0yvr0"><span class="label svelte-f0yvr0">Material:</span> <span> </span></div> <div class="meta-item svelte-f0yvr0"><span class="label svelte-f0yvr0">GNC Path:</span> <span class="path svelte-f0yvr0"> </span></div></div> <div class="linked-parts-section svelte-f0yvr0"><h5 class="svelte-f0yvr0"> </h5> <!></div></div></details>'),lu=w('<div class="form-section svelte-f0yvr0"><h4 class="svelte-f0yvr0"> </h4> <div class="task-list svelte-f0yvr0"></div></div>'),iu=w('<div class="form-container svelte-f0yvr0"><h3 class="svelte-f0yvr0"> </h3> <form><div class="form-section upload-section svelte-f0yvr0"><h4 class="svelte-f0yvr0">Files & Scanning</h4> <div class="upload-buttons"><div class="upload-btn-wrapper svelte-f0yvr0"><button type="button" class="btn-outline svelte-f0yvr0">ðŸ“„ Add Attachments</button> <input type="file" multiple title="Add Attachments (No Scan)" class="svelte-f0yvr0"/></div> <!></div> <!> <!> <!></div> <div class="form-group svelte-f0yvr0"><label for="name" class="svelte-f0yvr0">Name</label> <input id="name" type="text" required placeholder="e.g. Project Alpha Specs" class="svelte-f0yvr0"/></div> <div class="form-group svelte-f0yvr0"><label for="description" class="svelte-f0yvr0">Description</label> <textarea id="description" rows="3" placeholder="Brief description of the document..." class="svelte-f0yvr0"></textarea></div> <!> <div class="form-group svelte-f0yvr0"><label for="tags" class="svelte-f0yvr0">Tags</label> <!></div> <div class="form-group svelte-f0yvr0"><label for="content" class="svelte-f0yvr0">Recognized Content (Markdown)</label> <textarea id="content" rows="10" placeholder="Recognized document content will appear here..." class="svelte-f0yvr0"></textarea></div> <div class="row svelte-f0yvr0"><div class="form-group half svelte-f0yvr0"><label for="type" class="svelte-f0yvr0">Type</label> <select id="type" class="svelte-f0yvr0"><option>Plan</option><option>Mail</option><option>Other</option></select></div> <div class="form-group half svelte-f0yvr0"><label for="status" class="svelte-f0yvr0">Status</label> <select id="status" class="svelte-f0yvr0"><option>In Progress</option><option>Done</option></select></div></div> <div class="row svelte-f0yvr0"><div class="form-group half svelte-f0yvr0"><label for="date" class="svelte-f0yvr0">Registration Date</label> <input id="date" type="date" class="svelte-f0yvr0"/></div> <div class="form-group half svelte-f0yvr0"><label for="done_date" class="svelte-f0yvr0">Done Date</label> <input id="done_date" type="date" class="svelte-f0yvr0"/></div></div> <div class="form-group svelte-f0yvr0"><label for="author" class="svelte-f0yvr0">Author</label> <input id="author" type="text" placeholder="Your Name" class="svelte-f0yvr0"/></div> <div class="actions svelte-f0yvr0"><button type="button" class="btn-secondary svelte-f0yvr0">Cancel</button> <button type="submit" class="btn-primary svelte-f0yvr0"> </button></div></form> <!></div>');function ou(t,e){Ze(e,!0);let a=_t(e,"document",3,null),r=x(""),n=x(""),l=x("plan"),c=x("in_progress"),u=x(""),v=x(""),f=x(""),p=x(""),_=x(Te([])),h=x(Te([])),m=x(Te([]));zt(()=>{if(a())d(r,a().name||"",!0),d(n,a().description||"",!0),d(l,a().type||"plan",!0),d(c,a().status||"in_progress",!0),d(u,a().registration_date||"",!0),d(v,a().content||"",!0),d(f,a().author||"",!0),d(p,a().done_date||"",!0),d(_,a().attachments||[],!0),a().tags?d(m,a().tags.map(B=>typeof B=="string"?B:B.name),!0):d(m,[],!0);else{const B=typeof localStorage<"u"?localStorage.getItem("doc_author"):"";B&&d(f,B,!0)}});let S=x(!1),q=x(!1),y=x(""),j=x(null);Lt(()=>{if(s(c)==="unregistered"&&d(c,"in_progress"),!a()){const B=localStorage.getItem("doc_author");B&&d(f,B,!0)}}),zt(()=>{s(c)==="done"&&!s(p)&&d(p,new Date().toISOString().split("T")[0],!0)});async function z(B){const X=Array.from(B.target.files);if(X.length!==0){d(S,!0);try{for(const Se of X){const me=await Ws(Se);s(h).push({file_path:me.file_path,filename:me.filename,media_type:me.media_type})}}catch(Se){console.error("Upload failed",Se),alert("Failed to upload attachment")}finally{d(S,!1),B.target.value=""}}}function b(){d(j,[...s(_),...s(h)],!0)}async function E(B,X){if(X)s(h).splice(B,1);else{if(!confirm("Permanently delete this attachment?"))return;const Se=s(_)[B];try{await ml(Se.id),s(_).splice(B,1)}catch(me){console.error("Failed to delete attachment",me),alert("Failed to delete attachment")}}}async function D(B){B.preventDefault(),d(q,!0),d(y,"");try{s(f)&&localStorage.setItem("doc_author",s(f));const X={name:s(r),description:s(n),type:s(l),status:s(c),registration_date:s(u)||void 0,content:s(v),author:s(f),done_date:s(p)||void 0,attachments:s(h),tags:s(m)};a()?await vl(a().id,X):await ol(X),a()||(d(r,""),d(n,""),d(l,"plan"),d(c,"in_progress"),d(u,""),d(v,""),d(f,localStorage.getItem("doc_author")||"",!0),d(p,""),d(h,[],!0),d(m,[],!0)),e.onDocumentCreated()}catch(X){console.error("Failed to save document:",X),d(y,"Failed to save document. Please try again.")}finally{d(q,!1)}}var M=iu(),$=o(M),Y=o($),R=i($,2),W=o(R),Z=i(o(W),2),F=o(Z),O=i(o(F),2);O.__change=z;var se=i(F,2);{var ae=B=>{var X=Xv();X.__click=b,g(B,X)};I(se,B=>{(s(_).length>0||s(h).length>0)&&B(ae)})}var ye=i(Z,2);{var ge=B=>{var X=Zv();g(B,X)};I(ye,B=>{s(S)&&B(ge)})}var ke=i(ye,2);{var be=B=>{var X=Vv(),Se=o(X);U(()=>T(Se,s(y))),g(B,X)};I(ke,B=>{s(y)&&B(be)})}var oe=i(ke,2);{var je=B=>{var X=eu(),Se=o(X);ze(Se,17,()=>s(_),Ue,(De,Ae,$e)=>{var Be=Qv(),Ge=o(Be),at=o(Ge),ot=i(Ge,2);ot.__click=()=>E($e,!1),U(()=>{He(Ge,"title",s(Ae).filename),T(at,s(Ae).filename)}),g(De,Be)});var me=i(Se,2);ze(me,17,()=>s(h),Ue,(De,Ae,$e)=>{var Be=Kv(),Ge=o(Be),at=o(Ge),ot=i(Ge,2);ot.__click=()=>E($e,!0),U(()=>{He(Ge,"title",s(Ae).filename),T(at,`(New) ${s(Ae).filename??""}`)}),g(De,Be)}),g(B,X)};I(oe,B=>{(s(_).length>0||s(h).length>0)&&B(je)})}var qe=i(W,2),ne=i(o(qe),2),k=i(qe,2),N=i(o(k),2),K=i(k,2);{var Q=B=>{var X=lu(),Se=o(X),me=o(Se),De=i(Se,2);ze(De,21,()=>a().tasks,Ue,(Ae,$e)=>{var Be=ru(),Ge=o(Be),at=i(o(Ge),2),ot=o(at),ut=i(at,2),Tt=o(ut),Jt=i(Ge,2),vt=o(Jt),st=o(vt),dt=i(o(st),2),Rt=o(dt),yt=i(st,2),ft=i(o(yt),2),jt=o(ft),$t=i(yt,2),Xt=i(o($t),2),wt=o(Xt),Pt=i(vt,2),ta=o(Pt),Oa=o(ta),Ta=i(ta,2);{var Wa=oa=>{var Ne=su();ze(Ne,21,()=>s($e).parts,Ue,(et,pt)=>{var Ft=au(),Qe=o(Ft),Zt=o(Qe),qt=i(Qe,2),Bt=o(qt),aa=i(qt,2);{var qa=it=>{var ct=tu(),Et=o(ct);U((Nt,Ut)=>T(Et,`${Nt??""} x ${Ut??""}`),[()=>Math.round(s(pt).width),()=>Math.round(s(pt).height)]),g(it,ct)};I(aa,it=>{(s(pt).width||s(pt).height)&&it(qa)})}U(()=>{T(Zt,s(pt).name),T(Bt,`[${s(pt).registration_number??""}]`)}),g(et,Ft)}),g(oa,Ne)},is=oa=>{var Ne=nu();g(oa,Ne)};I(Ta,oa=>{s($e).parts?.length>0?oa(Wa):oa(is,!1)})}U(()=>{T(ot,s($e).name),Le(ut,1,`task-status-badge ${s($e).status??""}`,"svelte-f0yvr0"),T(Tt,s($e).status),T(Rt,s($e).assignee||"Unassigned"),T(jt,s($e).material?.name||"Unknown"),He(Xt,"title",s($e).gnc_file_path),T(wt,s($e).gnc_file_path||"N/A"),T(Oa,`Linked Parts (${(s($e).parts?.length||0)??""})`)}),g(Ae,Be)}),U(()=>T(me,`Tasks (${a().tasks.length??""})`)),g(B,X)};I(K,B=>{a()?.tasks?.length>0&&B(Q)})}var fe=i(K,2),G=i(o(fe),2);xv(G,{get selectedTags(){return s(m)},set selectedTags(B){d(m,B,!0)}});var V=i(fe,2),re=i(o(V),2),de=i(V,2),J=o(de),ee=i(o(J),2),he=o(ee);he.value=he.__value="plan";var _e=i(he);_e.value=_e.__value="mail";var ce=i(_e);ce.value=ce.__value="other";var te=i(J,2),pe=i(o(te),2),ve=o(pe);ve.value=ve.__value="in_progress";var we=i(ve);we.value=we.__value="done";var xe=i(de,2),H=o(xe),le=i(o(H),2),A=i(H,2),P=i(o(A),2),ue=i(xe,2),Pe=i(o(ue),2),L=i(ue,2),C=o(L);C.__click=function(...B){e.onCancel?.apply(this,B)};var ie=i(C,2),Re=o(ie),Ie=i(R,2);{let B=rt(()=>!!s(j)),X=rt(()=>s(j)||[]);Jl(Ie,{get isOpen(){return s(B)},close:()=>d(j,null),get attachments(){return s(X)}})}U(()=>{T(Y,a()?"Edit Document":"New Document"),P.disabled=s(c)!=="done",ie.disabled=s(q)||s(S),T(Re,s(q)?"Saving...":a()?"Save Changes":"Register Document")}),ua("submit",R,D),Ce(ne,()=>s(r),B=>d(r,B)),Ce(N,()=>s(n),B=>d(n,B)),Ce(re,()=>s(v),B=>d(v,B)),ht(ee,()=>s(l),B=>d(l,B)),ht(pe,()=>s(c),B=>d(c,B)),Ce(le,()=>s(u),B=>d(u,B)),Ce(P,()=>s(p),B=>d(p,B)),Ce(Pe,()=>s(f),B=>d(f,B)),g(t,M),Ve()}tt(["change","click"]);var cu=w('<div class="page-container svelte-14q2aho"><div class="actions-bar svelte-14q2aho"><button class="add-btn svelte-14q2aho"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> New Document</button></div> <!> <!></div>');function vu(t){let e=x(!1),a=x(null),r=x(null);function n(){d(a,null),d(e,!0)}function l(m){d(a,m,!0),d(e,!0)}function c(){d(e,!1),d(a,null)}function u(){c(),s(r)&&s(r).refresh&&s(r).refresh()}var v=cu(),f=o(v),p=o(f);p.__click=n;var _=i(f,2);Cn(Jv(_,{onEdit:l}),m=>d(r,m,!0),()=>s(r));var h=i(_,2);Rn(h,{get isOpen(){return s(e)},close:c,children:(m,S)=>{ou(m,{onDocumentCreated:u,onCancel:c,get document(){return s(a)}})},$$slots:{default:!0}}),g(t,v)}tt(["click"]);var uu=w('<span class="att-badge svelte-v5qqzx"> </span>'),du=w('<div class="attachments-preview svelte-v5qqzx"></div>'),fu=w('<div class="entry-form svelte-v5qqzx"><input type="text" placeholder="Author" class="author-input svelte-v5qqzx"/> <select class="svelte-v5qqzx"><option>Info</option><option>Warning</option><option>Error</option></select> <textarea placeholder="Message..." class="svelte-v5qqzx"></textarea> <div class="file-input-group svelte-v5qqzx"><input type="file" multiple class="svelte-v5qqzx"/> <!></div> <button>Save</button></div>'),pu=w("<p>Loading...</p>"),hu=w('<p class="empty">No entries found.</p>'),_u=w('<span class="doc-ref svelte-v5qqzx"> </span>'),gu=w('<a target="_blank" class="svelte-v5qqzx"><img class="svelte-v5qqzx"/></a>'),mu=w('<a target="_blank" class="svelte-v5qqzx"> </a>'),bu=w('<div class="attachment-thumb svelte-v5qqzx"><!></div>'),yu=w('<div class="entry-attachments svelte-v5qqzx"></div>'),wu=w('<div><div class="entry-header svelte-v5qqzx"><span> </span> <span class="author svelte-v5qqzx"> </span> <span class="date"> </span> <!> <div class="actions svelte-v5qqzx"><button class="edit-btn svelte-v5qqzx">âœï¸ Edit</button> <button class="status-btn svelte-v5qqzx"> </button> <button class="delete-btn svelte-v5qqzx">ðŸ—‘</button></div></div> <p class="text svelte-v5qqzx"> </p> <!></div>'),ku=w('<div class="journal-container svelte-v5qqzx"><div class="toolbar svelte-v5qqzx"><div class="filters svelte-v5qqzx"><select class="svelte-v5qqzx"><option>All Types</option><option>Info</option><option>Warning</option><option>Error</option></select> <select class="svelte-v5qqzx"><option>All Statuses</option><option>Pending</option><option>Done</option></select></div> <button class="add-btn svelte-v5qqzx"> </button></div> <!> <div class="entries-list svelte-v5qqzx"><!></div> <!></div>');function xu(t,e){Ze(e,!0);let a=x(Te([])),r=x(!1),n=x(null),l=x(""),c=x(""),u=x(!1),v=x(""),f=x("info"),p=x(""),_=x(Te([]));async function h(){d(r,!0);try{d(a,await fl(s(l),s(c)),!0)}catch(k){console.error(k)}finally{d(r,!1)}}Lt(()=>{d(p,localStorage.getItem("journal_author")||"",!0),h();const k=()=>{h()};return window.addEventListener("journal-entries-updated",k),()=>{window.removeEventListener("journal-entries-updated",k)}});async function m(k){const N=Array.from(k.target.files);if(N.length!==0){for(const K of N)try{const Q=await Ws(K);s(_).push(Q)}catch(Q){console.error("Upload failed",Q),alert("Upload failed for "+K.name)}k.target.value=""}}async function S(){if(!(!s(v)&&s(_).length===0)){s(p)&&localStorage.setItem("journal_author",s(p));try{await Dn({text:s(v),type:s(f),status:"pending",author:s(p),attachments:s(_)}),d(v,""),d(_,[],!0),d(u,!1),h()}catch(k){console.error("Failed to add entry",k)}}}async function q(k){const N=k.status==="pending"?"done":"pending";try{await Xs(k.id,{status:N}),h()}catch(K){console.error(K)}}async function y(k){if(confirm("Are you sure?"))try{await pl(k),h()}catch(N){console.error(N)}}function j(k){d(n,k,!0)}function z(){d(n,null),h()}zt(()=>{h()});var b=ku(),E=o(b),D=o(E),M=o(D);M.__change=h;var $=o(M);$.value=$.__value="";var Y=i($);Y.value=Y.__value="info";var R=i(Y);R.value=R.__value="warning";var W=i(R);W.value=W.__value="error";var Z=i(M,2);Z.__change=h;var F=o(Z);F.value=F.__value="";var O=i(F);O.value=O.__value="pending";var se=i(O);se.value=se.__value="done";var ae=i(D,2);ae.__click=()=>d(u,!s(u));var ye=o(ae),ge=i(E,2);{var ke=k=>{var N=fu(),K=o(N),Q=i(K,2),fe=o(Q);fe.value=fe.__value="info";var G=i(fe);G.value=G.__value="warning";var V=i(G);V.value=V.__value="error";var re=i(Q,2),de=i(re,2),J=o(de);J.__change=m;var ee=i(J,2);{var he=ce=>{var te=du();ze(te,21,()=>s(_),Ue,(pe,ve)=>{var we=uu(),xe=o(we);U(()=>T(xe,s(ve).filename)),g(pe,we)}),g(ce,te)};I(ee,ce=>{s(_).length>0&&ce(he)})}var _e=i(de,2);_e.__click=S,Ce(K,()=>s(p),ce=>d(p,ce)),ht(Q,()=>s(f),ce=>d(f,ce)),Ce(re,()=>s(v),ce=>d(v,ce)),g(k,N)};I(ge,k=>{s(u)&&k(ke)})}var be=i(ge,2),oe=o(be);{var je=k=>{var N=pu();g(k,N)},qe=k=>{var N=Ke(),K=Ee(N);{var Q=G=>{var V=hu();g(G,V)},fe=G=>{var V=Ke(),re=Ee(V);ze(re,17,()=>s(a),Ue,(de,J)=>{var ee=wu(),he=o(ee),_e=o(he),ce=o(_e),te=i(_e,2),pe=o(te),ve=i(te,2),we=o(ve),xe=i(ve,2);{var H=Ie=>{var B=_u(),X=o(B);U(()=>T(X,`Ref: Doc #${s(J).document_id??""}`)),g(Ie,B)};I(xe,Ie=>{s(J).document_id&&Ie(H)})}var le=i(xe,2),A=o(le);A.__click=()=>j(s(J));var P=i(A,2);P.__click=()=>q(s(J));var ue=o(P),Pe=i(P,2);Pe.__click=()=>y(s(J).id);var L=i(he,2),C=o(L),ie=i(L,2);{var Re=Ie=>{var B=yu();ze(B,21,()=>s(J).attachments,Ue,(X,Se)=>{var me=bu(),De=o(me);{var Ae=Be=>{var Ge=gu(),at=o(Ge);U(()=>{He(Ge,"href",s(Se).file_path),He(at,"src",s(Se).file_path),He(at,"alt",s(Se).filename)}),g(Be,Ge)},$e=Be=>{var Ge=mu(),at=o(Ge);U(()=>{He(Ge,"href",s(Se).file_path),T(at,`ðŸ“„ ${s(Se).filename??""}`)}),g(Be,Ge)};I(De,Be=>{s(Se).media_type&&s(Se).media_type.startsWith("image/")?Be(Ae):Be($e,!1)})}g(X,me)}),g(Ie,B)};I(ie,Ie=>{s(J).attachments&&s(J).attachments.length>0&&Ie(Re)})}U(()=>{Le(ee,1,`entry-card ${s(J).type??""} ${s(J).status??""}`,"svelte-v5qqzx"),Le(_e,1,`badge ${s(J).type??""}`,"svelte-v5qqzx"),T(ce,s(J).type),T(pe,s(J).author||"Unknown"),T(we,s(J).created_at),T(ue,s(J).status==="pending"?"â˜‘ Mark Done":"â†© Reopen"),T(C,s(J).text)}),g(de,ee)}),g(G,V)};I(K,G=>{s(a).length===0?G(Q):G(fe,!1)},!0)}g(k,N)};I(oe,k=>{s(r)?k(je):k(qe,!1)})}var ne=i(be,2);{let k=rt(()=>!!s(n)),N=rt(()=>s(n)?.document_id);Wl(ne,{get isOpen(){return s(k)},close:z,get documentId(){return s(N)},documentName:"Journal Entry",get entry(){return s(n)}})}U(()=>T(ye,s(u)?"Cancel":"+ New Entry")),ht(M,()=>s(l),k=>d(l,k)),ht(Z,()=>s(c),k=>d(c,k)),g(t,b),Ve()}tt(["change","click"]);var Su=w('<div class="loading-state svelte-g0byll">Loading tasks...</div>'),Tu=w('<div class="empty-state svelte-g0byll">Enter an assignee name above to view their tasks.</div>'),qu=w('<div class="empty-state svelte-g0byll">No pending or planned tasks found for this assignee.</div>'),Eu=w('<div><div class="task-info svelte-g0byll"><span> </span> <button class="btn-done svelte-g0byll" title="Mark as done">âœ“</button> <span class="task-name svelte-g0byll"> </span></div></div>'),ju=w('<div class="material-group svelte-g0byll"><div class="material-header svelte-g0byll"><span class="material-name svelte-g0byll"> </span> <span class="task-count svelte-g0byll"> </span></div> <div class="tasks-list svelte-g0byll"></div></div>'),Pu=w('<div class="doc-group svelte-g0byll"><div class="doc-header svelte-g0byll"><h3 class="svelte-g0byll"> </h3> <span> </span></div> <!></div>'),Au=w('<div class="documents-list svelte-g0byll"></div>'),Cu=w('<div class="job-view svelte-g0byll"><div class="assignee-filter svelte-g0byll"><label for="assignee" class="svelte-g0byll">Assignee:</label> <input id="assignee" type="text" placeholder="Enter assignee name..." class="svelte-g0byll"/> <button class="btn-load svelte-g0byll"> </button></div> <!></div>');function Du(t,e){Ze(e,!0);let a=x(Te([])),r=x(""),n=x(!1);Lt(()=>{d(r,localStorage.getItem("job_assignee")||"",!0),s(r)&&l()});async function l(){if(!s(r).trim()){d(a,[],!0);return}d(n,!0);try{const j=await Js();d(a,j.map(z=>({...z,tasks:(z.tasks||[]).filter(b=>b.assignee&&b.assignee.toLowerCase().includes(s(r).toLowerCase())&&(b.status==="pending"||b.status==="planned"))})).filter(z=>z.tasks.length>0),!0)}catch(j){console.error(j)}finally{d(n,!1)}}function c(){localStorage.setItem("job_assignee",s(r)),l()}async function u(j){try{await bs(j,{status:"done"}),await l()}catch(z){console.error(z),alert("Failed to update task status")}}function v(j){const b=[...j.tasks||[]].sort((D,M)=>D.status==="pending"&&M.status!=="pending"?-1:D.status!=="pending"&&M.status==="pending"?1:0),E={};return b.forEach(D=>{const M=D.material?D.material.name:"(No Material)";E[M]||(E[M]=[]),E[M].push(D)}),E}var f=Cu(),p=o(f),_=i(o(p),2);_.__change=c;var h=i(_,2);h.__click=l;var m=o(h),S=i(p,2);{var q=j=>{var z=Su();g(j,z)},y=j=>{var z=Ke(),b=Ee(z);{var E=M=>{var $=Tu();g(M,$)},D=M=>{var $=Ke(),Y=Ee($);{var R=Z=>{var F=qu();g(Z,F)},W=Z=>{var F=Au();ze(F,21,()=>s(a),O=>O.id,(O,se)=>{const ae=rt(()=>v(s(se)));var ye=Pu(),ge=o(ye),ke=o(ge),be=o(ke),oe=i(ke,2),je=o(oe),qe=i(ge,2);ze(qe,17,()=>Object.entries(s(ae)),Ue,(ne,k)=>{var N=rt(()=>mn(s(k),2));let K=()=>s(N)[0],Q=()=>s(N)[1];var fe=ju(),G=o(fe),V=o(G),re=o(V),de=i(V,2),J=o(de),ee=i(G,2);ze(ee,21,Q,he=>he.id,(he,_e)=>{var ce=Eu(),te=o(ce),pe=o(te),ve=o(pe),we=i(pe,2);we.__click=()=>u(s(_e).id);var xe=i(we,2),H=o(xe);U(()=>{Le(ce,1,`task-row ${s(_e).status??""}`,"svelte-g0byll"),Le(pe,1,`task-status-badge ${s(_e).status??""}`,"svelte-g0byll"),T(ve,s(_e).status),T(H,s(_e).name)}),g(he,ce)}),U(()=>{T(re,`ðŸ“¦ ${K()??""}`),T(J,`${Q().length??""} task${Q().length!==1?"s":""}`)}),g(ne,fe)}),U(()=>{T(be,s(se).name),Le(oe,1,`doc-badge ${s(se).type??""}`,"svelte-g0byll"),T(je,s(se).type)}),g(O,ye)}),g(Z,F)};I(Y,Z=>{s(a).length===0?Z(R):Z(W,!1)},!0)}g(M,$)};I(b,M=>{s(r).trim()?M(D,!1):M(E)},!0)}g(j,z)};I(S,j=>{s(n)?j(q):j(y,!1)})}U(j=>{h.disabled=j,T(m,s(n)?"Loading...":"Load")},[()=>s(n)||!s(r).trim()]),Ce(_,()=>s(r),j=>d(r,j)),g(t,f),Ve()}tt(["change","click"]);const bt=Te({userRole:(typeof window<"u"?localStorage.getItem("user_role"):"admin")||"admin",configStatus:"unknown",currentDocument:null,settings:{ocrUrl:"",docNameRegex:"",syncMihtavPath:"",syncSidraPath:""},partTray:[],trayVisible:!1});function zu(t){bt.configStatus=t}function Ru(t){const e=bt.partTray.find(a=>a.part.id===t.id);e?e.quantity+=1:bt.partTray.push({part:t,quantity:1}),bt.trayVisible=!0}function Xl(t){bt.partTray=bt.partTray.filter(e=>e.part.id!==t)}function cr(t,e){const a=bt.partTray.find(r=>r.part.id===t);a&&(a.quantity+=e,a.quantity<=0&&Xl(t))}function vr(){bt.partTray=[]}function tn(){bt.trayVisible=!bt.trayVisible}var Nu=w('<img class="thumbnail-img svelte-10wfxqz"/>'),Mu=w('<div class="thumbnail card svelte-10wfxqz" role="button" tabindex="0"><div class="preview svelte-10wfxqz"><!> <div class="placeholder-geo svelte-10wfxqz"><span>âš™ï¸</span></div> <div class="overlay-actions svelte-10wfxqz"><button class="action-btn svelte-10wfxqz" title="Edit Part">âœï¸</button> <button class="action-btn svelte-10wfxqz" title="Preview">ðŸ‘ï¸</button> <button class="action-btn svelte-10wfxqz" title="Add to Order">+</button> <button class="action-btn svelte-10wfxqz" title="Filter in Docs">ðŸ”</button></div></div> <div class="info svelte-10wfxqz"><h4 class="name svelte-10wfxqz"> </h4> <div class="card-meta svelte-10wfxqz"><div class="meta-item svelte-10wfxqz"><span class="label svelte-10wfxqz">Registration:</span> <span class="value svelte-10wfxqz"> </span></div> <div class="meta-item svelte-10wfxqz"><span class="label svelte-10wfxqz">Dimensions:</span> <span class="value svelte-10wfxqz"> </span></div> <div class="meta-item svelte-10wfxqz"><span class="label svelte-10wfxqz">Material:</span> <span class="value svelte-10wfxqz"> </span></div></div></div></div>');function Ou(t,e){Ze(e,!0);let a=rt(()=>e.part.material?e.part.material.name:"Unknown Material"),r=rt(()=>`${e.part.width||"?"} x ${e.part.height||"?"}`);function n(O){O.stopPropagation(),e.onedit&&e.onedit(e.part)}function l(O){O.stopPropagation(),e.onpreview&&e.onpreview(e.part)}var c=Mu();c.__click=function(...O){e.onclick?.apply(this,O)},c.__keydown=O=>O.key==="Enter"&&e.onclick&&e.onclick();var u=o(c),v=o(u);{var f=O=>{var se=Nu();U(()=>{He(se,"src",`/uploads/thumbnails/${(e.part.registration_number||e.part.id)??""}.svg`),He(se,"alt",e.part.name)}),ua("error",se,ae=>{ae.currentTarget.style.display="none"}),g(O,se)};I(v,O=>{e.part.gnc_file_path&&O(f)})}var p=i(v,2),_=i(p,2),h=o(_);h.__click=n;var m=i(h,2);m.__click=l;var S=i(m,2);S.__click=O=>{O.stopPropagation(),e.onclick&&e.onclick()};var q=i(S,2);q.__click=O=>{O.stopPropagation(),e.onfilter&&e.onfilter(e.part)};var y=i(u,2),j=o(y),z=o(j),b=i(j,2),E=o(b),D=i(o(E),2),M=o(D),$=i(E,2),Y=i(o($),2),R=o(Y),W=i($,2),Z=i(o(W),2),F=o(Z);U(()=>{as(p,e.part.gnc_file_path?"display: none;":""),He(j,"title",e.part.name),T(z,e.part.name),T(M,e.part.registration_number||"-"),T(R,`${s(r)??""} mm`),T(F,s(a))}),g(t,c),Ve()}tt(["click","keydown"]);var Iu=w('<div class="tray-item svelte-15dteus"><img class="thumb svelte-15dteus"/> <div class="details svelte-15dteus"><span class="name svelte-15dteus"> </span> <div class="qty-controls svelte-15dteus"><button class="svelte-15dteus">-</button> <span class="qty svelte-15dteus"> </span> <button class="svelte-15dteus">+</button></div></div> <button class="remove-btn svelte-15dteus" title="Remove">ðŸ—‘ï¸</button></div>'),Lu=w('<div class="empty svelte-15dteus">Tray is empty. Add parts from the library.</div>'),$u=w('<div class="tray-backdrop svelte-15dteus"></div> <aside class="tray-panel svelte-15dteus"><header class="svelte-15dteus"><h3 class="svelte-15dteus">Order Tray</h3> <button class="close-btn svelte-15dteus">&times;</button></header> <div class="items svelte-15dteus"><!> <!></div> <footer class="svelte-15dteus"><div class="input-group svelte-15dteus"><label for="order-name" class="svelte-15dteus">Order Name</label> <input id="order-name" type="text" placeholder="e.g. ORDER-2024-001" class="svelte-15dteus"/></div> <div class="actions svelte-15dteus"><button class="clear-btn svelte-15dteus">Clear</button> <button class="create-btn svelte-15dteus"> </button></div></footer></aside>',1);function Fu(t,e){Ze(e,!0);let a=x(!1),r=x("");async function n(){if(bt.partTray.length!==0){if(!s(r))return alert("Please enter an Order Name");d(a,!0);try{const v=bt.partTray.map(f=>({id:f.part.id,qty:f.quantity}));await wl(v,s(r)),vr(),tn(),alert("Order created successfully!")}catch(v){console.error(v),alert("Failed to create order: "+v.message)}finally{d(a,!1)}}}var l=Ke(),c=Ee(l);{var u=v=>{var f=$u(),p=Ee(f);p.__click=function(...R){tn?.apply(this,R)};var _=i(p,2),h=o(_),m=i(o(h),2);m.__click=function(...R){tn?.apply(this,R)};var S=i(h,2),q=o(S);ze(q,17,()=>bt.partTray,R=>R.part.id,(R,W)=>{var Z=Iu(),F=o(Z),O=i(F,2),se=o(O),ae=o(se),ye=i(se,2),ge=o(ye);ge.__click=()=>cr(s(W).part.id,-1);var ke=i(ge,2),be=o(ke),oe=i(ke,2);oe.__click=()=>cr(s(W).part.id,1);var je=i(O,2);je.__click=()=>Xl(s(W).part.id),U(()=>{He(F,"src",s(W).part.thumbnail_url||"/placeholder.png"),He(F,"alt",s(W).part.name),T(ae,s(W).part.name),ge.disabled=s(W).quantity<=1,T(be,s(W).quantity)}),g(R,Z)});var y=i(q,2);{var j=R=>{var W=Lu();g(R,W)};I(y,R=>{bt.partTray.length===0&&R(j)})}var z=i(S,2),b=o(z),E=i(o(b),2),D=i(b,2),M=o(D);M.__click=function(...R){vr?.apply(this,R)};var $=i(M,2);$.__click=n;var Y=o($);U(()=>{M.disabled=bt.partTray.length===0,$.disabled=bt.partTray.length===0||s(a)||!s(r),T(Y,s(a)?"Creating...":"Create Order")}),Ce(E,()=>s(r),R=>d(r,R)),g(v,f)};I(c,v=>{bt.trayVisible&&v(u)})}g(t,l),Ve()}tt(["click"]);var Bu=w('<div class="message svelte-1y39gna"> </div>'),Uu=w('<div class="modal-overlay svelte-1y39gna"><div class="modal svelte-1y39gna"><h2 class="svelte-1y39gna">Scanning Library</h2> <div class="progress-container svelte-1y39gna"><div class="progress-bar svelte-1y39gna"><div class="progress-fill svelte-1y39gna"></div></div> <span class="progress-text svelte-1y39gna"> </span></div> <div class="status svelte-1y39gna"><strong>Status:</strong> </div> <!> <div class="actions svelte-1y39gna"><button class="svelte-1y39gna"> </button></div></div></div>');function Gu(t,e){Ze(e,!0);const a=rl();let r=_t(e,"show",15,!1),n=_t(e,"progress",3,0),l=_t(e,"status",3,""),c=_t(e,"message",3,"");function u(){l()!=="scanning"&&(r(!1),a("close"))}var v=Ke(),f=Ee(v);{var p=_=>{var h=Uu();h.__click=u;var m=o(h);m.__click=W=>W.stopPropagation();var S=i(o(m),2),q=o(S),y=o(q),j=i(q,2),z=o(j),b=i(S,2),E=i(o(b)),D=i(b,2);{var M=W=>{var Z=Bu(),F=o(Z);U(()=>T(F,c())),g(W,Z)};I(D,W=>{c()&&W(M)})}var $=i(D,2),Y=o($);Y.__click=u;var R=o(Y);U(()=>{as(y,`width: ${n()??""}%`),T(z,`${n()??""}%`),T(E,` ${l()??""}`),Y.disabled=l()==="scanning",T(R,l()==="scanning"?"Scanning...":"Close")}),g(_,h)};I(f,_=>{r()&&_(p)})}g(t,v),Ve()}tt(["click"]);var Hu=w("<option> </option>"),Yu=w('<div class="modal-overlay svelte-1fna2hh"><div class="modal svelte-1fna2hh"><h2 class="svelte-1fna2hh">Edit Part</h2> <div class="form svelte-1fna2hh"><div class="field svelte-1fna2hh"><label for="name" class="svelte-1fna2hh">Name</label> <input id="name" type="text" class="svelte-1fna2hh"/></div> <div class="field svelte-1fna2hh"><label for="reg" class="svelte-1fna2hh">Registration Number</label> <input id="reg" type="text" class="svelte-1fna2hh"/></div> <div class="field svelte-1fna2hh"><label for="width" class="svelte-1fna2hh">Width (mm)</label> <input id="width" type="number" step="0.01" class="svelte-1fna2hh"/></div> <div class="field svelte-1fna2hh"><label for="height" class="svelte-1fna2hh">Height (mm)</label> <input id="height" type="number" step="0.01" class="svelte-1fna2hh"/></div> <div class="field svelte-1fna2hh"><label for="material" class="svelte-1fna2hh">Material</label> <select id="material" class="svelte-1fna2hh"><option>No Material</option><!></select></div></div> <div class="actions svelte-1fna2hh"><button class="secondary svelte-1fna2hh">Cancel</button> <button class="primary svelte-1fna2hh">Save</button></div></div></div>');function Wu(t,e){Ze(e,!0);let a=_t(e,"show",15,!1),r=_t(e,"part",3,null),n=x(Te([])),l=x(Te({name:"",registration_number:"",width:0,height:0,material_id:null}));zt(()=>{a()&&r()&&(d(l,{name:r().name||"",registration_number:r().registration_number||"",width:r().width||0,height:r().height||0,material_id:r().material_id||null},!0),c())});async function c(){try{d(n,await Sa(),!0)}catch(h){console.error("Failed to load materials:",h)}}function u(){a(!1)}function v(){e.onsave&&e.onsave(s(l)),u()}var f=Ke(),p=Ee(f);{var _=h=>{var m=Yu();m.__click=u;var S=o(m);S.__click=ae=>ae.stopPropagation();var q=i(o(S),2),y=o(q),j=i(o(y),2),z=i(y,2),b=i(o(z),2),E=i(z,2),D=i(o(E),2),M=i(E,2),$=i(o(M),2),Y=i(M,2),R=i(o(Y),2),W=o(R);W.value=(W.__value=null)??"";var Z=i(W);ze(Z,17,()=>s(n),Ue,(ae,ye)=>{var ge=Hu(),ke=o(ge),be={};U(()=>{T(ke,s(ye).name),be!==(be=s(ye).id)&&(ge.value=(ge.__value=s(ye).id)??"")}),g(ae,ge)});var F=i(q,2),O=o(F);O.__click=u;var se=i(O,2);se.__click=v,Ce(j,()=>s(l).name,ae=>s(l).name=ae),Ce(b,()=>s(l).registration_number,ae=>s(l).registration_number=ae),Ce(D,()=>s(l).width,ae=>s(l).width=ae),Ce($,()=>s(l).height,ae=>s(l).height=ae),ht(R,()=>s(l).material_id,ae=>s(l).material_id=ae),g(h,m)};I(p,h=>{a()&&h(_)})}g(t,f),Ve()}tt(["click"]);var Ju=w('<img class="preview-img svelte-17z6zdn"/>'),Xu=w('<div class="no-preview svelte-17z6zdn">No preview available</div>'),Zu=w('<div class="modal-backdrop svelte-17z6zdn"><div class="modal svelte-17z6zdn"><header class="svelte-17z6zdn"><h3 class="svelte-17z6zdn"> </h3> <button class="close-btn svelte-17z6zdn">&times;</button></header> <div class="content svelte-17z6zdn"><!> <div class="details svelte-17z6zdn"><p><strong>Registration:</strong> </p> <p><strong>Dimensions:</strong> </p></div></div></div></div>');function Vu(t,e){Ze(e,!0);let a=_t(e,"show",15,!1);function r(){a(!1)}function n(v){v.key==="Escape"&&r()}var l=Ke();ua("keydown",cn,n);var c=Ee(l);{var u=v=>{var f=Zu();f.__click=r;var p=o(f);p.__click=Y=>Y.stopPropagation();var _=o(p),h=o(_),m=o(h),S=i(h,2);S.__click=r;var q=i(_,2),y=o(q);{var j=Y=>{var R=Ju();U(()=>{He(R,"src",`/uploads/thumbnails/${(e.part.registration_number||e.part.id)??""}.svg`),He(R,"alt",e.part.name)}),g(Y,R)},z=Y=>{var R=Xu();g(Y,R)};I(y,Y=>{e.part.gnc_file_path?Y(j):Y(z,!1)})}var b=i(y,2),E=o(b),D=i(o(E)),M=i(E,2),$=i(o(M));U(()=>{T(m,e.part.name),T(D,` ${(e.part.registration_number||"-")??""}`),T($,` ${(e.part.width||"?")??""} x ${(e.part.height||"?")??""} mm`)}),g(v,f)};I(c,v=>{a()&&e.part&&v(u)})}g(t,l),Ve()}tt(["click"]);var Qu=w("<option> </option>"),Ku=w('<div class="loading svelte-xfu7xu">Loading parts...</div>'),ed=w('<div class="empty svelte-xfu7xu">No parts found matching filters.</div>'),td=w("<div></div>"),ad=w('<div class="parts-layout svelte-xfu7xu"><aside class="sidebar svelte-xfu7xu"><h3 class="svelte-xfu7xu">Filters</h3> <div class="filter-group svelte-xfu7xu"><label for="search" class="svelte-xfu7xu">Search</label> <input id="search" type="text" placeholder="Name or Reg #" class="svelte-xfu7xu"/></div> <div class="filter-group svelte-xfu7xu"><label for="material" class="svelte-xfu7xu">Material</label> <select id="material" class="svelte-xfu7xu"><option>All Materials</option><!></select></div> <div class="filter-group svelte-xfu7xu"><span class="filter-label svelte-xfu7xu">Width (mm)</span> <div class="range svelte-xfu7xu"><input type="number" placeholder="Min" class="svelte-xfu7xu"/> <span>-</span> <input type="number" placeholder="Max" class="svelte-xfu7xu"/></div></div> <div class="filter-group svelte-xfu7xu"><span class="filter-label svelte-xfu7xu">Height (mm)</span> <div class="range svelte-xfu7xu"><input type="number" placeholder="Min" class="svelte-xfu7xu"/> <span>-</span> <input type="number" placeholder="Max" class="svelte-xfu7xu"/></div></div> <button class="reset-btn svelte-xfu7xu">Reset Filters</button></aside> <main class="content svelte-xfu7xu"><header class="svelte-xfu7xu"><div class="title-row svelte-xfu7xu"><h2 class="svelte-xfu7xu">Parts Library</h2></div> <div class="actions svelte-xfu7xu"><button>ðŸ”„ Rescan Library</button> <button>â†» Refresh</button></div></header> <!></main> <!> <!> <!> <!></div>');function sd(t,e){Ze(e,!0);let a=x(Te([])),r=x(Te([])),n=x(""),l=x(""),c=x(""),u=x(""),v=x(""),f=x(""),p=x(!1),_=x(0);const h=50;let m=x(!1),S=x(0),q=x(""),y=x(""),j=x(!1),z=x(null),b=x(!1),E=x(null);async function D(){d(p,!0);try{const H={};s(n)&&(H.search=s(n)),s(l)&&(H.material_id=s(l)),s(c)&&(H.min_width=s(c)),s(u)&&(H.max_width=s(u)),s(v)&&(H.min_height=s(v)),s(f)&&(H.max_height=s(f));const[le,A]=await Promise.all([Sl(s(_)*h,h,H),s(r).length===0?Sa():Promise.resolve(s(r))]);d(a,le,!0),s(r).length===0&&d(r,A,!0)}catch(H){console.error(H),alert("Failed to load parts")}finally{d(p,!1)}}function M(){d(_,0),D()}let $;function Y(){clearTimeout($),$=setTimeout(()=>{M()},500)}async function R(){d(m,!0),d(S,0),d(q,"starting"),d(y,"Initializing scan...");try{await Pl(H=>{d(S,H.percent||0,!0),d(q,H.status||"",!0),d(y,H.message||"",!0)}),s(q)==="complete"&&await D()}catch(H){console.error("Scan error:",H),d(q,"error"),d(y,`Scan failed: ${H.message}`)}}function W(H){d(z,H,!0),d(j,!0)}function Z(H){d(E,H,!0),d(b,!0)}function F(H){sa(`/documents?part_search=${encodeURIComponent(H.name)}`)}async function O(H){try{await Al(s(z).id,H),await D(),alert("Part updated successfully"),d(j,!1)}catch(le){console.error("Update error:",le),alert("Failed to update part")}}Lt(()=>{D()});var se=ad(),ae=o(se),ye=i(o(ae),2),ge=i(o(ye),2);ge.__input=Y;var ke=i(ye,2),be=i(o(ke),2);be.__change=M;var oe=o(be);oe.value=oe.__value="";var je=i(oe);ze(je,17,()=>s(r),Ue,(H,le)=>{var A=Qu(),P=o(A),ue={};U(()=>{T(P,s(le).name),ue!==(ue=s(le).id)&&(A.value=(A.__value=s(le).id)??"")}),g(H,A)});var qe=i(ke,2),ne=i(o(qe),2),k=o(ne);k.__change=M;var N=i(k,4);N.__change=M;var K=i(qe,2),Q=i(o(K),2),fe=o(Q);fe.__change=M;var G=i(fe,4);G.__change=M;var V=i(K,2);V.__click=()=>{d(n,""),d(l,""),d(c,""),d(u,""),d(v,""),d(f,""),M()};var re=i(ae,2),de=o(re),J=i(o(de),2),ee=o(J);ee.__click=R;var he=i(ee,2);he.__click=()=>D();var _e=i(de,2);{var ce=H=>{var le=Ku();g(H,le)},te=H=>{var le=Ke(),A=Ee(le);{var P=Pe=>{var L=ed();g(Pe,L)},ue=Pe=>{var L=td();Le(L,1,"grid grid svelte-xfu7xu"),ze(L,21,()=>s(a),C=>C.id,(C,ie)=>{Ou(C,{get part(){return s(ie)},onclick:()=>Ru(s(ie)),onedit:W,onpreview:Z,onfilter:F})}),g(Pe,L)};I(A,Pe=>{s(a).length===0?Pe(P):Pe(ue,!1)},!0)}g(H,le)};I(_e,H=>{s(p)?H(ce):H(te,!1)})}var pe=i(re,2);Gu(pe,{get status(){return s(q)},get message(){return s(y)},get progress(){return s(S)},get show(){return s(m)},set show(H){d(m,H,!0)}});var ve=i(pe,2);Wu(ve,{get part(){return s(z)},onsave:O,get show(){return s(j)},set show(H){d(j,H,!0)}});var we=i(ve,2);Vu(we,{get part(){return s(E)},get show(){return s(b)},set show(H){d(b,H,!0)}});var xe=i(we,2);Fu(xe,{}),Ce(ge,()=>s(n),H=>d(n,H)),ht(be,()=>s(l),H=>d(l,H)),Ce(k,()=>s(c),H=>d(c,H)),Ce(N,()=>s(u),H=>d(u,H)),Ce(fe,()=>s(v),H=>d(v,H)),Ce(G,()=>s(f),H=>d(f,H)),g(t,se),Ve()}tt(["input","change","click"]);const nd="modulepreload",rd=function(t){return"/"+t},ur={},ld=function(e,a,r){let n=Promise.resolve();if(a&&a.length>0){let v=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");n=v(a.map(f=>{if(f=rd(f),f in ur)return;ur[f]=!0;const p=f.endsWith(".css"),_=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${_}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":nd,p||(h.as="script"),h.crossOrigin="",h.href=f,u&&h.setAttribute("nonce",u),document.head.appendChild(h),p)return new Promise((m,S)=>{h.addEventListener("load",m),h.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return n.then(c=>{for(const u of c||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})};Ai();var id=w('<div class="canvas-container svelte-1eph566"><div class="toolbar svelte-1eph566"><button title="Navigate (Pan)">âœ‹</button> <button title="Select">â†–</button></div>  <canvas class="svelte-1eph566"></canvas> <div class="zoom-controls svelte-1eph566"><button title="Reset Zoom" class="svelte-1eph566">âŸ²</button> <span class="zoom-level svelte-1eph566"> </span></div></div>');function od(t,e){Ze(e,!1);let a=_t(e,"sheet",8,null),r=_t(e,"width",8,800),n=_t(e,"height",8,600);const l=rl();let c=ds(),u=null,v=1,f=ds(1),p=0,_=0,h=ds(!1),m=0,S=0,q=ds("navigate"),y={minX:0,minY:0,maxX:100,maxY:100},j=0,z=0,b=null,E=null;Lt(()=>{s(c)&&(u=s(c).getContext("2d"),console.log("GncCanvas: mounted, ctx:",u),$())});function D(G){let V=1/0,re=1/0,de=-1/0,J=-1/0,ee=!1;G.program_width&&G.program_height&&(V=0,re=0,de=G.program_width,J=G.program_height,ee=!0);let he=0,_e=0;console.log("calculateBounds: sheet.parts.length =",G.parts.length);for(const ce of G.parts){console.log("calculateBounds: part.contours.length =",ce.contours.length);for(const te of ce.contours){console.log("calculateBounds: contour.id =",te.id,"commands.length =",te.commands.length);for(const pe of te.commands)pe.x!==void 0&&(he=pe.x),pe.y!==void 0&&(_e=pe.y),(pe.x!==void 0||pe.y!==void 0)&&(ee=!0,he<V&&(V=he),he>de&&(de=he),_e<re&&(re=_e),_e>J&&(J=_e),console.log("calculateBounds: found point",he,_e,"from cmd.type =",pe.type))}}return console.log("calculateBounds: hasPoints =",ee,"bounds =",{minX:V,minY:re,maxX:de,maxY:J}),ee?{minX:V,minY:re,maxX:de,maxY:J}:{minX:0,minY:0,maxX:100,maxY:100}}function M(G,V){return{x:(G-j)/v+y.minX,y:(n()-V-z)/v+y.minY}}function $(){if(!u||!a()){console.log("GncCanvas draw: skipping - ctx:",!!u,"sheet:",!!a());return}console.log("GncCanvas draw: starting draw with sheet:",a()),u.fillStyle="#1e1e1e",u.fillRect(0,0,r(),n()),y=D(a()),console.log("GncCanvas draw: bounds:",y);const G=y.maxX-y.minX,V=y.maxY-y.minY;if(G===0&&V===0){console.log("GncCanvas draw: no data (dataW and dataH are 0)");return}const re=20,de=r()-re*2,J=n()-re*2,ee=de/G,he=J/V;v=Math.min(ee,he)*.95*s(f);const ce=G*v,te=V*v;j=(r()-ce)/2+p,z=(n()-te)/2+_;const pe=we=>j+(we-y.minX)*v,ve=we=>n()-(z+(we-y.minY)*v);a().program_width&&a().program_height&&(u.strokeStyle="#444",u.lineWidth=2,u.setLineDash([5,5]),u.strokeRect(pe(0),ve(a().program_height),a().program_width*v,a().program_height*v),u.setLineDash([])),a().parts.forEach((we,xe)=>{const H=xe*137%360;we.contours.forEach(le=>{const A=b===le.id,P=E===le.id;u.beginPath(),u.strokeStyle=A?"#ffffff":P?"#fbbf24":`hsl(${H}, 70%, 60%)`,u.lineWidth=A||P?3:1.5,u.shadowBlur=A?10:P?5:0,u.shadowColor=A?"#ffffff":P?"#fbbf24":"transparent";let ue=null,Pe=null,L=!1;le.commands.forEach(C=>{const ie=ue,Re=Pe;if(C.x!==void 0&&(ue=C.x),C.y!==void 0&&(Pe=C.y),!(ue===null||Pe===null)){if(C.type==="G00"||C.command==="G"&&C.value===0)u.moveTo(pe(ue),ve(Pe)),L=!0;else if(C.type==="G01"||C.command==="G"&&C.value===1||C.type==="MODAL"||C.type==="G41"||C.type==="G40")L?u.lineTo(pe(ue),ve(Pe)):(u.moveTo(pe(ue),ve(Pe)),L=!0);else if((C.type==="G02"||C.type==="G03"||C.command==="G"&&(C.value===2||C.value===3))&&C.i!==void 0&&C.j!==void 0&&ie!==null&&Re!==null){const Ie=C.i,B=C.j,X=ie+Ie,Se=Re+B,me=Math.sqrt(Ie*Ie+B*B),De=pe(X),Ae=ve(Se),$e=me*v,Be=Math.atan2(ve(Re)-Ae,pe(ie)-De),Ge=Math.atan2(ve(Pe)-Ae,pe(ue)-De),at=C.type==="G02"||C.command==="G"&&C.value===2;u.arc(De,Ae,$e,Be,Ge,at)}}}),u.stroke(),u.shadowBlur=0})})}function Y(G,V){if(!a())return null;const re=s(c).getBoundingClientRect(),de=G-re.left,J=V-re.top,ee=M(de,J),he=ee.x,_e=ee.y,ce=5/v;let te=null,pe=null,ve=1/0;for(const we of a().parts)for(const xe of we.contours){let H=null,le=null,A=1/0;for(const P of xe.commands){const ue=P.x!==void 0?P.x:H,Pe=P.y!==void 0?P.y:le;let L=1/0;if(H!==null&&le!==null&&ue!==null&&Pe!==null){if(P.type==="G01"||P.command==="G"&&P.value===1||P.type==="MODAL"||P.type==="G41"||P.type==="G40")L=W(he,_e,H,le,ue,Pe);else if(P.type==="G02"||P.type==="G03"||P.command==="G"&&(P.value===2||P.value===3)){const C=P.i||0,ie=P.j||0,Re=H+C,Ie=le+ie,B=Math.sqrt(C*C+ie*ie),X=Math.sqrt((he-Re)**2+(_e-Ie)**2);L=Math.abs(X-B);const Se=Math.atan2(le-Ie,H-Re),me=Math.atan2(Pe-Ie,ue-Re),De=Math.atan2(_e-Ie,he-Re),Ae=P.type==="G02"||P.command==="G"&&P.value===2;ye(De,Se,me,Ae)||(L=1/0)}}L<A&&(A=L),H=ue,le=Pe}A<ce&&A<ve&&(ve=A,te=xe,pe=we)}return te?{contour:te,part:pe}:null}function R(G){const V=Y(G.clientX,G.clientY);V?(b=V.contour.id,l("select",V)):(b=null,l("select",null)),$()}function W(G,V,re,de,J,ee){const he=G-re,_e=V-de,ce=J-re,te=ee-de,pe=he*ce+_e*te,ve=ce*ce+te*te;let we=-1;ve!=0&&(we=pe/ve);let xe,H;we<0?(xe=re,H=de):we>1?(xe=J,H=ee):(xe=re+we*ce,H=de+we*te);const le=G-xe,A=V-H;return Math.sqrt(le*le+A*A)}function Z(G){G.preventDefault();const V=s(c).getBoundingClientRect(),re=G.clientX-V.left,de=G.clientY-V.top,J=M(re,de),ee=G.deltaY>0?.9:1.1,he=Math.max(.1,Math.min(10,s(f)*ee));if(v===0||s(f)===0)return;const ce=v/s(f)*he,te=y.maxX-y.minX,pe=y.maxY-y.minY,ve=te*ce,we=pe*ce,xe=re-(J.x-y.minX)*ce,H=n()-de-(J.y-y.minY)*ce;p=xe-(r()-ve)/2,_=H-(n()-we)/2,d(f,he),$()}function F(G){m=G.clientX,S=G.clientY,s(q)==="navigate"&&d(h,!0)}function O(G){if(s(q)==="navigate"&&s(h)){const V=G.clientX-m,re=G.clientY-S;p+=V,_-=re,m=G.clientX,S=G.clientY,$()}else if(s(q)==="select"){const V=Y(G.clientX,G.clientY),re=V?V.contour.id:null;re!==E&&(E=re,$())}}function se(){E!==null&&(E=null,$()),s(h)&&d(h,!1)}function ae(G){const V=Math.abs(G.clientX-m),re=Math.abs(G.clientY-S),de=V<5&&re<5;s(q)==="navigate"?d(h,!1):s(q)==="select"&&de&&R(G)}function ye(G,V,re,de){const J=Math.PI*2,ee=(G%J+J)%J,he=(V%J+J)%J,_e=(re%J+J)%J;if(de){const ce=(he-_e+J)%J;return(he-ee+J)%J<=ce}else{const ce=(_e-he+J)%J;return(ee-he+J)%J<=ce}}function ge(){d(f,1),p=0,_=0,$()}Vi(()=>(el(a()),s(c)),()=>{a()&&s(c)&&(console.log("GncCanvas: sheet changed, redrawing...",a()),$())}),Qi(),nl();var ke=id(),be=o(ke),oe=o(be);oe.__click=()=>d(q,"navigate");let je;var qe=i(oe,2);qe.__click=()=>d(q,"select");let ne;var k=i(be,2);k.__mousedown=F,k.__mousemove=O,k.__mouseup=ae,Cn(k,G=>d(c,G),()=>s(c));var N=i(k,2),K=o(N);K.__click=ge;var Q=i(K,2),fe=o(Q);U(G=>{as(ke,`width: ${r()??""}px; height: ${n()??""}px;`),je=Le(oe,1,"svelte-1eph566",null,je,{active:s(q)==="navigate"}),ne=Le(qe,1,"svelte-1eph566",null,ne,{active:s(q)==="select"}),He(k,"width",r()),He(k,"height",n()),as(k,`cursor: ${s(q)==="navigate"?s(h)?"grabbing":"grab":"default"}`),T(fe,`${G??""}%`)},[()=>(s(f),Ma(()=>Math.round(s(f)*100)))]),ua("wheel",k,Z),ua("mouseleave",k,se),g(t,ke),Ve()}tt(["click","mousedown","mousemove","mouseup"]);var cd=w('<span class="filename svelte-57krl6"> </span>'),vd=w('<div class="loading svelte-57krl6">Parsing GNC file...</div>'),ud=w('<div class="placeholder svelte-57krl6"><p>No file loaded.</p> <p class="hint svelte-57krl6">Upload a .GNC file to visualize and edit.</p></div>'),dd=w('<p class="hint-text svelte-57krl6">Load a GNC file to view properties.</p>'),fd=w("<option> </option>"),pd=w('<h3 class="svelte-57krl6">Sheet Properties</h3> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Program Size (mm):</span> <div class="inline-inputs svelte-57krl6"><input type="number" step="0.1" class="svelte-57krl6"/> <span class="svelte-57krl6">Ã—</span> <input type="number" step="0.1" class="svelte-57krl6"/></div></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Thickness (mm):</span> <input type="number" step="0.1"/></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Stock Size:</span> <select><option>-- Select Stock --</option><!></select></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Cut Count:</span> <input type="number" min="1"/></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Material:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Total Parts:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Total Contours:</span> <span class="value svelte-57krl6"> </span></div>',1),hd=w("<option> </option>"),_d=w('<div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Part Name:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Contours:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Corner Count:</span> <span class="value svelte-57krl6"> </span></div>',1),gd=w('<h3 class="svelte-57krl6">Part Properties</h3> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Select Part:</span> <select></select></div> <!> <button>Unplaced</button> <button class="delete-btn">Remove Part</button>',1),md=w('<p class="hint svelte-57krl6">No unplaced parts.</p>'),bd=w('<div class="part-item" draggable="true"><span class="name"> </span> <button class="add-btn">+</button></div>'),yd=w('<div class="part-list"></div>'),wd=w('<h3 class="svelte-57krl6">Unplaced Parts</h3> <!>',1),kd=w('<div class="prop-field svelte-57krl6"><label class="svelte-57krl6"> </label> <input type="text" class="svelte-57krl6"/></div>'),xd=w('<p class="empty-props">No technological parameters found.</p>'),Sd=w('<div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Contour ID:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Corners:</span> <span class="value svelte-57krl6"> </span></div> <h4 class="section-title svelte-57krl6">Technology Parameters</h4> <div class="p-codes-list"><!></div>',1),Td=w(`<p class="hint-text svelte-57krl6">Select a contour on the canvas to view and edit its
                        properties.</p>`),qd=w('<h3 class="svelte-57krl6">Contour Properties</h3> <!>',1),Ed=w('<div class="view-container svelte-57krl6"><div class="header svelte-57krl6"><h2 class="svelte-57krl6">GNC Editor</h2> <div class="actions svelte-57krl6"><input type="file" id="gnc-upload" accept=".gnc,.nc" class="file-input svelte-57krl6"/> <label for="gnc-upload" class="upload-btn svelte-57krl6">Open File</label> <!> <button class="icon-btn" title="Undo">â†©</button> <button class="icon-btn" title="Redo">â†ª</button> <button class="save-btn svelte-57krl6">Save Changes</button> <button class="save-btn svelte-57krl6"> </button> <button class="save-btn svelte-57krl6" style="background-color: #10b981;">Save as New Order</button></div></div> <div class="workspace svelte-57krl6"><div class="canvas-area svelte-57krl6"><!></div> <div class="properties-panel svelte-57krl6"><div class="mode-selector svelte-57krl6"><button>Sheet</button> <button>Part</button> <button>Contour</button></div> <!></div></div></div>');function jd(t,e){Ze(e,!0);let a=_t(e,"documentId",3,null),r=x(null),n=x(null),l=x(""),c=x(!1),u=x(Te([])),v=x(Te([])),f=x(Te([])),p=x(Te([])),_=x("sheet"),h=x(null);async function m(){if(a())try{d(u,await hl(a()),!0),y()}catch(L){console.error("Failed to load tasks",L)}}async function S(){try{const[L,C]=await Promise.all([zn(),Sa()]);d(f,L,!0),d(p,C,!0)}catch(L){console.error("Failed to load stock data",L)}}function q(L){if(!s(r)){alert("No active sheet to update."),L.target.value="";return}const C=parseInt(L.target.value);if(!C)return;const ie=s(f).find(Ie=>Ie.id===C);if(!ie)return;const Re=`Update sheet dimensions to ${ie.width}x${ie.height} (${ie.material?.name})?`;confirm(Re)?(E(),s(r).program_width=ie.width,s(r).program_height=ie.height,s(r).thickness=0,ie.material&&(s(r).material=ie.material.name)):L.target.value=""}function y(){if(!s(u)||s(u).length===0)return;if(!s(r)){d(v,[...s(u)],!0);return}const L=new Set(s(r).parts.filter(C=>C.taskId).map(C=>C.taskId));d(v,s(u).filter(C=>!L.has(C.id)),!0)}function j(L,C){L.dataTransfer.setData("text/plain",JSON.stringify(C)),L.dataTransfer.effectAllowed="copy"}let z=x(Te([])),b=x(-1);function E(){if(!s(r))return;const L=JSON.parse(JSON.stringify(s(r)));s(b)<s(z).length-1&&d(z,s(z).slice(0,s(b)+1),!0),s(z).push(L),Ds(b),s(z).length>50&&(s(z).shift(),Ds(b,-1))}function D(){s(b)>0&&(Ds(b,-1),d(r,JSON.parse(JSON.stringify(s(z)[s(b)])),!0),y())}function M(){s(b)<s(z).length-1&&(Ds(b),d(r,JSON.parse(JSON.stringify(s(z)[s(b)])),!0),y())}async function $(L){if(!s(r)){alert("Please create or load a sheet first.");return}try{E();let C=null;if(L.part_associations&&L.part_associations.length>0)C=L.part_associations[0].part_id;else{console.warn("No part association found for task",L),alert("This task is not linked to a part geometry.");return}const ie=await Cl(C);if(!ie||!ie.parts||ie.parts.length===0){alert("No geometry found for this part.");return}const Re=ie.parts[0],Ie=Math.max(...s(r).parts.map(X=>X.id),0)+1,B={...Re,id:Ie,name:L.name,taskId:L.id,metadata:{...Re.metadata||{},source_part_id:C},x:10,y:10};s(r).parts=[...s(r).parts,B],s(r).total_parts=s(r).parts.length,y()}catch(C){console.error(C),alert("Failed to place part.")}}function Y(L){!s(r)||!s(r).parts.find(ie=>ie.id===L)||(E(),s(r).parts=s(r).parts.filter(ie=>ie.id!==L),s(r).total_parts=s(r).parts.length,s(h)===L&&(d(h,null),d(_,"sheet")),y())}let R=null,W=x(!1),Z=x(0);Lt(()=>{S(),a()&&m(),window.Worker&&(R=new Worker(new URL("/assets/NestingWorker-D4MBLvI3.js",import.meta.url),{type:"module"}),R.onmessage=L=>{const{type:C,payload:ie}=L.data;if(C==="PROGRESS")d(Z,ie,!0);else if(C==="COMPLETE"){d(W,!1);const{parts:Re}=ie;F(Re),alert("Nesting complete!")}else C==="STOPPED"&&d(W,!1)})});function F(L){s(r)&&(s(r).parts=s(r).parts.map(C=>{const ie=L.find(Re=>Re.id===C.id);return ie?{...C,x:ie.x,y:ie.y,rotation:ie.rotation||0}:C}),E())}async function O(){if(!R||!s(r))return;if(s(W)){R.postMessage({type:"STOP_NESTING"});return}let L=4,C=10;try{const[Re,Ie]=await Promise.all([Pa("nesting_rotations").catch(()=>({value:"4"})),Pa("nesting_population").catch(()=>({value:"10"}))]);L=parseInt(Re.value)||4,C=parseInt(Ie.value)||10}catch(Re){console.warn("Using default nesting settings",Re)}const ie={rotations:L,population:C};R.postMessage({type:"START_NESTING",payload:{sheet:{width:s(r).program_width,height:s(r).program_height},parts:JSON.parse(JSON.stringify(s(r).parts)),config:ie}}),d(W,!0),d(Z,0)}async function se(L){const C=L.target.files[0];if(C){d(l,C.name,!0),d(c,!0),d(r,null),d(n,null);try{d(r,await El(C),!0),console.log("Parsed GNC sheet:",s(r)),console.log("Parts:",s(r)?.parts),console.log("Total parts:",s(r)?.total_parts),s(r)?.parts?.length>0&&d(h,s(r).parts[0].id,!0)}catch(ie){alert("Error parsing GNC file"),console.error(ie)}finally{d(c,!1)}}}function ae(L){const C=L.detail;if(!C){d(n,null);return}C.contour?(d(n,C.contour,!0),C.part?(d(h,C.part.id,!0),s(_)==="sheet"&&d(_,"contour")):d(_,"contour")):(d(n,C,!0),d(_,"contour"))}async function ye(){if(!(!s(r)||!s(l)))try{const L=await jl(s(r),s(l),!0);alert(`Saved successfully to ${L.path}`)}catch{alert("Failed to save file")}}async function ge(){if(!s(r))return;const L=prompt("Enter name for the new Order:");if(L)try{const{saveAsNewOrder:C}=await ld(async()=>{const{saveAsNewOrder:Re}=await Promise.resolve().then(()=>Po);return{saveAsNewOrder:Re}},void 0),ie=await C(L,s(r),a());alert(`New Order "${ie.name}" created successfully!`)}catch(C){console.error(C),alert("Failed to save as new order: "+C.message)}}function ke(L,C){s(n)&&s(n).metadata&&(s(n).metadata[L]=C)}function be(L,C){s(r)&&(s(r)[L]=C)}let oe=rt(()=>s(r)?.parts?.find(L=>L.id===s(h)));var je=Ed(),qe=o(je),ne=i(o(qe),2),k=o(ne);k.__change=se;var N=i(k,4);{var K=L=>{var C=cd(),ie=o(C);U(()=>T(ie,s(l))),g(L,C)};I(N,L=>{s(l)&&L(K)})}var Q=i(N,2);Q.__click=D;var fe=i(Q,2);fe.__click=M;var G=i(fe,2);G.__click=ye;var V=i(G,2);V.__click=O;var re=o(V),de=i(V,2);de.__click=ge;var J=i(qe,2),ee=o(J),he=o(ee);{var _e=L=>{var C=vd();g(L,C)},ce=L=>{var C=Ke(),ie=Ee(C);{var Re=B=>{od(B,{get sheet(){return s(r)},width:800,height:600,$$events:{select:ae}})},Ie=B=>{var X=ud();g(B,X)};I(ie,B=>{s(r)?B(Re):B(Ie,!1)},!0)}g(L,C)};I(he,L=>{s(c)?L(_e):L(ce,!1)})}var te=i(ee,2),pe=o(te),ve=o(pe);ve.__click=()=>d(_,"sheet");let we;var xe=i(ve,2);xe.__click=()=>d(_,"part");let H;var le=i(xe,2);le.__click=()=>d(_,"contour");let A;var P=i(pe,2);{var ue=L=>{var C=dd();g(L,C)},Pe=L=>{var C=Ke(),ie=Ee(C);{var Re=B=>{var X=pd(),Se=i(Ee(X),2),me=i(o(Se),2),De=o(me);De.__input=wt=>be("program_width",parseFloat(wt.target.value));var Ae=i(De,4);Ae.__input=wt=>be("program_height",parseFloat(wt.target.value));var $e=i(Se,2),Be=i(o($e),2);Be.__input=wt=>be("thickness",parseFloat(wt.target.value));var Ge=i($e,2),at=i(o(Ge),2);at.__change=q;var ot=o(at);ot.value=ot.__value="";var ut=i(ot);ze(ut,17,()=>s(f),Ue,(wt,Pt)=>{var ta=fd(),Oa=o(ta),Ta={};U(()=>{T(Oa,`${(s(Pt).material?.name||"Unknown")??""} - ${s(Pt).width??""}x${s(Pt).height??""}`),Ta!==(Ta=s(Pt).id)&&(ta.value=(ta.__value=s(Pt).id)??"")}),g(wt,ta)});var Tt=i(Ge,2),Jt=i(o(Tt),2);Jt.__input=wt=>be("cut_count",parseInt(wt.target.value));var vt=i(Tt,2),st=i(o(vt),2),dt=o(st),Rt=i(vt,2),yt=i(o(Rt),2),ft=o(yt),jt=i(Rt,2),$t=i(o(jt),2),Xt=o($t);U(()=>{cs(De,s(r).program_width||0),cs(Ae,s(r).program_height||0),cs(Be,s(r).thickness||0),cs(Jt,s(r).cut_count||1),T(dt,s(r).material||"N/A"),T(ft,s(r).total_parts),T(Xt,s(r).total_contours)}),g(B,X)},Ie=B=>{var X=Ke(),Se=Ee(X);{var me=Ae=>{var $e=gd(),Be=i(Ee($e),2),Ge=i(o(Be),2);ze(Ge,21,()=>s(r).parts,Ue,(vt,st)=>{var dt=hd(),Rt=o(dt),yt={};U(()=>{T(Rt,s(st).name||`Part ${s(st).id}`),yt!==(yt=s(st).id)&&(dt.value=(dt.__value=s(st).id)??"")}),g(vt,dt)});var at=i(Be,2);{var ot=vt=>{var st=_d(),dt=Ee(st),Rt=i(o(dt),2),yt=o(Rt),ft=i(dt,2),jt=i(o(ft),2),$t=o(jt),Xt=i(ft,2),wt=i(o(Xt),2),Pt=o(wt);U(()=>{T(yt,s(oe).name||"N/A"),T($t,s(oe).contours.length),T(Pt,s(oe).corner_count)}),g(vt,st)};I(at,vt=>{s(oe)&&vt(ot)})}var ut=i(at,2);ut.__click=()=>d(_,"unplaced");let Tt;var Jt=i(ut,2);Jt.__click=()=>Y(s(h)),U(()=>Tt=Le(ut,1,"",null,Tt,{active:s(_)==="unplaced"})),ht(Ge,()=>s(h),vt=>d(h,vt)),g(Ae,$e)},De=Ae=>{var $e=Ke(),Be=Ee($e);{var Ge=ot=>{var ut=wd(),Tt=i(Ee(ut),2);{var Jt=st=>{var dt=md();g(st,dt)},vt=st=>{var dt=yd();ze(dt,21,()=>s(v),Ue,(Rt,yt)=>{var ft=bd();ft.__click=()=>$(s(yt));var jt=o(ft),$t=o(jt);U(()=>T($t,s(yt).name)),ua("dragstart",ft,Xt=>j(Xt,s(yt))),g(Rt,ft)}),g(st,dt)};I(Tt,st=>{s(v).length===0?st(Jt):st(vt,!1)})}g(ot,ut)},at=ot=>{var ut=Ke(),Tt=Ee(ut);{var Jt=vt=>{var st=qd(),dt=i(Ee(st),2);{var Rt=ft=>{var jt=Sd(),$t=Ee(jt),Xt=i(o($t),2),wt=o(Xt),Pt=i($t,2),ta=i(o(Pt),2),Oa=o(ta),Ta=i(Pt,4),Wa=o(Ta);{var is=Ne=>{var et=Ke(),pt=Ee(et);ze(pt,17,()=>Object.entries(s(n).metadata),Ue,(Ft,Qe)=>{var Zt=rt(()=>mn(s(Qe),2));let qt=()=>s(Zt)[0],Bt=()=>s(Zt)[1];var aa=Ke(),qa=Ee(aa);{var it=ct=>{var Et=kd(),Nt=o(Et),Ut=o(Nt),Gt=i(Nt,2);Gt.__input=Vt=>ke(qt(),Vt.target.value),U(()=>{He(Nt,"for",qt()),T(Ut,qt()),He(Gt,"id",qt()),cs(Gt,Bt())}),g(ct,Et)};I(qa,ct=>{qt().startsWith("P")&&ct(it)})}g(Ft,aa)}),g(Ne,et)},oa=Ne=>{var et=xd();g(Ne,et)};I(Wa,Ne=>{s(n).metadata?Ne(is):Ne(oa,!1)})}U(()=>{T(wt,`#${s(n).id??""}`),T(Oa,s(n).corner_count)}),g(ft,jt)},yt=ft=>{var jt=Td();g(ft,jt)};I(dt,ft=>{s(n)?ft(Rt):ft(yt,!1)})}g(vt,st)};I(Tt,vt=>{s(_)==="contour"&&vt(Jt)},!0)}g(ot,ut)};I(Be,ot=>{s(_)==="unplaced"?ot(Ge):ot(at,!1)},!0)}g(Ae,$e)};I(Se,Ae=>{s(_)==="part"?Ae(me):Ae(De,!1)},!0)}g(B,X)};I(ie,B=>{s(_)==="sheet"?B(Re):B(Ie,!1)},!0)}g(L,C)};I(P,L=>{s(r)?L(Pe,!1):L(ue)})}U(()=>{Q.disabled=s(b)<=0,fe.disabled=s(b)>=s(z).length-1,G.disabled=!s(r),V.disabled=!s(r),as(V,`background-color: ${s(W)?"#ef4444":"#8b5cf6"};`),T(re,s(W)?`Stop Nesting (${s(Z)}%)`:"Auto Nest"),de.disabled=!s(r),we=Le(ve,1,"svelte-57krl6",null,we,{active:s(_)==="sheet"}),H=Le(xe,1,"svelte-57krl6",null,H,{active:s(_)==="part"}),A=Le(le,1,"svelte-57krl6",null,A,{active:s(_)==="contour"})}),g(t,je),Ve()}tt(["change","click","input"]);var Pd=w("<option> </option>"),Ad=w('<div class="form-panel svelte-gim6qq"><h3>New Stock Item</h3> <div class="form-grid svelte-gim6qq"><div class="field svelte-gim6qq"><label class="svelte-gim6qq">Material</label> <select class="svelte-gim6qq"><option>Select Material...</option><!></select></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Width (mm)</label> <input type="number" min="0" class="svelte-gim6qq"/></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Height (mm)</label> <input type="number" min="0" class="svelte-gim6qq"/></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Quantity</label> <input type="number" min="0" class="svelte-gim6qq"/></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Location</label> <input type="text" placeholder="e.g. A-01" class="svelte-gim6qq"/></div> <div class="actions"><button class="save-btn svelte-gim6qq">Save Item</button></div></div></div>'),Cd=w('<p class="loading svelte-gim6qq">Loading stock...</p>'),Dd=w('<div class="empty-state svelte-gim6qq"><p>No stock items found.</p></div>'),zd=w('<tr><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"><button class="delete-btn svelte-gim6qq">Delete</button></td></tr>'),Rd=w('<div class="table-container svelte-gim6qq"><table class="svelte-gim6qq"><thead><tr><th class="svelte-gim6qq">Material</th><th class="svelte-gim6qq">Dimensions</th><th class="svelte-gim6qq">Qty</th><th class="svelte-gim6qq">Reserved</th><th class="svelte-gim6qq">Location</th><th class="svelte-gim6qq">Actions</th></tr></thead><tbody></tbody></table></div>'),Nd=w('<div class="view-container svelte-gim6qq"><div class="header svelte-gim6qq"><h2 class="svelte-gim6qq">Stock Management</h2> <button class="primary-btn svelte-gim6qq"> </button></div> <!> <!></div>');function Md(t,e){Ze(e,!0);let a=x(Te([])),r=x(Te([])),n=x(!0),l=x(!1),c=x(Te({material_id:"",width:0,height:0,quantity:0,location:""}));async function u(){d(n,!0);try{const[b,E]=await Promise.all([zn(),Sa()]);d(a,b,!0),d(r,E,!0)}catch(b){console.error(b)}finally{d(n,!1)}}async function v(){if(s(c).material_id)try{const b=await Tl(s(c));d(a,[...s(a),b],!0),d(l,!1),d(c,{material_id:"",width:0,height:0,quantity:0,location:""},!0)}catch(b){alert("Failed to add stock item"),console.error(b)}}async function f(b){if(confirm("Are you sure you want to delete this item?"))try{await ql(b),d(a,s(a).filter(E=>E.id!==b),!0)}catch{alert("Failed to delete item")}}Lt(u);var p=Nd(),_=o(p),h=i(o(_),2);h.__click=()=>d(l,!s(l));var m=o(h),S=i(_,2);{var q=b=>{var E=Ad(),D=i(o(E),2),M=o(D),$=i(o(M),2),Y=o($);Y.value=Y.__value="";var R=i(Y);ze(R,17,()=>s(r),Ue,(oe,je)=>{var qe=Pd(),ne=o(qe),k={};U(()=>{T(ne,s(je).name),k!==(k=s(je).id)&&(qe.value=(qe.__value=s(je).id)??"")}),g(oe,qe)});var W=i(M,2),Z=i(o(W),2),F=i(W,2),O=i(o(F),2),se=i(F,2),ae=i(o(se),2),ye=i(se,2),ge=i(o(ye),2),ke=i(ye,2),be=o(ke);be.__click=v,ht($,()=>s(c).material_id,oe=>s(c).material_id=oe),Ce(Z,()=>s(c).width,oe=>s(c).width=oe),Ce(O,()=>s(c).height,oe=>s(c).height=oe),Ce(ae,()=>s(c).quantity,oe=>s(c).quantity=oe),Ce(ge,()=>s(c).location,oe=>s(c).location=oe),g(b,E)};I(S,b=>{s(l)&&b(q)})}var y=i(S,2);{var j=b=>{var E=Cd();g(b,E)},z=b=>{var E=Ke(),D=Ee(E);{var M=Y=>{var R=Dd();g(Y,R)},$=Y=>{var R=Rd(),W=o(R),Z=i(o(W));ze(Z,21,()=>s(a),Ue,(F,O)=>{var se=zd(),ae=o(se),ye=o(ae),ge=i(ae),ke=o(ge),be=i(ge),oe=o(be),je=i(be),qe=o(je),ne=i(je),k=o(ne),N=i(ne),K=o(N);K.__click=()=>f(s(O).id),U(()=>{T(ye,s(O).material?s(O).material.name:"Unknown"),T(ke,`${s(O).width??""} x ${s(O).height??""}`),T(oe,s(O).quantity),T(qe,s(O).reserved),T(k,s(O).location||"-")}),g(F,se)}),g(Y,R)};I(D,Y=>{s(a).length===0?Y(M):Y($,!1)},!0)}g(b,E)};I(y,b=>{s(n)?b(j):b(z,!1)})}U(()=>T(m,s(l)?"Cancel":"Add Stock")),g(t,p),Ve()}tt(["click"]);var Od=w("<p> </p>"),Id=w(`<div class="setup-container svelte-1125czv"><div class="card svelte-1125czv"><h1 class="svelte-1125czv">Welcome to DocuFlow</h1> <p class="subtitle svelte-1125czv">Please configure the database connection.</p> <div class="field svelte-1125czv"><label for="db-path" class="svelte-1125czv">Database File Path</label> <p class="help-text svelte-1125czv">Enter the full path to the SQLite database file. For network
                sharing, use a path on the shared drive (e.g., <code>Z:\\DocuFlow\\data.db</code>).</p> <div class="input-group svelte-1125czv"><input id="db-path" type="text" placeholder="C:\\DocuFlow\\data.db" class="svelte-1125czv"/> <button class="svelte-1125czv"> </button></div> <!></div> <div class="actions"><button class="primary svelte-1125czv"> </button></div></div></div>`);function Ld(t,e){Ze(e,!0);let a=x(""),r=x(!1),n=x(null),l=x(!1);Lt(async()=>{try{const D=await(await fetch("/api/config")).json();D.database_path&&d(a,D.database_path,!0)}catch(E){console.error(E)}});async function c(){if(s(a)){d(r,!0),d(n,null);try{const D=await(await fetch("/api/test-path",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:s(a)})})).json();d(n,{ok:D.accessible||!D.exists,message:D.accessible?"Path exists and is readable.":D.exists?"Path exists but not readable.":"File does not exist (will be created)."},!0)}catch(E){d(n,{ok:!1,message:E.message},!0)}finally{d(r,!1)}}}async function u(){d(l,!0);try{(await(await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({database_path:s(a)})})).json()).ok?(alert("Configuration saved. Please restart the application (Server) to apply changes."),bt.configStatus="configured",sa("/")):alert("Failed to save config.")}catch(E){alert("Error saving config: "+E.message)}finally{d(l,!1)}}var v=Id(),f=o(v),p=i(o(f),4),_=i(o(p),4),h=o(_),m=i(h,2);m.__click=c;var S=o(m),q=i(_,2);{var y=E=>{var D=Od(),M=o(D);U(()=>{Le(D,1,`result ${s(n).ok?"success":"warn"}`,"svelte-1125czv"),T(M,s(n).message)}),g(E,D)};I(q,E=>{s(n)&&E(y)})}var j=i(p,2),z=o(j);z.__click=u;var b=o(z);U(()=>{m.disabled=s(r),T(S,s(r)?"Testing...":"Test Path"),z.disabled=s(l)||!s(a),T(b,s(l)?"Saving...":"Save Configuration")}),Ce(h,()=>s(a),E=>d(a,E)),g(t,v),Ve()}tt(["click"]);const $d={"/":No,"/documents":vu,"/journal":xu,"/job":Du,"/parts":sd,"/gnc":jd,"/stock":Md,"/setup":Ld};var Fd=w('<aside class="sidebar svelte-1nhzsi7"><div class="sidebar-header svelte-1nhzsi7"><span class="logo-icon svelte-1nhzsi7">DF</span></div> <nav class="svelte-1nhzsi7"><button><span class="icon svelte-1nhzsi7">ðŸ“Š</span> <span class="label svelte-1nhzsi7">Dashboard</span></button> <button><span class="icon svelte-1nhzsi7">ðŸ“„</span> <span class="label svelte-1nhzsi7">Documents</span></button> <button><span class="icon svelte-1nhzsi7">âš™ï¸</span> <span class="label svelte-1nhzsi7">Parts Library</span></button> <button><span class="icon svelte-1nhzsi7">ðŸ“</span> <span class="label svelte-1nhzsi7">GNC Editor</span></button> <button><span class="icon svelte-1nhzsi7">ðŸ‘·</span> <span class="label svelte-1nhzsi7">Job Processing</span></button> <button><span class="icon svelte-1nhzsi7">ðŸ“¦</span> <span class="label svelte-1nhzsi7">Stock</span></button> <button><span class="icon svelte-1nhzsi7">ðŸ““</span> <span class="label svelte-1nhzsi7">Journal</span></button></nav></aside>');function Bd(t,e){Ze(e,!1),nl();var a=Fd(),r=i(o(a),2),n=o(r);n.__click=()=>sa("/");let l;var c=i(n,2);c.__click=()=>sa("/documents");let u;var v=i(c,2);v.__click=()=>sa("/parts");let f;var p=i(v,2);p.__click=()=>sa("/gnc");let _;var h=i(p,2);h.__click=()=>sa("/job");let m;var S=i(h,2);S.__click=()=>sa("/stock");let q;var y=i(S,2);y.__click=()=>sa("/journal");let j;U((z,b,E,D,M,$)=>{l=Le(n,1,"svelte-1nhzsi7",null,l,{active:ja.path==="/"}),u=Le(c,1,"svelte-1nhzsi7",null,u,z),f=Le(v,1,"svelte-1nhzsi7",null,f,b),_=Le(p,1,"svelte-1nhzsi7",null,_,E),m=Le(h,1,"svelte-1nhzsi7",null,m,D),q=Le(S,1,"svelte-1nhzsi7",null,q,M),j=Le(y,1,"svelte-1nhzsi7",null,j,$)},[()=>({active:ja.path.includes("/documents")}),()=>({active:ja.path.includes("/parts")}),()=>({active:ja.path.includes("/gnc")}),()=>({active:ja.path.includes("/job")}),()=>({active:ja.path.includes("/stock")}),()=>({active:ja.path.includes("/journal")})]),g(t,a),Ve()}tt(["click"]);var Ud=w("<p>Loading...</p>"),Gd=w("<span> </span>"),Hd=w("<span> </span>"),Yd=w(`<div class="field svelte-w0yg29"><label for="regex" class="svelte-w0yg29">Document Name Regex</label> <input id="regex" type="text" placeholder="Regex Pattern" class="svelte-w0yg29"/></div> <hr class="divider svelte-w0yg29"/> <h3 class="section-title svelte-w0yg29">Sync Folder Paths</h3> <p class="section-hint svelte-w0yg29">Configure paths to network folders for automatic file
                        import.</p> <div class="field path-field svelte-w0yg29"><label for="mihtav-path" class="svelte-w0yg29">Mihtav (Orders) Path</label> <div class="path-input-group svelte-w0yg29"><input id="mihtav-path" type="text" placeholder="Z:\\Mihtavim or \\\\server\\share\\orders" class="svelte-w0yg29"/> <button class="test-btn svelte-w0yg29"> </button></div> <!></div> <div class="field path-field svelte-w0yg29"><label for="sidra-path" class="svelte-w0yg29">Sidra (Parts Library) Path</label> <div class="path-input-group svelte-w0yg29"><input id="sidra-path" type="text" placeholder="Z:\\Sidra or \\\\server\\share\\parts" class="svelte-w0yg29"/> <button class="test-btn svelte-w0yg29"> </button></div> <!></div> <div class="field svelte-w0yg29"><label for="role" class="svelte-w0yg29">User Mode (Simulated)</label> <select id="role" class="svelte-w0yg29"><option>Operator (Read-Only)</option><option>Admin (Full Access)</option></select> <p class="hint svelte-w0yg29">Switching mode will reload the application.</p></div>`,1),Wd=w(`<h3 class="section-title svelte-w0yg29">Auto-Nesting Configuration</h3> <p class="section-hint svelte-w0yg29">Adjust parameters for the nesting algorithm (SVGnest).</p> <div class="field svelte-w0yg29"><label for="rotations" class="svelte-w0yg29">Rotations</label> <input id="rotations" type="number" min="1" max="360" class="svelte-w0yg29"/> <p class="hint svelte-w0yg29">Number of rotation steps (e.g., 4 = 0, 90, 180,
                            270).</p></div> <div class="field svelte-w0yg29"><label for="population" class="svelte-w0yg29">Population Size</label> <input id="population" type="number" min="5" max="100" class="svelte-w0yg29"/> <p class="hint svelte-w0yg29">Higher values check more combinations but run
                            slower.</p></div>`,1),Jd=w('<div class="tabs svelte-w0yg29"><button>General</button> <button>Nesting</button></div> <div class="tab-content"><!></div>',1),Xd=w('<div class="modal-content svelte-w0yg29"><h2 class="svelte-w0yg29">Settings</h2> <!> <div class="actions svelte-w0yg29"><button class="cancel-btn svelte-w0yg29">Cancel</button> <button class="save-btn svelte-w0yg29">Save</button></div></div>');function Zd(t,e){Ze(e,!0);let a=_t(e,"isOpen",3,!1),r=x("general"),n=x(""),l=x("admin"),c=x(""),u=x(""),v=x(4),f=x(10),p=x(!0),_=Te({mihtav:!1,sidra:!1}),h=x(Te({mihtav:null,sidra:null}));async function m(){d(p,!0);try{const[b,E,D,M,$]=await Promise.all([Pa("doc_name_regex").catch(()=>({value:""})),Pa("sync_mihtav_path").catch(()=>({value:""})),Pa("sync_sidra_path").catch(()=>({value:""})),Pa("nesting_rotations").catch(()=>({value:"4"})),Pa("nesting_population").catch(()=>({value:"10"}))]);d(n,b.value||"",!0),d(c,E.value||"",!0),d(u,D.value||"",!0),d(v,parseInt(M.value)||4,!0),d(f,parseInt($.value)||10,!0);const Y=localStorage.getItem("user_role");Y&&d(l,Y,!0)}catch(b){console.error(b)}finally{d(p,!1)}}async function S(b){const E=s(b==="mihtav"?c:u);if(!E){s(h)[b]={accessible:!1,error:"Path is empty"};return}_[b]=!0;try{const D=await il(E);s(h)[b]={accessible:D.ok,error:D.error}}catch(D){s(h)[b]={accessible:!1,error:D.message}}finally{_[b]=!1}}async function q(){try{await Promise.all([Xa("doc_name_regex",s(n)),Xa("sync_mihtav_path",s(c)),Xa("sync_sidra_path",s(u)),Xa("nesting_rotations",s(v).toString()),Xa("nesting_population",s(f).toString())]),localStorage.setItem("user_role",s(l)),window.location.reload(),e.close()}catch(b){alert("Failed to save settings. Ensure you have Admin privileges."),console.error(b)}}zt(()=>{a()&&(m(),d(h,{mihtav:null,sidra:null},!0))});var y=Ke(),j=Ee(y);{var z=b=>{var E=Xd(),D=i(o(E),2);{var M=Z=>{var F=Ud();g(Z,F)},$=Z=>{var F=Jd(),O=Ee(F),se=o(O);se.__click=()=>d(r,"general");let ae;var ye=i(se,2);ye.__click=()=>d(r,"nesting");let ge;var ke=i(O,2),be=o(ke);{var oe=qe=>{var ne=Yd(),k=Ee(ne),N=i(o(k),2),K=i(k,8),Q=i(o(K),2),fe=o(Q),G=i(fe,2);G.__click=()=>S("mihtav");var V=o(G),re=i(Q,2);{var de=le=>{var A=Gd();let P;var ue=o(A);U(()=>{P=Le(A,1,"test-result svelte-w0yg29",null,P,{success:s(h).mihtav.accessible,error:!s(h).mihtav.accessible}),T(ue,s(h).mihtav.accessible?"âœ“ Path accessible":`âœ— ${s(h).mihtav.error||"Path not accessible"}`)}),g(le,A)};I(re,le=>{s(h).mihtav&&le(de)})}var J=i(K,2),ee=i(o(J),2),he=o(ee),_e=i(he,2);_e.__click=()=>S("sidra");var ce=o(_e),te=i(ee,2);{var pe=le=>{var A=Hd();let P;var ue=o(A);U(()=>{P=Le(A,1,"test-result svelte-w0yg29",null,P,{success:s(h).sidra.accessible,error:!s(h).sidra.accessible}),T(ue,s(h).sidra.accessible?"âœ“ Path accessible":`âœ— ${s(h).sidra.error||"Path not accessible"}`)}),g(le,A)};I(te,le=>{s(h).sidra&&le(pe)})}var ve=i(J,2),we=i(o(ve),2),xe=o(we);xe.value=xe.__value="operator";var H=i(xe);H.value=H.__value="admin",U(()=>{G.disabled=_.mihtav,T(V,_.mihtav?"Testing...":"Test"),_e.disabled=_.sidra,T(ce,_.sidra?"Testing...":"Test")}),Ce(N,()=>s(n),le=>d(n,le)),Ce(fe,()=>s(c),le=>d(c,le)),Ce(he,()=>s(u),le=>d(u,le)),ht(we,()=>s(l),le=>d(l,le)),g(qe,ne)},je=qe=>{var ne=Ke(),k=Ee(ne);{var N=K=>{var Q=Wd(),fe=i(Ee(Q),4),G=i(o(fe),2),V=i(fe,2),re=i(o(V),2);Ce(G,()=>s(v),de=>d(v,de)),Ce(re,()=>s(f),de=>d(f,de)),g(K,Q)};I(k,K=>{s(r)==="nesting"&&K(N)},!0)}g(qe,ne)};I(be,qe=>{s(r)==="general"?qe(oe):qe(je,!1)})}U(()=>{ae=Le(se,1,"svelte-w0yg29",null,ae,{active:s(r)==="general"}),ge=Le(ye,1,"svelte-w0yg29",null,ge,{active:s(r)==="nesting"})}),g(Z,F)};I(D,Z=>{s(p)?Z(M):Z($,!1)})}var Y=i(D,2),R=o(Y);R.__click=function(...Z){e.close?.apply(this,Z)};var W=i(R,2);W.__click=q,g(b,E)};I(j,b=>{a()&&b(z)})}g(t,y),Ve()}tt(["click"]);var Vd=w('<div class="app-container svelte-1n46o8q"><!> <main class="main-content svelte-1n46o8q"><div class="top-bar svelte-1n46o8q"><div class="spacer svelte-1n46o8q"></div> <button class="settings-btn svelte-1n46o8q" title="Settings">âš™ï¸</button></div> <div class="route-content svelte-1n46o8q"><!></div></main> <!></div>');function Qd(t,e){Ze(e,!0);let a=x(!1);Lt(async()=>{try{const S=await(await fetch("/api/config-check")).json();zu(S.status),S.needs_setup&&sa("/setup")}catch(m){console.error("Config check failed",m),sa("/setup")}});function r(){d(a,!0)}var n=Vd(),l=o(n);{var c=m=>{Bd(m,{})};I(l,m=>{ja.path!=="/setup"&&m(c)})}var u=i(l,2),v=o(u),f=i(o(v),2);f.__click=r;var p=i(v,2),_=o(p);Eo(_,{get routes(){return $d}});var h=i(u,2);Rn(h,{get isOpen(){return s(a)},close:()=>d(a,!1),children:(m,S)=>{Zd(m,{get isOpen(){return s(a)},close:()=>d(a,!1)})},$$slots:{default:!0}}),g(t,n),Ve()}tt(["click"]);window.onerror=function(t,e,a,r,n){const l=document.createElement("div");l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.background="#fee2e2",l.style.color="#991b1b",l.style.padding="20px",l.style.zIndex="999999",l.style.borderBottom="2px solid #7f1d1d",l.innerHTML=`<strong>Error:</strong> ${t}<br><small>${e}:${a}:${r}</small><pre>${n?.stack||""}</pre>`,document.body.appendChild(l)};window.onunhandledrejection=function(t){const e=document.createElement("div");e.innerHTML+=`<br><strong>Unhandled Rejection:</strong> ${t.reason}`,document.body.prepend(e)};io(Qd,{target:document.getElementById("app")});
