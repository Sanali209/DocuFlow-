(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=a(s);fetch(s.href,l)}})();const Ps=!1;var ys=Array.isArray,sl=Array.prototype.indexOf,ks=Array.from,nl=Object.defineProperty,Aa=Object.getOwnPropertyDescriptor,Gn=Object.getOwnPropertyDescriptors,rl=Object.prototype,ll=Array.prototype,Xs=Object.getPrototypeOf,wn=Object.isExtensible;function il(t){return t()}function Rs(t){for(var e=0;e<t.length;e++)t[e]()}function Un(){var t,e,a=new Promise((r,s)=>{t=r,e=s});return{promise:a,resolve:t,reject:e}}function Vs(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const a=[];for(const r of t)if(a.push(r),a.length===e)break;return a}const vt=2,ps=4,Ka=8,Yn=1<<24,ta=16,aa=32,xa=64,Ws=128,At=512,ut=1024,mt=2048,Bt=4096,Tt=8192,Zt=16384,Zs=32768,ma=65536,xn=1<<17,Hn=1<<18,$a=1<<19,Xn=1<<20,Wt=1<<25,ba=32768,$s=1<<21,Js=1<<22,ia=1<<23,Jt=Symbol("$state"),ol=Symbol("legacy props"),cl=Symbol(""),Ea=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Vn(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ul(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function vl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function dl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function fl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function pl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function hl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function _l(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function gl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ml(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function bl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const yl=1,kl=2,Wn=4,wl=8,xl=16,Sl=1,ql=2,Tl=4,jl=8,El=16,Al=1,Cl=2,ct=Symbol(),Dl="http://www.w3.org/1999/xhtml";function Pl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Rl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Zn(t){return t===this.v}function $l(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Jn(t){return!$l(t,this.v)}let za=!1,zl=!1;function Ml(){za=!0}let He=null;function Ca(t){He=t}function Je(t,e=!1,a){He={p:He,i:!1,c:null,e:null,s:t,x:null,l:za&&!e?{s:null,u:null,$:[]}:null}}function Qe(t){var e=He,a=e.e;if(a!==null){e.e=null;for(var r of a)_r(r)}return t!==void 0&&(e.x=t),e.i=!0,He=e.p,t??{}}function es(){return!za||He!==null&&He.l===null}let pa=[];function Qn(){var t=pa;pa=[],Rs(t)}function Ot(t){if(pa.length===0&&!Va){var e=pa;queueMicrotask(()=>{e===pa&&Qn()})}pa.push(t)}function Il(){for(;pa.length>0;)Qn()}function Kn(t){var e=ze;if(e===null)return qe.f|=ia,t;if((e.f&Zs)===0){if((e.f&Ws)===0)throw t;e.b.error(t)}else Da(t,e)}function Da(t,e){for(;e!==null;){if((e.f&Ws)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Ll=-7169;function at(t,e){t.f=t.f&Ll|e}function Qs(t){(t.f&At)!==0||t.deps===null?at(t,ut):at(t,Bt)}function er(t){if(t!==null)for(const e of t)(e.f&vt)===0||(e.f&ba)===0||(e.f^=ba,er(e.deps))}function tr(t,e,a){(t.f&mt)!==0?e.add(t):(t.f&Bt)!==0&&a.add(t),er(t.deps),at(t,ut)}const os=new Set;let Re=null,hs=null,zt=null,qt=[],ws=null,zs=!1,Va=!1;class oa{committed=!1;current=new Map;previous=new Map;#t=new Set;#l=new Set;#e=0;#n=0;#r=null;#s=new Set;#a=new Set;skipped_effects=new Set;is_fork=!1;#i=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){qt=[],this.apply();var a=[],r=[];for(const s of e)this.#o(s,a,r);if(this.is_deferred())this.#c(r),this.#c(a);else{for(const s of this.#t)s();this.#t.clear(),this.#e===0&&this.#u(),hs=this,Re=null,Sn(r),Sn(a),hs=null,this.#r?.resolve()}zt=null}#o(e,a,r){e.f^=ut;for(var s=e.first,l=null;s!==null;){var i=s.f,v=(i&(aa|xa))!==0,u=v&&(i&ut)!==0,d=u||(i&Tt)!==0||this.skipped_effects.has(s);if(!d&&s.fn!==null){v?s.f^=ut:l!==null&&(i&(ps|Ka|Yn))!==0?l.b.defer_effect(s):(i&ps)!==0?a.push(s):Ma(s)&&((i&ta)!==0&&this.#s.add(s),Ra(s));var f=s.first;if(f!==null){s=f;continue}}var y=s.parent;for(s=s.next;s===null&&y!==null;)y===l&&(l=null),s=y.next,y=y.parent}}#c(e){for(var a=0;a<e.length;a+=1)tr(e[a],this.#s,this.#a)}capture(e,a){a!==ct&&!this.previous.has(e)&&this.previous.set(e,a),(e.f&ia)===0&&(this.current.set(e,e.v),zt?.set(e,e.v))}activate(){Re=this,this.apply()}deactivate(){Re===this&&(Re=null,zt=null)}flush(){if(this.activate(),qt.length>0){if(ar(),Re!==null&&Re!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#l)e(this);this.#l.clear()}#u(){if(os.size>1){this.previous.clear();var e=zt,a=!0;for(const s of os){if(s===this){a=!1;continue}const l=[];for(const[v,u]of this.current){if(s.current.has(v))if(a&&u!==s.current.get(v))s.current.set(v,u);else continue;l.push(v)}if(l.length===0)continue;const i=[...s.current.keys()].filter(v=>!this.current.has(v));if(i.length>0){var r=qt;qt=[];const v=new Set,u=new Map;for(const d of l)sr(d,i,v,u);if(qt.length>0){Re=s,s.apply();for(const d of qt)s.#o(d,[],[]);s.deactivate()}qt=r}}Re=null,zt=e}this.committed=!0,os.delete(this)}increment(e){this.#e+=1,e&&(this.#n+=1)}decrement(e){this.#e-=1,e&&(this.#n-=1),!this.#i&&(this.#i=!0,Ot(()=>{this.#i=!1,this.is_deferred()?qt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#s)this.#a.delete(e),at(e,mt),ea(e);for(const e of this.#a)at(e,Bt),ea(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#l.add(e)}settled(){return(this.#r??=Un()).promise}static ensure(){if(Re===null){const e=Re=new oa;os.add(Re),Va||Ot(()=>{Re===e&&e.flush()})}return Re}apply(){}}function Ol(t){var e=Va;Va=!0;try{for(var a;;){if(Il(),qt.length===0&&(Re?.flush(),qt.length===0))return ws=null,a;ar()}}finally{Va=e}}function ar(){zs=!0;var t=null;try{for(var e=0;qt.length>0;){var a=oa.ensure();if(e++>1e3){var r,s;Nl()}a.process(qt),ca.clear()}}finally{zs=!1,ws=null}}function Nl(){try{pl()}catch(t){Da(t,ws)}}let Vt=null;function Sn(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Zt|Tt))===0&&Ma(r)&&(Vt=new Set,Ra(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?kr(r):r.fn=null),Vt?.size>0)){ca.clear();for(const s of Vt){if((s.f&(Zt|Tt))!==0)continue;const l=[s];let i=s.parent;for(;i!==null;)Vt.has(i)&&(Vt.delete(i),l.push(i)),i=i.parent;for(let v=l.length-1;v>=0;v--){const u=l[v];(u.f&(Zt|Tt))===0&&Ra(u)}}Vt.clear()}}Vt=null}}function sr(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const s of t.reactions){const l=s.f;(l&vt)!==0?sr(s,e,a,r):(l&(Js|ta))!==0&&(l&mt)===0&&nr(s,e,r)&&(at(s,mt),ea(s))}}function nr(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const s of t.deps){if(e.includes(s))return!0;if((s.f&vt)!==0&&nr(s,e,a))return a.set(s,!0),!0}return a.set(t,!1),!1}function ea(t){for(var e=ws=t;e.parent!==null;){e=e.parent;var a=e.f;if(zs&&e===ze&&(a&ta)!==0&&(a&Hn)===0)return;if((a&(xa|aa))!==0){if((a&ut)===0)return;e.f^=ut}}qt.push(e)}function Fl(t){let e=0,a=ya(0),r;return()=>{tn()&&(n(a),ss(()=>(e===0&&(r=va(()=>t(()=>Wa(a)))),e+=1,()=>{Ot(()=>{e-=1,e===0&&(r?.(),r=void 0,Wa(a))})})))}}var Bl=ma|$a|Ws;function Gl(t,e,a){new Ul(t,e,a)}class Ul{parent;is_pending=!1;#t;#l=null;#e;#n;#r;#s=null;#a=null;#i=null;#o=null;#c=null;#u=0;#d=0;#p=!1;#f=!1;#h=new Set;#_=new Set;#v=null;#k=Fl(()=>(this.#v=ya(this.#u),()=>{this.#v=null}));constructor(e,a,r){this.#t=e,this.#e=a,this.#n=r,this.parent=ze.b,this.is_pending=!!this.#e.pending,this.#r=Ss(()=>{ze.b=this;{var s=this.#b();try{this.#s=Et(()=>r(s))}catch(l){this.error(l)}this.#d>0?this.#m():this.is_pending=!1}return()=>{this.#c?.remove()}},Bl)}#w(){try{this.#s=Et(()=>this.#n(this.#t))}catch(e){this.error(e)}}#x(){const e=this.#e.pending;e&&(this.#a=Et(()=>e(this.#t)),Ot(()=>{var a=this.#b();this.#s=this.#g(()=>(oa.ensure(),Et(()=>this.#n(a)))),this.#d>0?this.#m():(_a(this.#a,()=>{this.#a=null}),this.is_pending=!1)}))}#b(){var e=this.#t;return this.is_pending&&(this.#c=Qt(),this.#t.before(this.#c),e=this.#c),e}defer_effect(e){tr(e,this.#h,this.#_)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(e){var a=ze,r=qe,s=He;Ft(this.#r),wt(this.#r),Ca(this.#r.ctx);try{return e()}catch(l){return Kn(l),null}finally{Ft(a),wt(r),Ca(s)}}#m(){const e=this.#e.pending;this.#s!==null&&(this.#o=document.createDocumentFragment(),this.#o.append(this.#c),Sr(this.#s,this.#o)),this.#a===null&&(this.#a=Et(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}if(this.#d+=e,this.#d===0){this.is_pending=!1;for(const a of this.#h)at(a,mt),ea(a);for(const a of this.#_)at(a,Bt),ea(a);this.#h.clear(),this.#_.clear(),this.#a&&_a(this.#a,()=>{this.#a=null}),this.#o&&(this.#t.before(this.#o),this.#o=null)}}update_pending_count(e){this.#y(e),this.#u+=e,!(!this.#v||this.#p)&&(this.#p=!0,Ot(()=>{this.#p=!1,this.#v&&Pa(this.#v,this.#u)}))}get_effect_pending(){return this.#k(),n(this.#v)}error(e){var a=this.#e.onerror;let r=this.#e.failed;if(this.#f||!a&&!r)throw e;this.#s&&(xt(this.#s),this.#s=null),this.#a&&(xt(this.#a),this.#a=null),this.#i&&(xt(this.#i),this.#i=null);var s=!1,l=!1;const i=()=>{if(s){Rl();return}s=!0,l&&bl(),oa.ensure(),this.#u=0,this.#i!==null&&_a(this.#i,()=>{this.#i=null}),this.is_pending=this.has_pending_snippet(),this.#s=this.#g(()=>(this.#f=!1,Et(()=>this.#n(this.#t)))),this.#d>0?this.#m():this.is_pending=!1};var v=qe;try{wt(null),l=!0,a?.(e,i),l=!1}catch(u){Da(u,this.#r&&this.#r.parent)}finally{wt(v)}r&&Ot(()=>{this.#i=this.#g(()=>{oa.ensure(),this.#f=!0;try{return Et(()=>{r(this.#t,()=>e,()=>i)})}catch(u){return Da(u,this.#r.parent),null}finally{this.#f=!1}})})}}function Yl(t,e,a,r){const s=es()?ts:Ks;var l=t.filter(h=>!h.settled);if(a.length===0&&l.length===0){r(e.map(s));return}var i=Re,v=ze,u=Hl(),d=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(h=>h.promise)):null;function f(h){u();try{r(h)}catch(m){(v.f&Zt)===0&&Da(m,v)}i?.deactivate(),Ms()}if(a.length===0){d.then(()=>f(e.map(s)));return}function y(){u(),Promise.all(a.map(h=>Xl(h))).then(h=>f([...e.map(s),...h])).catch(h=>Da(h,v))}d?d.then(y):y()}function Hl(){var t=ze,e=qe,a=He,r=Re;return function(l=!0){Ft(t),wt(e),Ca(a),l&&r?.activate()}}function Ms(){Ft(null),wt(null),Ca(null)}function ts(t){var e=vt|mt,a=qe!==null&&(qe.f&vt)!==0?qe:null;return ze!==null&&(ze.f|=$a),{ctx:He,deps:null,effects:null,equals:Zn,f:e,fn:t,reactions:null,rv:0,v:ct,wv:0,parent:a??ze,ac:null}}function Xl(t,e,a){let r=ze;r===null&&ul();var s=r.b,l=void 0,i=ya(ct),v=!qe,u=new Map;return ri(()=>{var d=Un();l=d.promise;try{Promise.resolve(t()).then(d.resolve,d.reject).then(()=>{f===Re&&f.committed&&f.deactivate(),Ms()})}catch(m){d.reject(m),Ms()}var f=Re;if(v){var y=s.is_rendered();s.update_pending_count(1),f.increment(y),u.get(f)?.reject(Ea),u.delete(f),u.set(f,d)}const h=(m,x=void 0)=>{if(f.activate(),x)x!==Ea&&(i.f|=ia,Pa(i,x));else{(i.f&ia)!==0&&(i.f^=ia),Pa(i,m);for(const[S,k]of u){if(u.delete(S),S===f)break;k.reject(Ea)}}v&&(s.update_pending_count(-1),f.decrement(y))};d.promise.then(h,m=>h(null,m||"unknown"))}),an(()=>{for(const d of u.values())d.reject(Ea)}),new Promise(d=>{function f(y){function h(){y===l?d(i):f(l)}y.then(h,h)}f(l)})}function We(t){const e=ts(t);return qr(e),e}function Ks(t){const e=ts(t);return e.equals=Jn,e}function rr(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)xt(e[a])}}function Vl(t){for(var e=t.parent;e!==null;){if((e.f&vt)===0)return(e.f&Zt)===0?e:null;e=e.parent}return null}function en(t){var e,a=ze;Ft(Vl(t));try{t.f&=~ba,rr(t),e=Ar(t)}finally{Ft(a)}return e}function lr(t){var e=en(t);if(!t.equals(e)&&(t.wv=jr(),(!Re?.is_fork||t.deps===null)&&(t.v=e,t.deps===null))){at(t,ut);return}ua||(zt!==null?(tn()||Re?.is_fork)&&zt.set(t,e):Qs(t))}let Is=new Set;const ca=new Map;let ir=!1;function ya(t,e){var a={f:0,v:t,reactions:null,equals:Zn,rv:0,wv:0};return a}function j(t,e){const a=ya(t);return qr(a),a}function Ua(t,e=!1,a=!0){const r=ya(t);return e||(r.equals=Jn),za&&a&&He!==null&&He.l!==null&&(He.l.s??=[]).push(r),r}function p(t,e,a=!1){qe!==null&&(!Mt||(qe.f&xn)!==0)&&es()&&(qe.f&(vt|ta|Js|xn))!==0&&!Kt?.includes(t)&&ml();let r=a?ke(e):e;return Pa(t,r)}function Pa(t,e){if(!t.equals(e)){var a=t.v;ua?ca.set(t,e):ca.set(t,a),t.v=e;var r=oa.ensure();if(r.capture(t,a),(t.f&vt)!==0){const s=t;(t.f&mt)!==0&&en(s),Qs(s)}t.wv=jr(),or(t,mt),es()&&ze!==null&&(ze.f&ut)!==0&&(ze.f&(aa|xa))===0&&(jt===null?ii([t]):jt.push(t)),!r.is_fork&&Is.size>0&&!ir&&Wl()}return e}function Wl(){ir=!1;for(const t of Is)(t.f&ut)!==0&&at(t,Bt),Ma(t)&&Ra(t);Is.clear()}function Wa(t){p(t,t.v+1)}function or(t,e){var a=t.reactions;if(a!==null)for(var r=es(),s=a.length,l=0;l<s;l++){var i=a[l],v=i.f;if(!(!r&&i===ze)){var u=(v&mt)===0;if(u&&at(i,e),(v&vt)!==0){var d=i;zt?.delete(d),(v&ba)===0&&(v&At&&(i.f|=ba),or(d,Bt))}else u&&((v&ta)!==0&&Vt!==null&&Vt.add(i),ea(i))}}}function ke(t){if(typeof t!="object"||t===null||Jt in t)return t;const e=Xs(t);if(e!==rl&&e!==ll)return t;var a=new Map,r=ys(t),s=j(0),l=ga,i=v=>{if(ga===l)return v();var u=qe,d=ga;wt(null),An(l);var f=v();return wt(u),An(d),f};return r&&a.set("length",j(t.length)),new Proxy(t,{defineProperty(v,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&_l();var f=a.get(u);return f===void 0?f=i(()=>{var y=j(d.value);return a.set(u,y),y}):p(f,d.value,!0),!0},deleteProperty(v,u){var d=a.get(u);if(d===void 0){if(u in v){const f=i(()=>j(ct));a.set(u,f),Wa(s)}}else p(d,ct),Wa(s);return!0},get(v,u,d){if(u===Jt)return t;var f=a.get(u),y=u in v;if(f===void 0&&(!y||Aa(v,u)?.writable)&&(f=i(()=>{var m=ke(y?v[u]:ct),x=j(m);return x}),a.set(u,f)),f!==void 0){var h=n(f);return h===ct?void 0:h}return Reflect.get(v,u,d)},getOwnPropertyDescriptor(v,u){var d=Reflect.getOwnPropertyDescriptor(v,u);if(d&&"value"in d){var f=a.get(u);f&&(d.value=n(f))}else if(d===void 0){var y=a.get(u),h=y?.v;if(y!==void 0&&h!==ct)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(v,u){if(u===Jt)return!0;var d=a.get(u),f=d!==void 0&&d.v!==ct||Reflect.has(v,u);if(d!==void 0||ze!==null&&(!f||Aa(v,u)?.writable)){d===void 0&&(d=i(()=>{var h=f?ke(v[u]):ct,m=j(h);return m}),a.set(u,d));var y=n(d);if(y===ct)return!1}return f},set(v,u,d,f){var y=a.get(u),h=u in v;if(r&&u==="length")for(var m=d;m<y.v;m+=1){var x=a.get(m+"");x!==void 0?p(x,ct):m in v&&(x=i(()=>j(ct)),a.set(m+"",x))}if(y===void 0)(!h||Aa(v,u)?.writable)&&(y=i(()=>j(void 0)),p(y,ke(d)),a.set(u,y));else{h=y.v!==ct;var S=i(()=>ke(d));p(y,S)}var k=Reflect.getOwnPropertyDescriptor(v,u);if(k?.set&&k.set.call(f,d),!h){if(r&&typeof u=="string"){var b=a.get("length"),A=Number(u);Number.isInteger(A)&&A>=b.v&&p(b,A+1)}Wa(s)}return!0},ownKeys(v){n(s);var u=Reflect.ownKeys(v).filter(y=>{var h=a.get(y);return h===void 0||h.v!==ct});for(var[d,f]of a)f.v!==ct&&!(d in v)&&u.push(d);return u},setPrototypeOf(){gl()}})}function qn(t){try{if(t!==null&&typeof t=="object"&&Jt in t)return t[Jt]}catch{}return t}function Zl(t,e){return Object.is(qn(t),qn(e))}var Tn,cr,ur,vr;function Jl(){if(Tn===void 0){Tn=window,cr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;ur=Aa(e,"firstChild").get,vr=Aa(e,"nextSibling").get,wn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),wn(a)&&(a.__t=void 0)}}function Qt(t=""){return document.createTextNode(t)}function la(t){return ur.call(t)}function as(t){return vr.call(t)}function o(t,e){return la(t)}function Se(t,e=!1){{var a=la(t);return a instanceof Comment&&a.data===""?as(a):a}}function c(t,e=1,a=!1){let r=t;for(;e--;)r=as(r);return r}function Ql(t){t.textContent=""}function dr(){return!1}function fr(t,e){{const a=document.body;t.autofocus=!0,Ot(()=>{document.activeElement===a&&t.focus()})}}let jn=!1;function Kl(){jn||(jn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function xs(t){var e=qe,a=ze;wt(null),Ft(null);try{return t()}finally{wt(e),Ft(a)}}function pr(t,e,a,r=a){t.addEventListener(e,()=>xs(a));const s=t.__on_r;s?t.__on_r=()=>{s(),r(!0)}:t.__on_r=()=>r(!0),Kl()}function hr(t){ze===null&&(qe===null&&fl(),dl()),ua&&vl()}function ei(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function Gt(t,e,a){var r=ze;r!==null&&(r.f&Tt)!==0&&(t|=Tt);var s={ctx:He,deps:null,nodes:null,f:t|mt|At,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{Ra(s),s.f|=Zs}catch(v){throw xt(s),v}else e!==null&&ea(s);var l=s;if(a&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&$a)===0&&(l=l.first,(t&ta)!==0&&(t&ma)!==0&&l!==null&&(l.f|=ma)),l!==null&&(l.parent=r,r!==null&&ei(l,r),qe!==null&&(qe.f&vt)!==0&&(t&xa)===0)){var i=qe;(i.effects??=[]).push(l)}return s}function tn(){return qe!==null&&!Mt}function an(t){const e=Gt(Ka,null,!1);return at(e,ut),e.teardown=t,e}function Nt(t){hr();var e=ze.f,a=!qe&&(e&aa)!==0&&(e&Zs)===0;if(a){var r=He;(r.e??=[]).push(t)}else return _r(t)}function _r(t){return Gt(ps|Xn,t,!1)}function ti(t){return hr(),Gt(Ka|Xn,t,!0)}function ai(t){oa.ensure();const e=Gt(xa|$a,t,!0);return(a={})=>new Promise(r=>{a.outro?_a(e,()=>{xt(e),r(void 0)}):(xt(e),r(void 0))})}function gr(t){return Gt(ps,t,!1)}function si(t,e){var a=He,r={effect:null,ran:!1,deps:t};a.l.$.push(r),r.effect=ss(()=>{t(),!r.ran&&(r.ran=!0,va(e))})}function ni(){var t=He;ss(()=>{for(var e of t.l.$){e.deps();var a=e.effect;(a.f&ut)!==0&&a.deps!==null&&at(a,Bt),Ma(a)&&Ra(a),e.ran=!1}})}function ri(t){return Gt(Js|$a,t,!0)}function ss(t,e=0){return Gt(Ka|e,t,!0)}function H(t,e=[],a=[],r=[]){Yl(r,e,a,s=>{Gt(Ka,()=>t(...s.map(n)),!0)})}function Ss(t,e=0){var a=Gt(ta|e,t,!0);return a}function Et(t){return Gt(aa|$a,t,!0)}function mr(t){var e=t.teardown;if(e!==null){const a=ua,r=qe;En(!0),wt(null);try{e.call(null)}finally{En(a),wt(r)}}}function br(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const s=a.ac;s!==null&&xs(()=>{s.abort(Ea)});var r=a.next;(a.f&xa)!==0?a.parent=null:xt(a,e),a=r}}function li(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&aa)===0&&xt(e),e=a}}function xt(t,e=!0){var a=!1;(e||(t.f&Hn)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(yr(t.nodes.start,t.nodes.end),a=!0),br(t,e&&!a),_s(t,0),at(t,Zt);var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)l.stop();mr(t);var s=t.parent;s!==null&&s.first!==null&&kr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function yr(t,e){for(;t!==null;){var a=t===e?null:as(t);t.remove(),t=a}}function kr(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function _a(t,e,a=!0){var r=[];wr(t,r,!0);var s=()=>{a&&xt(t),e&&e()},l=r.length;if(l>0){var i=()=>--l||s();for(var v of r)v.out(i)}else s()}function wr(t,e,a){if((t.f&Tt)===0){t.f^=Tt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const v of r)(v.is_global||a)&&e.push(v);for(var s=t.first;s!==null;){var l=s.next,i=(s.f&ma)!==0||(s.f&aa)!==0&&(t.f&ta)!==0;wr(s,e,i?a:!1),s=l}}}function sn(t){xr(t,!0)}function xr(t,e){if((t.f&Tt)!==0){t.f^=Tt,(t.f&ut)===0&&(at(t,mt),ea(t));for(var a=t.first;a!==null;){var r=a.next,s=(a.f&ma)!==0||(a.f&aa)!==0;xr(a,s?e:!1),a=r}var l=t.nodes&&t.nodes.t;if(l!==null)for(const i of l)(i.is_global||e)&&i.in()}}function Sr(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var s=a===r?null:as(a);e.append(a),a=s}}let fs=!1,ua=!1;function En(t){ua=t}let qe=null,Mt=!1;function wt(t){qe=t}let ze=null;function Ft(t){ze=t}let Kt=null;function qr(t){qe!==null&&(Kt===null?Kt=[t]:Kt.push(t))}let kt=null,St=0,jt=null;function ii(t){jt=t}let Tr=1,ha=0,ga=ha;function An(t){ga=t}function jr(){return++Tr}function Ma(t){var e=t.f;if((e&mt)!==0)return!0;if(e&vt&&(t.f&=~ba),(e&Bt)!==0){for(var a=t.deps,r=a.length,s=0;s<r;s++){var l=a[s];if(Ma(l)&&lr(l),l.wv>t.wv)return!0}(e&At)!==0&&zt===null&&at(t,ut)}return!1}function Er(t,e,a=!0){var r=t.reactions;if(r!==null&&!Kt?.includes(t))for(var s=0;s<r.length;s++){var l=r[s];(l.f&vt)!==0?Er(l,e,!1):e===l&&(a?at(l,mt):(l.f&ut)!==0&&at(l,Bt),ea(l))}}function Ar(t){var e=kt,a=St,r=jt,s=qe,l=Kt,i=He,v=Mt,u=ga,d=t.f;kt=null,St=0,jt=null,qe=(d&(aa|xa))===0?t:null,Kt=null,Ca(t.ctx),Mt=!1,ga=++ha,t.ac!==null&&(xs(()=>{t.ac.abort(Ea)}),t.ac=null);try{t.f|=$s;var f=t.fn,y=f(),h=t.deps;if(kt!==null){var m;if(_s(t,St),h!==null&&St>0)for(h.length=St+kt.length,m=0;m<kt.length;m++)h[St+m]=kt[m];else t.deps=h=kt;if(tn()&&(t.f&At)!==0)for(m=St;m<h.length;m++)(h[m].reactions??=[]).push(t)}else h!==null&&St<h.length&&(_s(t,St),h.length=St);if(es()&&jt!==null&&!Mt&&h!==null&&(t.f&(vt|Bt|mt))===0)for(m=0;m<jt.length;m++)Er(jt[m],t);if(s!==null&&s!==t){if(ha++,s.deps!==null)for(let x=0;x<a;x+=1)s.deps[x].rv=ha;if(e!==null)for(const x of e)x.rv=ha;jt!==null&&(r===null?r=jt:r.push(...jt))}return(t.f&ia)!==0&&(t.f^=ia),y}catch(x){return Kn(x)}finally{t.f^=$s,kt=e,St=a,jt=r,qe=s,Kt=l,Ca(i),Mt=v,ga=u}}function oi(t,e){let a=e.reactions;if(a!==null){var r=sl.call(a,t);if(r!==-1){var s=a.length-1;s===0?a=e.reactions=null:(a[r]=a[s],a.pop())}}if(a===null&&(e.f&vt)!==0&&(kt===null||!kt.includes(e))){var l=e;(l.f&At)!==0&&(l.f^=At,l.f&=~ba),Qs(l),rr(l),_s(l,0)}}function _s(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)oi(t,a[r])}function Ra(t){var e=t.f;if((e&Zt)===0){at(t,ut);var a=ze,r=fs;ze=t,fs=!0;try{(e&(ta|Yn))!==0?li(t):br(t),mr(t);var s=Ar(t);t.teardown=typeof s=="function"?s:null,t.wv=Tr;var l;Ps&&zl&&(t.f&mt)!==0&&t.deps}finally{fs=r,ze=a}}}async function ci(){await Promise.resolve(),Ol()}function n(t){var e=t.f,a=(e&vt)!==0;if(qe!==null&&!Mt){var r=ze!==null&&(ze.f&Zt)!==0;if(!r&&!Kt?.includes(t)){var s=qe.deps;if((qe.f&$s)!==0)t.rv<ha&&(t.rv=ha,kt===null&&s!==null&&s[St]===t?St++:kt===null?kt=[t]:kt.push(t));else{(qe.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[qe]:l.includes(qe)||l.push(qe)}}}if(ua&&ca.has(t))return ca.get(t);if(a){var i=t;if(ua){var v=i.v;return((i.f&ut)===0&&i.reactions!==null||Dr(i))&&(v=en(i)),ca.set(i,v),v}var u=(i.f&At)===0&&!Mt&&qe!==null&&(fs||(qe.f&At)!==0),d=i.deps===null;Ma(i)&&(u&&(i.f|=At),lr(i)),u&&!d&&Cr(i)}if(zt?.has(t))return zt.get(t);if((t.f&ia)!==0)throw t.v;return t.v}function Cr(t){if(t.deps!==null){t.f|=At;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&vt)!==0&&(e.f&At)===0&&Cr(e)}}function Dr(t){if(t.v===ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ca.has(e)||(e.f&vt)!==0&&Dr(e))return!0;return!1}function va(t){var e=Mt;try{return Mt=!0,t()}finally{Mt=e}}function Pr(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Jt in t)Ls(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Jt in a&&Ls(a)}}}function Ls(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ls(t[r],e)}catch{}const a=Xs(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Gn(a);for(let s in r){const l=r[s].get;if(l)try{l.call(t)}catch{}}}}}const ui=["touchstart","touchmove"];function vi(t){return ui.includes(t)}const Rr=new Set,Os=new Set;function di(t,e,a,r={}){function s(l){if(r.capture||Ya.call(e,l),!l.cancelBubble)return xs(()=>a?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ot(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function ka(t,e,a,r,s){var l={capture:r,passive:s},i=di(t,e,a,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&an(()=>{e.removeEventListener(t,i,l)})}function st(t){for(var e=0;e<t.length;e++)Rr.add(t[e]);for(var a of Os)a(t)}let Cn=null;function Ya(t){var e=this,a=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],l=s[0]||t.target;Cn=t;var i=0,v=Cn===t&&t.__root;if(v){var u=s.indexOf(v);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var d=s.indexOf(e);if(d===-1)return;u<=d&&(i=u)}if(l=s[i]||t.target,l!==e){nl(t,"currentTarget",{configurable:!0,get(){return l||a}});var f=qe,y=ze;wt(null),Ft(null);try{for(var h,m=[];l!==null;){var x=l.assignedSlot||l.parentNode||l.host||null;try{var S=l["__"+r];S!=null&&(!l.disabled||t.target===l)&&S.call(l,t)}catch(k){h?m.push(k):h=k}if(t.cancelBubble||x===e||x===null)break;l=x}if(h){for(let k of m)queueMicrotask(()=>{throw k});throw h}}finally{t.__root=e,delete t.currentTarget,wt(f),Ft(y)}}}function $r(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Qa(t,e){var a=ze;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function w(t,e){var a=(e&Al)!==0,r=(e&Cl)!==0,s,l=!t.startsWith("<!>");return()=>{s===void 0&&(s=$r(l?t:"<!>"+t),a||(s=la(s)));var i=r||cr?document.importNode(s,!0):s.cloneNode(!0);if(a){var v=la(i),u=i.lastChild;Qa(v,u)}else Qa(i,i);return i}}function fi(t=""){{var e=Qt(t+"");return Qa(e,e),e}}function Be(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Qt();return t.append(e,a),Qa(e,a),t}function g(t,e){t!==null&&t.before(e)}function q(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??=t.nodeValue)&&(t.__t=a,t.nodeValue=a+"")}function pi(t,e){return hi(t,e)}const ja=new Map;function hi(t,{target:e,anchor:a,props:r={},events:s,context:l,intro:i=!0}){Jl();var v=new Set,u=y=>{for(var h=0;h<y.length;h++){var m=y[h];if(!v.has(m)){v.add(m);var x=vi(m);e.addEventListener(m,Ya,{passive:x});var S=ja.get(m);S===void 0?(document.addEventListener(m,Ya,{passive:x}),ja.set(m,1)):ja.set(m,S+1)}}};u(ks(Rr)),Os.add(u);var d=void 0,f=ai(()=>{var y=a??e.appendChild(Qt());return Gl(y,{pending:()=>{}},h=>{if(l){Je({});var m=He;m.c=l}s&&(r.$$events=s),d=t(h,r)||{},l&&Qe()}),()=>{for(var h of v){e.removeEventListener(h,Ya);var m=ja.get(h);--m===0?(document.removeEventListener(h,Ya),ja.delete(h)):ja.set(h,m)}Os.delete(u),y!==a&&y.parentNode?.removeChild(y)}});return _i.set(d,f),d}let _i=new WeakMap;class zr{anchor;#t=new Map;#l=new Map;#e=new Map;#n=new Set;#r=!0;constructor(e,a=!0){this.anchor=e,this.#r=a}#s=()=>{var e=Re;if(this.#t.has(e)){var a=this.#t.get(e),r=this.#l.get(a);if(r)sn(r),this.#n.delete(a);else{var s=this.#e.get(a);s&&(this.#l.set(a,s.effect),this.#e.delete(a),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[l,i]of this.#t){if(this.#t.delete(l),l===e)break;const v=this.#e.get(i);v&&(xt(v.effect),this.#e.delete(i))}for(const[l,i]of this.#l){if(l===a||this.#n.has(l))continue;const v=()=>{if(Array.from(this.#t.values()).includes(l)){var d=document.createDocumentFragment();Sr(i,d),d.append(Qt()),this.#e.set(l,{effect:i,fragment:d})}else xt(i);this.#n.delete(l),this.#l.delete(l)};this.#r||!r?(this.#n.add(l),_a(i,v,!1)):v()}}};#a=e=>{this.#t.delete(e);const a=Array.from(this.#t.values());for(const[r,s]of this.#e)a.includes(r)||(xt(s.effect),this.#e.delete(r))};ensure(e,a){var r=Re,s=dr();if(a&&!this.#l.has(e)&&!this.#e.has(e))if(s){var l=document.createDocumentFragment(),i=Qt();l.append(i),this.#e.set(e,{effect:Et(()=>a(i)),fragment:l})}else this.#l.set(e,Et(()=>a(this.anchor)));if(this.#t.set(r,e),s){for(const[v,u]of this.#l)v===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[v,u]of this.#e)v===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#s),r.ondiscard(this.#a)}else this.#s()}}function $(t,e,a=!1){var r=new zr(t),s=a?ma:0;function l(i,v){r.ensure(i,v)}Ss(()=>{var i=!1;e((v,u=!0)=>{i=!0,l(u,v)}),i||l(!1,null)},s)}function Ye(t,e){return e}function gi(t,e,a){for(var r=[],s=e.length,l,i=e.length,v=0;v<s;v++){let y=e[v];_a(y,()=>{if(l){if(l.pending.delete(y),l.done.add(y),l.pending.size===0){var h=t.outrogroups;Ns(ks(l.done)),h.delete(l),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var u=r.length===0&&a!==null;if(u){var d=a,f=d.parentNode;Ql(f),f.append(d),t.items.clear()}Ns(e,!u)}else l={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(l)}function Ns(t,e=!0){for(var a=0;a<t.length;a++)xt(t[a],e)}var Dn;function $e(t,e,a,r,s,l=null){var i=t,v=new Map,u=(e&Wn)!==0;if(u){var d=t;i=d.appendChild(Qt())}var f=null,y=Ks(()=>{var b=a();return ys(b)?b:b==null?[]:ks(b)}),h,m=!0;function x(){k.fallback=f,mi(k,h,i,e,r),f!==null&&(h.length===0?(f.f&Wt)===0?sn(f):(f.f^=Wt,Ha(f,null,i)):_a(f,()=>{f=null}))}var S=Ss(()=>{h=n(y);for(var b=h.length,A=new Set,_=Re,T=dr(),z=0;z<b;z+=1){var R=h[z],Y=r(R,z),ae=m?null:v.get(Y);ae?(ae.v&&Pa(ae.v,R),ae.i&&Pa(ae.i,z),T&&_.skipped_effects.delete(ae.e)):(ae=bi(v,m?i:Dn??=Qt(),R,Y,z,s,e,a),m||(ae.e.f|=Wt),v.set(Y,ae)),A.add(Y)}if(b===0&&l&&!f&&(m?f=Et(()=>l(i)):(f=Et(()=>l(Dn??=Qt())),f.f|=Wt)),!m)if(T){for(const[O,Z]of v)A.has(O)||_.skipped_effects.add(Z.e);_.oncommit(x),_.ondiscard(()=>{})}else x();n(y)}),k={effect:S,items:v,outrogroups:null,fallback:f};m=!1}function mi(t,e,a,r,s){var l=(r&wl)!==0,i=e.length,v=t.items,u=t.effect.first,d,f=null,y,h=[],m=[],x,S,k,b;if(l)for(b=0;b<i;b+=1)x=e[b],S=s(x,b),k=v.get(S).e,(k.f&Wt)===0&&(k.nodes?.a?.measure(),(y??=new Set).add(k));for(b=0;b<i;b+=1){if(x=e[b],S=s(x,b),k=v.get(S).e,t.outrogroups!==null)for(const Z of t.outrogroups)Z.pending.delete(k),Z.done.delete(k);if((k.f&Wt)!==0)if(k.f^=Wt,k===u)Ha(k,null,a);else{var A=f?f.next:u;k===t.effect.last&&(t.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),ra(t,f,k),ra(t,k,A),Ha(k,A,a),f=k,h=[],m=[],u=f.next;continue}if((k.f&Tt)!==0&&(sn(k),l&&(k.nodes?.a?.unfix(),(y??=new Set).delete(k))),k!==u){if(d!==void 0&&d.has(k)){if(h.length<m.length){var _=m[0],T;f=_.prev;var z=h[0],R=h[h.length-1];for(T=0;T<h.length;T+=1)Ha(h[T],_,a);for(T=0;T<m.length;T+=1)d.delete(m[T]);ra(t,z.prev,R.next),ra(t,f,z),ra(t,R,_),u=_,f=R,b-=1,h=[],m=[]}else d.delete(k),Ha(k,u,a),ra(t,k.prev,k.next),ra(t,k,f===null?t.effect.first:f.next),ra(t,f,k),f=k;continue}for(h=[],m=[];u!==null&&u!==k;)(d??=new Set).add(u),m.push(u),u=u.next;if(u===null)continue}(k.f&Wt)===0&&h.push(k),f=k,u=k.next}if(t.outrogroups!==null){for(const Z of t.outrogroups)Z.pending.size===0&&(Ns(ks(Z.done)),t.outrogroups?.delete(Z));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||d!==void 0){var Y=[];if(d!==void 0)for(k of d)(k.f&Tt)===0&&Y.push(k);for(;u!==null;)(u.f&Tt)===0&&u!==t.fallback&&Y.push(u),u=u.next;var ae=Y.length;if(ae>0){var O=(r&Wn)!==0&&i===0?a:null;if(l){for(b=0;b<ae;b+=1)Y[b].nodes?.a?.measure();for(b=0;b<ae;b+=1)Y[b].nodes?.a?.fix()}gi(t,Y,O)}}l&&Ot(()=>{if(y!==void 0)for(k of y)k.nodes?.a?.apply()})}function bi(t,e,a,r,s,l,i,v){var u=(i&yl)!==0?(i&xl)===0?Ua(a,!1,!1):ya(a):null,d=(i&kl)!==0?ya(s):null;return{v:u,i:d,e:Et(()=>(l(e,u??a,d??s,v),()=>{t.delete(r)}))}}function Ha(t,e,a){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end,l=e&&(e.f&Wt)===0?e.nodes.start:a;r!==null;){var i=as(r);if(l.before(r),r===s)return;r=i}}function ra(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function yi(t,e,a=!1,r=!1,s=!1){var l=t,i="";H(()=>{var v=ze;if(i!==(i=e()??"")&&(v.nodes!==null&&(yr(v.nodes.start,v.nodes.end),v.nodes=null),i!=="")){var u=i+"";a?u=`<svg>${u}</svg>`:r&&(u=`<math>${u}</math>`);var d=$r(u);if((a||r)&&(d=la(d)),Qa(la(d),d.lastChild),a||r)for(;la(d);)l.before(la(d));else l.before(d)}})}function ki(t,e,...a){var r=new zr(t);Ss(()=>{const s=e()??null;r.ensure(s,s&&(l=>s(l,...a)))},ma)}const Pn=[...` 	
\r\f¬†\v\uFEFF`];function wi(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var s in a)if(a[s])r=r?r+" "+s:s;else if(r.length)for(var l=s.length,i=0;(i=r.indexOf(s,i))>=0;){var v=i+l;(i===0||Pn.includes(r[i-1]))&&(v===r.length||Pn.includes(r[v]))?r=(i===0?"":r.substring(0,i))+r.substring(v+1):i=v}}return r===""?null:r}function xi(t,e){return t==null?null:String(t)}function Ie(t,e,a,r,s,l){var i=t.__className;if(i!==a||i===void 0){var v=wi(a,r,l);v==null?t.removeAttribute("class"):t.className=v,t.__className=a}else if(l&&s!==l)for(var u in l){var d=!!l[u];(s==null||d!==!!s[u])&&t.classList.toggle(u,d)}return l}function Fs(t,e,a,r){var s=t.__style;if(s!==e){var l=xi(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return r}function qs(t,e,a=!1){if(t.multiple){if(e==null)return;if(!ys(e))return Pl();for(var r of t.options)r.selected=e.includes(Za(r));return}for(r of t.options){var s=Za(r);if(Zl(s,e)){r.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function nn(t){var e=new MutationObserver(()=>{qs(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),an(()=>{e.disconnect()})}function pt(t,e,a=e){var r=new WeakSet,s=!0;pr(t,"change",l=>{var i=l?"[selected]":":checked",v;if(t.multiple)v=[].map.call(t.querySelectorAll(i),Za);else{var u=t.querySelector(i)??t.querySelector("option:not([disabled])");v=u&&Za(u)}a(v),Re!==null&&r.add(Re)}),gr(()=>{var l=e();if(t===document.activeElement){var i=hs??Re;if(r.has(i))return}if(qs(t,l,s),s&&l===void 0){var v=t.querySelector(":checked");v!==null&&(l=Za(v),a(l))}t.__value=l,s=!1}),nn(t)}function Za(t){return"__value"in t?t.__value:t.value}const Si=Symbol("is custom element"),qi=Symbol("is html");function Fa(t,e){var a=rn(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function As(t,e){var a=rn(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function Ze(t,e,a,r){var s=rn(t);s[e]!==(s[e]=a)&&(e==="loading"&&(t[cl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Ti(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function rn(t){return t.__attributes??={[Si]:t.nodeName.includes("-"),[qi]:t.namespaceURI===Dl}}var Rn=new Map;function Ti(t){var e=t.getAttribute("is")||t.nodeName,a=Rn.get(e);if(a)return a;Rn.set(e,a=[]);for(var r,s=t,l=Element.prototype;l!==s;){r=Gn(s);for(var i in r)r[i].set&&a.push(i);s=Xs(s)}return a}function Te(t,e,a=e){var r=new WeakSet;pr(t,"input",async s=>{var l=s?t.defaultValue:t.value;if(l=Cs(t)?Ds(l):l,a(l),Re!==null&&r.add(Re),await ci(),l!==(l=e())){var i=t.selectionStart,v=t.selectionEnd,u=t.value.length;if(t.value=l??"",v!==null){var d=t.value.length;i===v&&v===u&&d>u?(t.selectionStart=d,t.selectionEnd=d):(t.selectionStart=i,t.selectionEnd=Math.min(v,d))}}}),va(e)==null&&t.value&&(a(Cs(t)?Ds(t.value):t.value),Re!==null&&r.add(Re)),ss(()=>{var s=e();if(t===document.activeElement){var l=hs??Re;if(r.has(l))return}Cs(t)&&s===Ds(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Cs(t){var e=t.type;return e==="number"||e==="range"}function Ds(t){return t===""?null:+t}function $n(t,e){return t===e||t?.[Jt]===e}function ln(t={},e,a,r){return gr(()=>{var s,l;return ss(()=>{s=l,l=[],va(()=>{t!==a(...l)&&(e(t,...l),s&&$n(a(...s),t)&&e(null,...s))})}),()=>{Ot(()=>{l&&$n(a(...l),t)&&e(null,...l)})}}),t}function Mr(t=!1){const e=He,a=e.l.u;if(!a)return;let r=()=>Pr(e.s);if(t){let s=0,l={};const i=ts(()=>{let v=!1;const u=e.s;for(const d in u)u[d]!==l[d]&&(l[d]=u[d],v=!0);return v&&s++,s});r=()=>n(i)}a.b.length&&ti(()=>{zn(e,r),Rs(a.b)}),Nt(()=>{const s=va(()=>a.m.map(il));return()=>{for(const l of s)typeof l=="function"&&l()}}),a.a.length&&Nt(()=>{zn(e,r),Rs(a.a)})}function zn(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let cs=!1;function ji(t){var e=cs;try{return cs=!1,[t(),cs]}finally{cs=e}}function Ct(t,e,a,r){var s=!za||(a&ql)!==0,l=(a&jl)!==0,i=(a&El)!==0,v=r,u=!0,d=()=>(u&&(u=!1,v=i?va(r):r),v),f;if(l){var y=Jt in t||ol in t;f=Aa(t,e)?.set??(y&&e in t?_=>t[e]=_:void 0)}var h,m=!1;l?[h,m]=ji(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=d(),f&&(s&&hl(),f(h)));var x;if(s?x=()=>{var _=t[e];return _===void 0?d():(u=!0,_)}:x=()=>{var _=t[e];return _!==void 0&&(v=void 0),_===void 0?v:_},s&&(a&Tl)===0)return x;if(f){var S=t.$$legacy;return(function(_,T){return arguments.length>0?((!s||!T||S||m)&&f(T?x():_),_):x()})}var k=!1,b=((a&Sl)!==0?ts:Ks)(()=>(k=!1,x()));l&&n(b);var A=ze;return(function(_,T){if(arguments.length>0){const z=T?n(b):s&&l?ke(_):_;return p(b,z),k=!0,v!==void 0&&(v=z),_}return ua&&k||(A.f&Zt)!==0?b.v:n(b)})}function It(t){He===null&&Vn(),za&&He.l!==null?Ci(He).m.push(t):Nt(()=>{const e=va(t);if(typeof e=="function")return e})}function Ei(t,e,{bubbles:a=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:a,cancelable:r})}function Ai(){const t=He;return t===null&&Vn(),(e,a,r)=>{const s=t.s.$$events?.[e];if(s){const l=ys(s)?s.slice():[s],i=Ei(e,a,r);for(const v of l)v.call(t.x,i);return!i.defaultPrevented}return!0}}function Ci(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Di="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Di);const je="";function Ee(t={}){return{"X-User-Role":localStorage.getItem("user_role")||"admin",...t}}async function on(t){const e=new FormData;e.append("file",t);const a=await fetch(`${je}/upload`,{method:"POST",headers:Ee(),body:e});if(!a.ok)throw new Error("Upload failed");return await a.json()}async function cn(t="",e="",a="",r="registration_date",s="desc",l="",i="",v="",u="registration_date"){const d=new URLSearchParams;return t&&d.append("search",t),e&&d.append("type",e),a&&d.append("status",a),l&&d.append("tag",l),i&&d.append("start_date",i),v&&d.append("end_date",v),u&&d.append("date_field",u),r&&d.append("sort_by",r),s&&d.append("sort_order",s),await(await fetch(`${je}/documents/?${d.toString()}`,{headers:Ee()})).json()}async function Pi(){return await(await fetch(`${je}/tags`,{headers:Ee()})).json()}async function us(t){const e=await fetch(`${je}/settings/${t}`,{headers:Ee()});if(!e.ok)throw new Error("Failed to fetch setting");return await e.json()}async function vs(t,e){const a=await fetch(`${je}/settings/`,{method:"PUT",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify({key:t,value:e})});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||`Failed to update setting (${a.status})`)}return await a.json()}async function Ri(){return await(await fetch(`${je}/api/config-check`,{headers:Ee()})).json()}async function $i(t){return await(await fetch(`${je}/api/test-path?path=${encodeURIComponent(t)}`,{method:"POST",headers:Ee()})).json()}async function zi(t){const e=await fetch(`${je}/documents/`,{method:"POST",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(t)});if(!e.ok){const a=await e.json().catch(()=>({}));throw new Error(a.detail||`Failed to create document (${e.status})`)}return await e.json()}async function Mi(t,e){return await(await fetch(`${je}/documents/${t}`,{method:"PUT",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify({status:e})})).json()}async function Ii(t,e){const a=await fetch(`${je}/documents/${t}`,{method:"PUT",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||`Failed to update document (${a.status})`)}return await a.json()}async function Li(t){const e=new FormData;e.append("file",t);const a=await fetch(`${je}/documents/scan`,{method:"POST",headers:Ee(),body:e});if(!a.ok)throw new Error("Scan failed");return await a.json()}async function Oi(t){return await(await fetch(`${je}/documents/${t}`,{method:"DELETE",headers:Ee()})).json()}async function Ni(t="",e="",a=""){const r=new URLSearchParams;return t&&r.append("type",t),e&&r.append("status",e),a&&r.append("document_id",a),await(await fetch(`${je}/journal/?${r.toString()}`,{headers:Ee()})).json()}async function Ir(t){return await(await fetch(`${je}/journal/`,{method:"POST",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function un(t,e){return await(await fetch(`${je}/journal/${t}`,{method:"PUT",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(e)})).json()}async function Fi(t){return await(await fetch(`${je}/journal/${t}`,{method:"DELETE",headers:Ee()})).json()}async function Bi(t,e){return await(await fetch(`${je}/documents/${t}/tasks`,{method:"POST",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(e)})).json()}async function Bs(t,e){return await(await fetch(`${je}/tasks/${t}`,{method:"PUT",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(e)})).json()}async function Gi(t){return await(await fetch(`${je}/tasks/${t}`,{method:"DELETE",headers:Ee()})).json()}async function Ui(t){return await(await fetch(`${je}/attachments/${t}`,{method:"DELETE",headers:Ee()})).json()}async function Yi(){return await(await fetch(`${je}/filter-presets`,{headers:Ee()})).json()}async function ns(){return await(await fetch(`${je}/materials`,{headers:Ee()})).json()}async function Hi(t){return await(await fetch(`${je}/materials`,{method:"POST",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function Xi(t,e){return await(await fetch(`${je}/materials/${t}?name=${encodeURIComponent(e)}`,{method:"PUT",headers:Ee({"Content-Type":"application/json"})})).json()}async function Vi(t){return await(await fetch(`${je}/materials/${t}`,{method:"DELETE",headers:Ee()})).json()}async function Wi(t=0,e=100){return await(await fetch(`${je}/parts?skip=${t}&limit=${e}`,{headers:Ee()})).json()}async function Zi(){return await(await fetch(`${je}/stock`,{headers:Ee()})).json()}async function Ji(t){return await(await fetch(`${je}/stock`,{method:"POST",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function Qi(t){return await(await fetch(`${je}/stock/${t}`,{method:"DELETE",headers:Ee()})).json()}async function Ki(t=0,e=100){return await(await fetch(`${je}/shift-logs?skip=${t}&limit=${e}`,{headers:Ee()})).json()}async function eo(t){return await(await fetch(`${je}/shift-logs`,{method:"POST",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify(t)})).json()}async function to(t){const e=new FormData;e.append("file",t);const a=await fetch(`${je}/gnc/parse`,{method:"POST",headers:Ee(),body:e});if(!a.ok){const r=await a.json().catch(()=>({}));throw new Error(r.detail||"Failed to parse GNC file")}return await a.json()}async function ao(t,e,a=!0){const r=await fetch(`${je}/gnc/save`,{method:"PUT",headers:Ee({"Content-Type":"application/json"}),body:JSON.stringify({sheet:t,filename:e,overwrite:a})});if(!r.ok){const s=await r.json().catch(()=>({}));throw new Error(s.detail||"Failed to save GNC file")}return await r.json()}var so=w('<div class="modal-backdrop svelte-5awcn0" role="button" tabindex="0"><div class="modal-content svelte-5awcn0" role="document" tabindex="0"><button class="close-btn svelte-5awcn0">&times;</button> <!></div></div>');function Gs(t,e){Je(e,!0);let a=Ct(e,"maxWidth",3,"500px");function r(v){v.key==="Escape"&&e.close()}var s=Be(),l=Se(s);{var i=v=>{var u=so();u.__click=function(...h){e.close?.apply(this,h)},u.__keydown=r;var d=o(u);d.__click=h=>h.stopPropagation(),d.__keydown=h=>h.stopPropagation();var f=o(d);f.__click=function(...h){e.close?.apply(this,h)};var y=c(f,2);ki(y,()=>e.children),H(()=>Fs(d,`max-width: ${a()??""}`)),g(v,u)};$(l,v=>{e.isOpen&&v(i)})}g(t,s),Qe()}st(["click","keydown"]);var no=w("<p>Loading...</p>"),ro=w("<span> </span>"),lo=w("<span> </span>"),io=w('<div class="field svelte-w0yg29"><label for="ocr-url" class="svelte-w0yg29">OCR Service URL</label> <input id="ocr-url" type="text" placeholder="http://localhost:7860" class="svelte-w0yg29"/></div> <div class="field svelte-w0yg29"><label for="regex" class="svelte-w0yg29">Document Name Regex</label> <input id="regex" type="text" placeholder="Regex Pattern" class="svelte-w0yg29"/></div> <hr class="divider svelte-w0yg29"/> <h3 class="section-title svelte-w0yg29">Sync Folder Paths</h3> <p class="section-hint svelte-w0yg29">Configure paths to network folders for automatic file import.</p> <div class="field path-field svelte-w0yg29"><label for="mihtav-path" class="svelte-w0yg29">Mihtav (Orders) Path</label> <div class="path-input-group svelte-w0yg29"><input id="mihtav-path" type="text" placeholder="Z:\\Mihtavim or \\\\server\\share\\orders" class="svelte-w0yg29"/> <button class="test-btn svelte-w0yg29"> </button></div> <!></div> <div class="field path-field svelte-w0yg29"><label for="sidra-path" class="svelte-w0yg29">Sidra (Parts Library) Path</label> <div class="path-input-group svelte-w0yg29"><input id="sidra-path" type="text" placeholder="Z:\\Sidra or \\\\server\\share\\parts" class="svelte-w0yg29"/> <button class="test-btn svelte-w0yg29"> </button></div> <!></div> <hr class="divider svelte-w0yg29"/> <div class="field svelte-w0yg29"><label for="role" class="svelte-w0yg29">User Mode (Simulated)</label> <select id="role" class="svelte-w0yg29"><option>Operator (Read-Only)</option><option>Admin (Full Access)</option></select> <p class="hint svelte-w0yg29">Switching mode will reload the application.</p></div>',1),oo=w('<div class="modal-content svelte-w0yg29"><h2 class="svelte-w0yg29">Settings</h2> <!> <div class="actions svelte-w0yg29"><button class="cancel-btn svelte-w0yg29">Cancel</button> <button class="save-btn svelte-w0yg29">Save</button></div></div>');function Mn(t,e){Je(e,!0);let a=Ct(e,"isOpen",3,!1),r=j(""),s=j(""),l=j("admin"),i=j(""),v=j(""),u=j(!0),d=ke({mihtav:!1,sidra:!1}),f=j(ke({mihtav:null,sidra:null}));async function y(){p(u,!0);try{const[b,A,_,T]=await Promise.all([us("ocr_url").catch(()=>({value:""})),us("doc_name_regex").catch(()=>({value:""})),us("sync_mihtav_path").catch(()=>({value:""})),us("sync_sidra_path").catch(()=>({value:""}))]);p(r,b.value||"",!0),p(s,A.value||"",!0),p(i,_.value||"",!0),p(v,T.value||"",!0);const z=localStorage.getItem("user_role");z&&p(l,z,!0)}catch(b){console.error(b)}finally{p(u,!1)}}async function h(b){const A=n(b==="mihtav"?i:v);if(!A){n(f)[b]={accessible:!1,error:"Path is empty"};return}d[b]=!0;try{const _=await $i(A);n(f)[b]=_}catch(_){n(f)[b]={accessible:!1,error:_.message}}finally{d[b]=!1}}async function m(){try{await Promise.all([vs("ocr_url",n(r)),vs("doc_name_regex",n(s)),vs("sync_mihtav_path",n(i)),vs("sync_sidra_path",n(v))]),localStorage.setItem("user_role",n(l)),window.location.reload(),e.close()}catch(b){alert("Failed to save settings. Ensure you have Admin privileges."),console.error(b)}}Nt(()=>{a()&&(y(),p(f,{mihtav:null,sidra:null},!0))});var x=Be(),S=Se(x);{var k=b=>{var A=oo(),_=c(o(A),2);{var T=O=>{var Z=no();g(O,Z)},z=O=>{var Z=io(),ne=Se(Z),W=c(o(ne),2),G=c(ne,2),M=c(o(G),2),U=c(G,8),ce=c(o(U),2),le=o(ce),fe=c(le,2);fe.__click=()=>h("mihtav");var we=o(fe),I=c(ce,2);{var L=D=>{var ue=ro();let se;var de=o(ue);H(()=>{se=Ie(ue,1,"test-result svelte-w0yg29",null,se,{success:n(f).mihtav.accessible,error:!n(f).mihtav.accessible}),q(de,n(f).mihtav.accessible?"‚úì Path accessible":"‚úó Path not accessible")}),g(D,ue)};$(I,D=>{n(f).mihtav&&D(L)})}var Q=c(U,2),F=c(o(Q),2),E=o(F),V=c(E,2);V.__click=()=>h("sidra");var re=o(V),K=c(F,2);{var ye=D=>{var ue=lo();let se;var de=o(ue);H(()=>{se=Ie(ue,1,"test-result svelte-w0yg29",null,se,{success:n(f).sidra.accessible,error:!n(f).sidra.accessible}),q(de,n(f).sidra.accessible?"‚úì Path accessible":"‚úó Path not accessible")}),g(D,ue)};$(K,D=>{n(f).sidra&&D(ye)})}var N=c(Q,4),X=c(o(N),2),J=o(X);J.value=J.__value="operator";var ee=c(J);ee.value=ee.__value="admin",H(()=>{fe.disabled=d.mihtav,q(we,d.mihtav?"Testing...":"Test"),V.disabled=d.sidra,q(re,d.sidra?"Testing...":"Test")}),Te(W,()=>n(r),D=>p(r,D)),Te(M,()=>n(s),D=>p(s,D)),Te(le,()=>n(i),D=>p(i,D)),Te(E,()=>n(v),D=>p(v,D)),pt(X,()=>n(l),D=>p(l,D)),g(O,Z)};$(_,O=>{n(u)?O(T):O(z,!1)})}var R=c(_,2),Y=o(R);Y.__click=function(...O){e.close?.apply(this,O)};var ae=c(Y,2);ae.__click=m,g(b,A)};$(S,b=>{a()&&b(k)})}g(t,x),Qe()}st(["click"]);Ml();var co=w('<aside class="sidebar svelte-1nhzsi7"><div class="sidebar-header svelte-1nhzsi7"><span class="logo-icon svelte-1nhzsi7">DF</span></div> <nav class="svelte-1nhzsi7"><button><span class="icon svelte-1nhzsi7">üìä</span> <span class="label svelte-1nhzsi7">Dashboard</span></button> <button><span class="icon svelte-1nhzsi7">üìÑ</span> <span class="label svelte-1nhzsi7">Documents</span></button> <button><span class="icon svelte-1nhzsi7">‚öôÔ∏è</span> <span class="label svelte-1nhzsi7">Parts Library</span></button> <button><span class="icon svelte-1nhzsi7">üìê</span> <span class="label svelte-1nhzsi7">GNC Editor</span></button> <button><span class="icon svelte-1nhzsi7">üì¶</span> <span class="label svelte-1nhzsi7">Stock</span></button> <button><span class="icon svelte-1nhzsi7">üìù</span> <span class="label svelte-1nhzsi7">Shift Logs</span></button></nav></aside>');function uo(t,e){Je(e,!1);let a=Ct(e,"activeView",8,"documents"),r=Ct(e,"onSelect",8);function s(_){r()(_)}Mr();var l=co(),i=c(o(l),2),v=o(i);v.__click=()=>s("dashboard");let u;var d=c(v,2);d.__click=()=>s("documents");let f;var y=c(d,2);y.__click=()=>s("parts");let h;var m=c(y,2);m.__click=()=>s("gnc");let x;var S=c(m,2);S.__click=()=>s("stock");let k;var b=c(S,2);b.__click=()=>s("logs");let A;H(()=>{u=Ie(v,1,"svelte-1nhzsi7",null,u,{active:a()==="dashboard"}),f=Ie(d,1,"svelte-1nhzsi7",null,f,{active:a()==="documents"}),h=Ie(y,1,"svelte-1nhzsi7",null,h,{active:a()==="parts"}),x=Ie(m,1,"svelte-1nhzsi7",null,x,{active:a()==="gnc"}),k=Ie(S,1,"svelte-1nhzsi7",null,k,{active:a()==="stock"}),A=Ie(b,1,"svelte-1nhzsi7",null,A,{active:a()==="logs"})}),g(t,l),Qe()}st(["click"]);var vo=w('<div class="loading svelte-plcxj0">Loading dashboard...</div>'),fo=w('<div class="recent-doc-item svelte-plcxj0"><div class="doc-info svelte-plcxj0"><span class="doc-name svelte-plcxj0"> </span> <span class="doc-date svelte-plcxj0"> </span></div> <span> </span></div>'),po=w('<div class="empty-state svelte-plcxj0">No documents yet</div>'),ho=w('<div class="dashboard-section svelte-plcxj0"><h2 class="svelte-plcxj0">üìä Overview</h2> <div class="stats-grid svelte-plcxj0"><div class="stat-card documents svelte-plcxj0"><div class="stat-icon svelte-plcxj0">üìÑ</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Total Documents</div> <div class="stat-breakdown svelte-plcxj0"><span class="in-progress svelte-plcxj0"> </span> <span class="done svelte-plcxj0"> </span></div></div></div> <div class="stat-card tasks svelte-plcxj0"><div class="stat-icon svelte-plcxj0">‚úì</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Total Tasks</div> <div class="stat-breakdown svelte-plcxj0"><span class="planned svelte-plcxj0"> </span> <span class="pending svelte-plcxj0"> </span> <span class="done svelte-plcxj0"> </span></div></div></div> <div class="stat-card materials svelte-plcxj0"><div class="stat-icon svelte-plcxj0">üì¶</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Materials</div></div></div> <div class="stat-card completion svelte-plcxj0"><div class="stat-icon svelte-plcxj0">üìà</div> <div class="stat-content svelte-plcxj0"><div class="stat-value svelte-plcxj0"> </div> <div class="stat-label svelte-plcxj0">Completion Rate</div></div></div></div></div> <div class="dashboard-section svelte-plcxj0"><h2 class="svelte-plcxj0">üìÖ Reports</h2> <div class="reports-grid svelte-plcxj0"><div class="report-card svelte-plcxj0"><h3 class="svelte-plcxj0">Today</h3> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Created:</span> <span class="report-value svelte-plcxj0"> </span></div> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Completed:</span> <span class="report-value svelte-plcxj0"> </span></div></div> <div class="report-card svelte-plcxj0"><h3 class="svelte-plcxj0">Last 7 Days</h3> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Created:</span> <span class="report-value svelte-plcxj0"> </span></div> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Completed:</span> <span class="report-value svelte-plcxj0"> </span></div></div> <div class="report-card svelte-plcxj0"><h3 class="svelte-plcxj0">Last 30 Days</h3> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Created:</span> <span class="report-value svelte-plcxj0"> </span></div> <div class="report-item svelte-plcxj0"><span class="report-label svelte-plcxj0">Documents Completed:</span> <span class="report-value svelte-plcxj0"> </span></div></div></div></div> <div class="dashboard-section svelte-plcxj0"><h2 class="svelte-plcxj0">üìù Recent Documents</h2> <div class="recent-documents svelte-plcxj0"><!> <!></div></div>',1),_o=w('<div class="dashboard-container svelte-plcxj0"><!></div>');function go(t,e){Je(e,!0);let a=ke({totalDocuments:0,totalTasks:0,totalMaterials:0,documentsInProgress:0,documentsDone:0,tasksPlanned:0,tasksPending:0,tasksDone:0}),r=ke({tasksCompleted:0,documentsCreated:0,documentsCompleted:0}),s=ke({tasksCompleted:0,documentsCreated:0,documentsCompleted:0}),l=ke({tasksCompleted:0,documentsCreated:0,documentsCompleted:0}),i=j(ke([])),v=j(!0);It(()=>{u()});async function u(){p(v,!0);try{const m=await cn("","","","registration_date","desc"),x=await ns();a.totalDocuments=m.length,a.totalMaterials=x.length,a.documentsInProgress=m.filter(_=>_.status==="in_progress").length,a.documentsDone=m.filter(_=>_.status==="done").length;let S=[];m.forEach(_=>{_.tasks&&(S=S.concat(_.tasks))}),a.totalTasks=S.length,a.tasksPlanned=S.filter(_=>_.status==="planned").length,a.tasksPending=S.filter(_=>_.status==="pending").length,a.tasksDone=S.filter(_=>_.status==="done").length;const k=new Date;k.setHours(0,0,0,0),r.documentsCreated=m.filter(_=>{const T=new Date(_.registration_date);return T.setHours(0,0,0,0),T.getTime()===k.getTime()}).length,r.documentsCompleted=m.filter(_=>{if(!_.done_date)return!1;const T=new Date(_.done_date);return T.setHours(0,0,0,0),T.getTime()===k.getTime()}).length;const b=new Date;b.setDate(b.getDate()-7),b.setHours(0,0,0,0),s.documentsCreated=m.filter(_=>new Date(_.registration_date)>=b).length,s.documentsCompleted=m.filter(_=>_.done_date?new Date(_.done_date)>=b:!1).length;const A=new Date;A.setDate(A.getDate()-30),A.setHours(0,0,0,0),l.documentsCreated=m.filter(_=>new Date(_.registration_date)>=A).length,l.documentsCompleted=m.filter(_=>_.done_date?new Date(_.done_date)>=A:!1).length,p(i,m.slice(0,5),!0)}catch(m){console.error("Failed to load dashboard data",m)}finally{p(v,!1)}}var d=_o(),f=o(d);{var y=m=>{var x=vo();g(m,x)},h=m=>{var x=ho(),S=Se(x),k=c(o(S),2),b=o(k),A=c(o(b),2),_=o(A),T=o(_),z=c(_,4),R=o(z),Y=o(R),ae=c(R,2),O=o(ae),Z=c(b,2),ne=c(o(Z),2),W=o(ne),G=o(W),M=c(W,4),U=o(M),ce=o(U),le=c(U,2),fe=o(le),we=c(le,2),I=o(we),L=c(Z,2),Q=c(o(L),2),F=o(Q),E=o(F),V=c(L,2),re=c(o(V),2),K=o(re),ye=o(K),N=c(S,2),X=c(o(N),2),J=o(X),ee=c(o(J),2),D=c(o(ee),2),ue=o(D),se=c(ee,2),de=c(o(se),2),ie=o(de),he=c(J,2),ve=c(o(he),2),oe=c(o(ve),2),pe=o(oe),xe=c(ve,2),P=c(o(xe),2),C=o(P),te=c(he,2),_e=c(o(te),2),De=c(o(_e),2),Me=o(De),me=c(_e,2),ge=c(o(me),2),Oe=o(ge),Fe=c(N,2),Ae=c(o(Fe),2),Pe=o(Ae);$e(Pe,17,()=>n(i),Ye,(Xe,Ge)=>{var lt=fo(),bt=o(lt),it=o(bt),B=o(it),be=c(it,2),Ne=o(be),rt=c(bt,2),dt=o(rt);H(()=>{q(B,n(Ge).name),q(Ne,n(Ge).registration_date),Ie(rt,1,`doc-status ${n(Ge).status??""}`,"svelte-plcxj0"),q(dt,n(Ge).status)}),g(Xe,lt)});var nt=c(Pe,2);{var et=Xe=>{var Ge=po();g(Xe,Ge)};$(nt,Xe=>{n(i).length===0&&Xe(et)})}H(Xe=>{q(T,a.totalDocuments),q(Y,`${a.documentsInProgress??""} in progress`),q(O,`${a.documentsDone??""} done`),q(G,a.totalTasks),q(ce,`${a.tasksPlanned??""} planned`),q(fe,`${a.tasksPending??""} pending`),q(I,`${a.tasksDone??""} done`),q(E,a.totalMaterials),q(ye,`${Xe??""}%`),q(ue,r.documentsCreated),q(ie,r.documentsCompleted),q(pe,s.documentsCreated),q(C,s.documentsCompleted),q(Me,l.documentsCreated),q(Oe,l.documentsCompleted)},[()=>a.totalDocuments>0?Math.round(a.documentsDone/a.totalDocuments*100):0]),g(m,x)};$(f,m=>{n(v)?m(y):m(h,!1)})}g(t,d),Qe()}function vn(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Sa=vn();function Lr(t){Sa=t}var Ja={exec:()=>null};function Ce(t,e=""){let a=typeof t=="string"?t:t.source,r={replace:(s,l)=>{let i=typeof l=="string"?l:l.source;return i=i.replace(gt.caret,"$1"),a=a.replace(s,i),r},getRegex:()=>new RegExp(a,e)};return r}var mo=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),gt={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},bo=/^(?:[ \t]*(?:\n|$))+/,yo=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,ko=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,rs=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,wo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,dn=/(?:[*+-]|\d{1,9}[.)])/,Or=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Nr=Ce(Or).replace(/bull/g,dn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),xo=Ce(Or).replace(/bull/g,dn).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),fn=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,So=/^[^\n]+/,pn=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,qo=Ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",pn).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),To=Ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,dn).getRegex(),Ts="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",hn=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,jo=Ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",hn).replace("tag",Ts).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fr=Ce(fn).replace("hr",rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ts).getRegex(),Eo=Ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fr).getRegex(),_n={blockquote:Eo,code:yo,def:qo,fences:ko,heading:wo,hr:rs,html:jo,lheading:Nr,list:To,newline:bo,paragraph:Fr,table:Ja,text:So},In=Ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ts).getRegex(),Ao={..._n,lheading:xo,table:In,paragraph:Ce(fn).replace("hr",rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",In).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ts).getRegex()},Co={..._n,html:Ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",hn).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ja,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ce(fn).replace("hr",rs).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Nr).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Do=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Po=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Br=/^( {2,}|\\)\n(?!\s*$)/,Ro=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,js=/[\p{P}\p{S}]/u,gn=/[\s\p{P}\p{S}]/u,Gr=/[^\s\p{P}\p{S}]/u,$o=Ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,gn).getRegex(),Ur=/(?!~)[\p{P}\p{S}]/u,zo=/(?!~)[\s\p{P}\p{S}]/u,Mo=/(?:[^\s\p{P}\p{S}]|~)/u,Io=Ce(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",mo?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),Yr=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Lo=Ce(Yr,"u").replace(/punct/g,js).getRegex(),Oo=Ce(Yr,"u").replace(/punct/g,Ur).getRegex(),Hr="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",No=Ce(Hr,"gu").replace(/notPunctSpace/g,Gr).replace(/punctSpace/g,gn).replace(/punct/g,js).getRegex(),Fo=Ce(Hr,"gu").replace(/notPunctSpace/g,Mo).replace(/punctSpace/g,zo).replace(/punct/g,Ur).getRegex(),Bo=Ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Gr).replace(/punctSpace/g,gn).replace(/punct/g,js).getRegex(),Go=Ce(/\\(punct)/,"gu").replace(/punct/g,js).getRegex(),Uo=Ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Yo=Ce(hn).replace("(?:-->|$)","-->").getRegex(),Ho=Ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Yo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),gs=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Xo=Ce(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",gs).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Xr=Ce(/^!?\[(label)\]\[(ref)\]/).replace("label",gs).replace("ref",pn).getRegex(),Vr=Ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",pn).getRegex(),Vo=Ce("reflink|nolink(?!\\()","g").replace("reflink",Xr).replace("nolink",Vr).getRegex(),Ln=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,mn={_backpedal:Ja,anyPunctuation:Go,autolink:Uo,blockSkip:Io,br:Br,code:Po,del:Ja,emStrongLDelim:Lo,emStrongRDelimAst:No,emStrongRDelimUnd:Bo,escape:Do,link:Xo,nolink:Vr,punctuation:$o,reflink:Xr,reflinkSearch:Vo,tag:Ho,text:Ro,url:Ja},Wo={...mn,link:Ce(/^!?\[(label)\]\((.*?)\)/).replace("label",gs).getRegex(),reflink:Ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gs).getRegex()},Us={...mn,emStrongRDelimAst:Fo,emStrongLDelim:Oo,url:Ce(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Ln).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:Ce(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Ln).getRegex()},Zo={...Us,br:Ce(Br).replace("{2,}","*").getRegex(),text:Ce(Us.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ds={normal:_n,gfm:Ao,pedantic:Co},Ba={normal:mn,gfm:Us,breaks:Zo,pedantic:Wo},Jo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},On=t=>Jo[t];function Xt(t,e){if(e){if(gt.escapeTest.test(t))return t.replace(gt.escapeReplace,On)}else if(gt.escapeTestNoEncode.test(t))return t.replace(gt.escapeReplaceNoEncode,On);return t}function Nn(t){try{t=encodeURI(t).replace(gt.percentDecode,"%")}catch{return null}return t}function Fn(t,e){let a=t.replace(gt.findPipe,(l,i,v)=>{let u=!1,d=i;for(;--d>=0&&v[d]==="\\";)u=!u;return u?"|":" |"}),r=a.split(gt.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(gt.slashPipe,"|");return r}function Ga(t,e,a){let r=t.length;if(r===0)return"";let s=0;for(;s<r&&t.charAt(r-s-1)===e;)s++;return t.slice(0,r-s)}function Qo(t,e){if(t.indexOf(e[1])===-1)return-1;let a=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])a++;else if(t[r]===e[1]&&(a--,a<0))return r;return a>0?-2:-1}function Bn(t,e,a,r,s){let l=e.href,i=e.title||null,v=t[1].replace(s.other.outputLinkReplace,"$1");r.state.inLink=!0;let u={type:t[0].charAt(0)==="!"?"image":"link",raw:a,href:l,title:i,text:v,tokens:r.inlineTokens(v)};return r.state.inLink=!1,u}function Ko(t,e,a){let r=t.match(a.other.indentCodeCompensation);if(r===null)return e;let s=r[1];return e.split(`
`).map(l=>{let i=l.match(a.other.beginningSpace);if(i===null)return l;let[v]=i;return v.length>=s.length?l.slice(s.length):l}).join(`
`)}var ms=class{options;rules;lexer;constructor(t){this.options=t||Sa}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let a=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?a:Ga(a,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let a=e[0],r=Ko(a,e[3]||"",this.rules);return{type:"code",raw:a,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let a=e[2].trim();if(this.rules.other.endingHash.test(a)){let r=Ga(a,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(a=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:Ga(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let a=Ga(e[0],`
`).split(`
`),r="",s="",l=[];for(;a.length>0;){let i=!1,v=[],u;for(u=0;u<a.length;u++)if(this.rules.other.blockquoteStart.test(a[u]))v.push(a[u]),i=!0;else if(!i)v.push(a[u]);else break;a=a.slice(u);let d=v.join(`
`),f=d.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${d}`:d,s=s?`${s}
${f}`:f;let y=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(f,l,!0),this.lexer.state.top=y,a.length===0)break;let h=l.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let m=h,x=m.raw+`
`+a.join(`
`),S=this.blockquote(x);l[l.length-1]=S,r=r.substring(0,r.length-m.raw.length)+S.raw,s=s.substring(0,s.length-m.text.length)+S.text;break}else if(h?.type==="list"){let m=h,x=m.raw+`
`+a.join(`
`),S=this.list(x);l[l.length-1]=S,r=r.substring(0,r.length-h.raw.length)+S.raw,s=s.substring(0,s.length-m.raw.length)+S.raw,a=x.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:l,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let a=e[1].trim(),r=a.length>1,s={type:"list",raw:"",ordered:r,start:r?+a.slice(0,-1):"",loose:!1,items:[]};a=r?`\\d{1,9}\\${a.slice(-1)}`:`\\${a}`,this.options.pedantic&&(a=r?a:"[*+-]");let l=this.rules.other.listItemRegex(a),i=!1;for(;t;){let u=!1,d="",f="";if(!(e=l.exec(t))||this.rules.block.hr.test(t))break;d=e[0],t=t.substring(d.length);let y=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),h=t.split(`
`,1)[0],m=!y.trim(),x=0;if(this.options.pedantic?(x=2,f=y.trimStart()):m?x=e[1].length+1:(x=e[2].search(this.rules.other.nonSpaceChar),x=x>4?1:x,f=y.slice(x),x+=e[1].length),m&&this.rules.other.blankLine.test(h)&&(d+=h+`
`,t=t.substring(h.length+1),u=!0),!u){let S=this.rules.other.nextBulletRegex(x),k=this.rules.other.hrRegex(x),b=this.rules.other.fencesBeginRegex(x),A=this.rules.other.headingBeginRegex(x),_=this.rules.other.htmlBeginRegex(x);for(;t;){let T=t.split(`
`,1)[0],z;if(h=T,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),z=h):z=h.replace(this.rules.other.tabCharGlobal,"    "),b.test(h)||A.test(h)||_.test(h)||S.test(h)||k.test(h))break;if(z.search(this.rules.other.nonSpaceChar)>=x||!h.trim())f+=`
`+z.slice(x);else{if(m||y.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||b.test(y)||A.test(y)||k.test(y))break;f+=`
`+h}!m&&!h.trim()&&(m=!0),d+=T+`
`,t=t.substring(T.length+1),y=z.slice(x)}}s.loose||(i?s.loose=!0:this.rules.other.doubleBlankLine.test(d)&&(i=!0)),s.items.push({type:"list_item",raw:d,task:!!this.options.gfm&&this.rules.other.listIsTask.test(f),loose:!1,text:f,tokens:[]}),s.raw+=d}let v=s.items.at(-1);if(v)v.raw=v.raw.trimEnd(),v.text=v.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let u of s.items){if(this.lexer.state.top=!1,u.tokens=this.lexer.blockTokens(u.text,[]),u.task){if(u.text=u.text.replace(this.rules.other.listReplaceTask,""),u.tokens[0]?.type==="text"||u.tokens[0]?.type==="paragraph"){u.tokens[0].raw=u.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),u.tokens[0].text=u.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let f=this.lexer.inlineQueue.length-1;f>=0;f--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[f].src)){this.lexer.inlineQueue[f].src=this.lexer.inlineQueue[f].src.replace(this.rules.other.listReplaceTask,"");break}}let d=this.rules.other.listTaskCheckbox.exec(u.raw);if(d){let f={type:"checkbox",raw:d[0]+" ",checked:d[0]!=="[ ]"};u.checked=f.checked,s.loose?u.tokens[0]&&["paragraph","text"].includes(u.tokens[0].type)&&"tokens"in u.tokens[0]&&u.tokens[0].tokens?(u.tokens[0].raw=f.raw+u.tokens[0].raw,u.tokens[0].text=f.raw+u.tokens[0].text,u.tokens[0].tokens.unshift(f)):u.tokens.unshift({type:"paragraph",raw:f.raw,text:f.raw,tokens:[f]}):u.tokens.unshift(f)}}if(!s.loose){let d=u.tokens.filter(y=>y.type==="space"),f=d.length>0&&d.some(y=>this.rules.other.anyLine.test(y.raw));s.loose=f}}if(s.loose)for(let u of s.items){u.loose=!0;for(let d of u.tokens)d.type==="text"&&(d.type="paragraph")}return s}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let a=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:a,raw:e[0],href:r,title:s}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let a=Fn(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(a.length===r.length){for(let i of r)this.rules.other.tableAlignRight.test(i)?l.align.push("right"):this.rules.other.tableAlignCenter.test(i)?l.align.push("center"):this.rules.other.tableAlignLeft.test(i)?l.align.push("left"):l.align.push(null);for(let i=0;i<a.length;i++)l.header.push({text:a[i],tokens:this.lexer.inline(a[i]),header:!0,align:l.align[i]});for(let i of s)l.rows.push(Fn(i,l.header.length).map((v,u)=>({text:v,tokens:this.lexer.inline(v),header:!1,align:l.align[u]})));return l}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let a=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:a,tokens:this.lexer.inline(a)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let a=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;let l=Ga(a.slice(0,-1),"\\");if((a.length-l.length)%2===0)return}else{let l=Qo(e[2],"()");if(l===-2)return;if(l>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let r=e[2],s="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(r);l&&(r=l[1],s=l[3])}else s=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?r=r.slice(1):r=r.slice(1,-1)),Bn(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let a;if((a=this.rules.inline.reflink.exec(t))||(a=this.rules.inline.nolink.exec(t))){let r=(a[2]||a[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[r.toLowerCase()];if(!s){let l=a[0].charAt(0);return{type:"text",raw:l,text:l}}return Bn(a,s,a[0],this.lexer,this.rules)}}emStrong(t,e,a=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&a.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!a||this.rules.inline.punctuation.exec(a))){let s=[...r[0]].length-1,l,i,v=s,u=0,d=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+s);(r=d.exec(e))!=null;){if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!l)continue;if(i=[...l].length,r[3]||r[4]){v+=i;continue}else if((r[5]||r[6])&&s%3&&!((s+i)%3)){u+=i;continue}if(v-=i,v>0)continue;i=Math.min(i,i+v+u);let f=[...r[0]][0].length,y=t.slice(0,s+r.index+f+i);if(Math.min(s,i)%2){let m=y.slice(1,-1);return{type:"em",raw:y,text:m,tokens:this.lexer.inlineTokens(m)}}let h=y.slice(2,-2);return{type:"strong",raw:y,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let a=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(a),s=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return r&&s&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:e[0],text:a}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let a,r;return e[2]==="@"?(a=e[1],r="mailto:"+a):(a=e[1],r=a),{type:"link",raw:e[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let a,r;if(e[2]==="@")a=e[0],r="mailto:"+a;else{let s;do s=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(s!==e[0]);a=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let a=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:a}}}},Rt=class Ys{tokens;options;state;inlineQueue;tokenizer;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Sa,this.options.tokenizer=this.options.tokenizer||new ms,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={other:gt,block:ds.normal,inline:Ba.normal};this.options.pedantic?(a.block=ds.pedantic,a.inline=Ba.pedantic):this.options.gfm&&(a.block=ds.gfm,this.options.breaks?a.inline=Ba.breaks:a.inline=Ba.gfm),this.tokenizer.rules=a}static get rules(){return{block:ds,inline:Ba}}static lex(e,a){return new Ys(a).lex(e)}static lexInline(e,a){return new Ys(a).inlineTokens(e)}lex(e){e=e.replace(gt.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let a=0;a<this.inlineQueue.length;a++){let r=this.inlineQueue[a];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,a=[],r=!1){for(this.options.pedantic&&(e=e.replace(gt.tabCharGlobal,"    ").replace(gt.spaceLine,""));e;){let s;if(this.options.extensions?.block?.some(i=>(s=i.call({lexer:this},e,a))?(e=e.substring(s.raw.length),a.push(s),!0):!1))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);let i=a.at(-1);s.raw.length===1&&i!==void 0?i.raw+=`
`:a.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);let i=a.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.text,this.inlineQueue.at(-1).src=i.text):a.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);let i=a.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title},a.push(s));continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),a.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),a.push(s);continue}let l=e;if(this.options.extensions?.startBlock){let i=1/0,v=e.slice(1),u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},v),typeof u=="number"&&u>=0&&(i=Math.min(i,u))}),i<1/0&&i>=0&&(l=e.substring(0,i+1))}if(this.state.top&&(s=this.tokenizer.paragraph(l))){let i=a.at(-1);r&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):a.push(s),r=l.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);let i=a.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+s.raw,i.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):a.push(s);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,a}inline(e,a=[]){return this.inlineQueue.push({src:e,tokens:a}),a}inlineTokens(e,a=[]){let r=e,s=null;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let l;for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)l=s[2]?s[2].length:0,r=r.slice(0,s.index+l)+"["+"a".repeat(s[0].length-l-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let i=!1,v="";for(;e;){i||(v=""),i=!1;let u;if(this.options.extensions?.inline?.some(f=>(u=f.call({lexer:this},e,a))?(e=e.substring(u.raw.length),a.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);let f=a.at(-1);u.type==="text"&&f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):a.push(u);continue}if(u=this.tokenizer.emStrong(e,r,v)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),a.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),a.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),a.push(u);continue}let d=e;if(this.options.extensions?.startInline){let f=1/0,y=e.slice(1),h;this.options.extensions.startInline.forEach(m=>{h=m.call({lexer:this},y),typeof h=="number"&&h>=0&&(f=Math.min(f,h))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(v=u.raw.slice(-1)),i=!0;let f=a.at(-1);f?.type==="text"?(f.raw+=u.raw,f.text+=u.text):a.push(u);continue}if(e){let f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return a}},bs=class{options;parser;constructor(t){this.options=t||Sa}space(t){return""}code({text:t,lang:e,escaped:a}){let r=(e||"").match(gt.notSpaceStart)?.[0],s=t.replace(gt.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Xt(r)+'">'+(a?s:Xt(s,!0))+`</code></pre>
`:"<pre><code>"+(a?s:Xt(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,a=t.start,r="";for(let i=0;i<t.items.length;i++){let v=t.items[i];r+=this.listitem(v)}let s=e?"ol":"ul",l=e&&a!==1?' start="'+a+'"':"";return"<"+s+l+`>
`+r+"</"+s+`>
`}listitem(t){return`<li>${this.parser.parse(t.tokens)}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",a="";for(let s=0;s<t.header.length;s++)a+=this.tablecell(t.header[s]);e+=this.tablerow({text:a});let r="";for(let s=0;s<t.rows.length;s++){let l=t.rows[s];a="";for(let i=0;i<l.length;i++)a+=this.tablecell(l[i]);r+=this.tablerow({text:a})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),a=t.header?"th":"td";return(t.align?`<${a} align="${t.align}">`:`<${a}>`)+e+`</${a}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${Xt(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:a}){let r=this.parser.parseInline(a),s=Nn(t);if(s===null)return r;t=s;let l='<a href="'+t+'"';return e&&(l+=' title="'+Xt(e)+'"'),l+=">"+r+"</a>",l}image({href:t,title:e,text:a,tokens:r}){r&&(a=this.parser.parseInline(r,this.parser.textRenderer));let s=Nn(t);if(s===null)return Xt(a);t=s;let l=`<img src="${t}" alt="${a}"`;return e&&(l+=` title="${Xt(e)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:Xt(t.text)}},bn=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}checkbox({raw:t}){return t}},$t=class Hs{options;renderer;textRenderer;constructor(e){this.options=e||Sa,this.options.renderer=this.options.renderer||new bs,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new bn}static parse(e,a){return new Hs(a).parse(e)}static parseInline(e,a){return new Hs(a).parseInline(e)}parse(e){let a="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let i=s,v=this.options.extensions.renderers[i.type].call({parser:this},i);if(v!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(i.type)){a+=v||"";continue}}let l=s;switch(l.type){case"space":{a+=this.renderer.space(l);break}case"hr":{a+=this.renderer.hr(l);break}case"heading":{a+=this.renderer.heading(l);break}case"code":{a+=this.renderer.code(l);break}case"table":{a+=this.renderer.table(l);break}case"blockquote":{a+=this.renderer.blockquote(l);break}case"list":{a+=this.renderer.list(l);break}case"checkbox":{a+=this.renderer.checkbox(l);break}case"html":{a+=this.renderer.html(l);break}case"def":{a+=this.renderer.def(l);break}case"paragraph":{a+=this.renderer.paragraph(l);break}case"text":{a+=this.renderer.text(l);break}default:{let i='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return a}parseInline(e,a=this.renderer){let r="";for(let s=0;s<e.length;s++){let l=e[s];if(this.options.extensions?.renderers?.[l.type]){let v=this.options.extensions.renderers[l.type].call({parser:this},l);if(v!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){r+=v||"";continue}}let i=l;switch(i.type){case"escape":{r+=a.text(i);break}case"html":{r+=a.html(i);break}case"link":{r+=a.link(i);break}case"image":{r+=a.image(i);break}case"checkbox":{r+=a.checkbox(i);break}case"strong":{r+=a.strong(i);break}case"em":{r+=a.em(i);break}case"codespan":{r+=a.codespan(i);break}case"br":{r+=a.br(i);break}case"del":{r+=a.del(i);break}case"text":{r+=a.text(i);break}default:{let v='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(v),"";throw new Error(v)}}}return r}},Xa=class{options;block;constructor(t){this.options=t||Sa}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?Rt.lex:Rt.lexInline}provideParser(){return this.block?$t.parse:$t.parseInline}},ec=class{defaults=vn();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=$t;Renderer=bs;TextRenderer=bn;Lexer=Rt;Tokenizer=ms;Hooks=Xa;constructor(...t){this.use(...t)}walkTokens(t,e){let a=[];for(let r of t)switch(a=a.concat(e.call(this,r)),r.type){case"table":{let s=r;for(let l of s.header)a=a.concat(this.walkTokens(l.tokens,e));for(let l of s.rows)for(let i of l)a=a.concat(this.walkTokens(i.tokens,e));break}case"list":{let s=r;a=a.concat(this.walkTokens(s.items,e));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(l=>{let i=s[l].flat(1/0);a=a.concat(this.walkTokens(i,e))}):s.tokens&&(a=a.concat(this.walkTokens(s.tokens,e)))}}return a}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(a=>{let r={...a};if(r.async=this.defaults.async||r.async||!1,a.extensions&&(a.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let l=e.renderers[s.name];l?e.renderers[s.name]=function(...i){let v=s.renderer.apply(this,i);return v===!1&&(v=l.apply(this,i)),v}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[s.level];l?l.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),r.extensions=e),a.renderer){let s=this.defaults.renderer||new bs(this.defaults);for(let l in a.renderer){if(!(l in s))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let i=l,v=a.renderer[i],u=s[i];s[i]=(...d)=>{let f=v.apply(s,d);return f===!1&&(f=u.apply(s,d)),f||""}}r.renderer=s}if(a.tokenizer){let s=this.defaults.tokenizer||new ms(this.defaults);for(let l in a.tokenizer){if(!(l in s))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let i=l,v=a.tokenizer[i],u=s[i];s[i]=(...d)=>{let f=v.apply(s,d);return f===!1&&(f=u.apply(s,d)),f}}r.tokenizer=s}if(a.hooks){let s=this.defaults.hooks||new Xa;for(let l in a.hooks){if(!(l in s))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let i=l,v=a.hooks[i],u=s[i];Xa.passThroughHooks.has(l)?s[i]=d=>{if(this.defaults.async&&Xa.passThroughHooksRespectAsync.has(l))return(async()=>{let y=await v.call(s,d);return u.call(s,y)})();let f=v.call(s,d);return u.call(s,f)}:s[i]=(...d)=>{if(this.defaults.async)return(async()=>{let y=await v.apply(s,d);return y===!1&&(y=await u.apply(s,d)),y})();let f=v.apply(s,d);return f===!1&&(f=u.apply(s,d)),f}}r.hooks=s}if(a.walkTokens){let s=this.defaults.walkTokens,l=a.walkTokens;r.walkTokens=function(i){let v=[];return v.push(l.call(this,i)),s&&(v=v.concat(s.call(this,i))),v}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return Rt.lex(t,e??this.defaults)}parser(t,e){return $t.parse(t,e??this.defaults)}parseMarkdown(t){return(e,a)=>{let r={...a},s={...this.defaults,...r},l=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(s.hooks&&(s.hooks.options=s,s.hooks.block=t),s.async)return(async()=>{let i=s.hooks?await s.hooks.preprocess(e):e,v=await(s.hooks?await s.hooks.provideLexer():t?Rt.lex:Rt.lexInline)(i,s),u=s.hooks?await s.hooks.processAllTokens(v):v;s.walkTokens&&await Promise.all(this.walkTokens(u,s.walkTokens));let d=await(s.hooks?await s.hooks.provideParser():t?$t.parse:$t.parseInline)(u,s);return s.hooks?await s.hooks.postprocess(d):d})().catch(l);try{s.hooks&&(e=s.hooks.preprocess(e));let i=(s.hooks?s.hooks.provideLexer():t?Rt.lex:Rt.lexInline)(e,s);s.hooks&&(i=s.hooks.processAllTokens(i)),s.walkTokens&&this.walkTokens(i,s.walkTokens);let v=(s.hooks?s.hooks.provideParser():t?$t.parse:$t.parseInline)(i,s);return s.hooks&&(v=s.hooks.postprocess(v)),v}catch(i){return l(i)}}}onError(t,e){return a=>{if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let r="<p>An error occurred:</p><pre>"+Xt(a.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(a);throw a}}},wa=new ec;function Le(t,e){return wa.parse(t,e)}Le.options=Le.setOptions=function(t){return wa.setOptions(t),Le.defaults=wa.defaults,Lr(Le.defaults),Le};Le.getDefaults=vn;Le.defaults=Sa;Le.use=function(...t){return wa.use(...t),Le.defaults=wa.defaults,Lr(Le.defaults),Le};Le.walkTokens=function(t,e){return wa.walkTokens(t,e)};Le.parseInline=wa.parseInline;Le.Parser=$t;Le.parser=$t.parse;Le.Renderer=bs;Le.TextRenderer=bn;Le.Lexer=Rt;Le.lexer=Rt.lex;Le.Tokenizer=ms;Le.Hooks=Xa;Le.parse=Le;Le.options;Le.setOptions;Le.use;Le.walkTokens;Le.parseInline;$t.parse;Rt.lex;var tc=w('<span class="author"> </span>'),ac=w('<span class="date"> </span>'),sc=w('<span class="tag-badge svelte-187zyvb"> </span>'),nc=w('<div class="tags-row svelte-187zyvb"></div>'),rc=w('<img class="svelte-187zyvb"/>'),lc=w('<div class="attachment-card svelte-187zyvb"><!> <a target="_blank" rel="noreferrer" class="svelte-187zyvb"> </a></div>'),ic=w('<div class="attachments svelte-187zyvb"><h3 class="svelte-187zyvb">Attachments</h3> <div class="grid svelte-187zyvb"></div></div>'),oc=w('<a target="_blank" rel="noreferrer" class="note-attachment-link svelte-187zyvb"> </a>'),cc=w('<div class="note-attachments svelte-187zyvb"><strong class="svelte-187zyvb">Attachments:</strong> <!></div>'),uc=w('<div class="note-card svelte-187zyvb"><div class="note-header svelte-187zyvb"><span> </span> <span class="note-author svelte-187zyvb"> </span> <span class="note-date svelte-187zyvb"> </span> <span> </span></div> <p class="note-text svelte-187zyvb"> </p> <!></div>'),vc=w('<div class="notes-section svelte-187zyvb"><h3 class="svelte-187zyvb">Notes</h3> <div class="notes-list svelte-187zyvb"></div></div>'),dc=w('<div class="document-view"><h2 class="svelte-187zyvb"> </h2> <div class="meta svelte-187zyvb"><span> </span> <span> </span> <span class="date"> </span> <!> <!></div> <!> <div class="content markdown-body svelte-187zyvb"><!></div> <!> <!></div>');function fc(t,e){Je(e,!0);let a=We(()=>e.document&&e.document.content?Le.parse(e.document.content):"<p>No content available.</p>");var r=dc(),s=o(r),l=o(s),i=c(s,2),v=o(i),u=o(v),d=c(v,2),f=o(d),y=c(d,2),h=o(y),m=c(y,2);{var x=O=>{var Z=tc(),ne=o(Z);H(()=>q(ne,`By ${e.document.author??""}`)),g(O,Z)};$(m,O=>{e.document?.author&&O(x)})}var S=c(m,2);{var k=O=>{var Z=ac(),ne=o(Z);H(()=>q(ne,`Done: ${e.document.done_date??""}`)),g(O,Z)};$(S,O=>{e.document?.done_date&&O(k)})}var b=c(i,2);{var A=O=>{var Z=nc();$e(Z,21,()=>e.document.tags,Ye,(ne,W)=>{var G=sc(),M=o(G);H(()=>q(M,`#${n(W).name??""}`)),g(ne,G)}),g(O,Z)};$(b,O=>{e.document?.tags?.length>0&&O(A)})}var _=c(b,2),T=o(_);yi(T,()=>n(a));var z=c(_,2);{var R=O=>{var Z=ic(),ne=c(o(Z),2);$e(ne,21,()=>e.document.attachments,Ye,(W,G)=>{var M=lc(),U=o(M);{var ce=we=>{var I=rc();H(()=>{Ze(I,"src",n(G).file_path),Ze(I,"alt",n(G).filename)}),g(we,I)};$(U,we=>{n(G).media_type&&n(G).media_type.startsWith("image/")&&we(ce)})}var le=c(U,2),fe=o(le);H(()=>{Ze(le,"href",n(G).file_path),q(fe,n(G).filename)}),g(W,M)}),g(O,Z)};$(z,O=>{e.document?.attachments?.length>0&&O(R)})}var Y=c(z,2);{var ae=O=>{var Z=vc(),ne=c(o(Z),2);$e(ne,21,()=>e.document.journal_entries,Ye,(W,G)=>{var M=uc(),U=o(M),ce=o(U),le=o(ce),fe=c(ce,2),we=o(fe),I=c(fe,2),L=o(I),Q=c(I,2),F=o(Q),E=c(U,2),V=o(E),re=c(E,2);{var K=ye=>{var N=cc(),X=c(o(N),2);$e(X,17,()=>n(G).attachments,Ye,(J,ee)=>{var D=oc(),ue=o(D);H(()=>{Ze(D,"href",n(ee).file_path),q(ue,`üìé ${n(ee).filename??""}`)}),g(J,D)}),g(ye,N)};$(re,ye=>{n(G).attachments?.length>0&&ye(K)})}H(()=>{Ie(ce,1,`note-badge ${n(G).type??""}`,"svelte-187zyvb"),q(le,n(G).type),q(we,n(G).author||"Unknown"),q(L,n(G).created_at),Ie(Q,1,`note-status ${n(G).status??""}`,"svelte-187zyvb"),q(F,n(G).status),q(V,n(G).text)}),g(W,M)}),g(O,Z)};$(Y,O=>{e.document?.journal_entries?.length>0&&O(ae)})}H(O=>{q(l,e.document?.name),Ie(v,1,`badge ${e.document?.type??""}`,"svelte-187zyvb"),q(u,e.document?.type),Ie(d,1,`badge status-${e.document?.status??""}`,"svelte-187zyvb"),q(f,O),q(h,e.document?.registration_date)},[()=>e.document?.status.replace("_"," ")]),g(t,r),Qe()}var pc=w('<input type="text" class="edit-input svelte-1b0y5ne"/>'),hc=w('<button class="btn-icon svelte-1b0y5ne" title="Save">‚úì</button> <button class="btn-icon svelte-1b0y5ne" title="Cancel">‚úï</button>',1),_c=w('<button class="btn-icon svelte-1b0y5ne" title="Edit">‚úèÔ∏è</button> <button class="btn-icon delete svelte-1b0y5ne" title="Delete">üóëÔ∏è</button>',1),gc=w('<tr class="svelte-1b0y5ne"><td class="svelte-1b0y5ne"><!></td><td class="svelte-1b0y5ne"><!></td></tr>'),mc=w('<div class="empty-state svelte-1b0y5ne">No materials yet. Add one above.</div>'),bc=w('<div class="modal-overlay svelte-1b0y5ne"><div class="modal-content svelte-1b0y5ne"><div class="modal-header svelte-1b0y5ne"><h3 class="svelte-1b0y5ne">Material Library</h3> <button class="close-btn svelte-1b0y5ne">&times;</button></div> <div class="modal-body svelte-1b0y5ne"><div class="add-section svelte-1b0y5ne"><input type="text" placeholder="New material name..." class="svelte-1b0y5ne"/> <button class="btn-add svelte-1b0y5ne">Add</button></div> <table class="materials-table svelte-1b0y5ne"><thead><tr><th class="svelte-1b0y5ne">Name</th><th class="svelte-1b0y5ne">Actions</th></tr></thead><tbody></tbody></table> <!></div></div></div>');function yc(t,e){Je(e,!0);let a=j(ke([])),r=j(""),s=j(null),l=j("");async function i(){e.isOpen&&p(a,await ns(),!0)}Nt(()=>{i()});async function v(){if(n(r).trim())try{await Hi({name:n(r).trim()}),p(r,""),await i()}catch(S){console.error(S),alert("Failed to add material")}}function u(S){p(s,S.id,!0),p(l,S.name,!0)}async function d(){if(!(!n(l).trim()||n(s)===null))try{await Xi(n(s),n(l).trim()),p(s,null),p(l,""),await i()}catch(S){console.error(S),alert("Failed to update material")}}function f(){p(s,null),p(l,"")}async function y(S){if(confirm("Delete this material?"))try{await Vi(S),await i()}catch(k){console.error(k),alert("Failed to delete material")}}var h=Be(),m=Se(h);{var x=S=>{var k=bc();k.__click=function(...W){e.close?.apply(this,W)};var b=o(k);b.__click=W=>W.stopPropagation();var A=o(b),_=c(o(A),2);_.__click=function(...W){e.close?.apply(this,W)};var T=c(A,2),z=o(T),R=o(z);R.__keydown=W=>W.key==="Enter"&&v();var Y=c(R,2);Y.__click=v;var ae=c(z,2),O=c(o(ae));$e(O,21,()=>n(a),W=>W.id,(W,G)=>{var M=gc(),U=o(M),ce=o(U);{var le=F=>{var E=pc();fr(E),E.__keydown=V=>{V.key==="Enter"&&d(),V.key==="Escape"&&f()},Te(E,()=>n(l),V=>p(l,V)),g(F,E)},fe=F=>{var E=fi();H(()=>q(E,n(G).name)),g(F,E)};$(ce,F=>{n(s)===n(G).id?F(le):F(fe,!1)})}var we=c(U),I=o(we);{var L=F=>{var E=hc(),V=Se(E);V.__click=d;var re=c(V,2);re.__click=f,g(F,E)},Q=F=>{var E=_c(),V=Se(E);V.__click=()=>u(n(G));var re=c(V,2);re.__click=()=>y(n(G).id),g(F,E)};$(I,F=>{n(s)===n(G).id?F(L):F(Q,!1)})}g(W,M)});var Z=c(ae,2);{var ne=W=>{var G=mc();g(W,G)};$(Z,W=>{n(a).length===0&&W(ne)})}Te(R,()=>n(r),W=>p(r,W)),g(S,k)};$(m,S=>{e.isOpen&&S(x)})}g(t,h),Qe()}st(["click","keydown"]);var kc=w("<option> </option>"),wc=w('<div class="modal-overlay svelte-1iwbfq1"><div class="modal-content svelte-1iwbfq1"><div class="modal-header svelte-1iwbfq1"><h3 class="svelte-1iwbfq1">Add Task</h3> <button class="close-btn svelte-1iwbfq1">&times;</button></div> <form class="modal-body svelte-1iwbfq1"><div class="form-group svelte-1iwbfq1"><label for="name" class="svelte-1iwbfq1">Task Name</label> <input id="name" type="text" placeholder="Enter task name..." required class="svelte-1iwbfq1"/></div> <div class="form-group svelte-1iwbfq1"><label for="material" class="svelte-1iwbfq1">Material</label> <div class="material-row svelte-1iwbfq1"><select id="material" class="material-select svelte-1iwbfq1"><option>-- No Material --</option><!></select> <button type="button" class="btn-library svelte-1iwbfq1" title="Edit Material Library">üìö</button></div></div> <div class="form-group svelte-1iwbfq1"><label for="gnc_path" class="svelte-1iwbfq1">GNC File Path</label> <input id="gnc_path" type="text" placeholder="e.g. Z:\\Sidra\\Part1.gnc" class="svelte-1iwbfq1"/></div> <div class="form-group svelte-1iwbfq1"><label for="assignee" class="svelte-1iwbfq1">Assignee</label> <input id="assignee" type="text" placeholder="Enter assignee name..." class="svelte-1iwbfq1"/></div> <div class="actions svelte-1iwbfq1"><button type="button" class="btn-secondary svelte-1iwbfq1">Cancel</button> <button type="submit" class="btn-primary svelte-1iwbfq1"> </button></div></form></div></div>'),xc=w("<!> <!>",1);function Sc(t,e){Je(e,!0);let a=j(""),r=j(""),s=j(null),l=j(""),i=j(!1),v=j(ke([])),u=j(!1);async function d(){p(v,await ns(),!0)}Nt(()=>{e.isOpen&&(p(r,localStorage.getItem("task_assignee")||"",!0),p(a,""),p(s,null),p(l,""),d())});async function f(b){if(b.preventDefault(),!!n(a)){p(i,!0);try{n(r)&&localStorage.setItem("task_assignee",n(r)),await e.onSubmit({name:n(a),assignee:n(r),material_id:n(s),gnc_file_path:n(l)}),e.close()}catch(A){console.error(A),alert("Failed to add task")}finally{p(i,!1)}}}function y(){p(u,!0)}function h(){p(u,!1),d()}var m=xc(),x=Se(m);{var S=b=>{var A=wc();A.__click=function(...F){e.close?.apply(this,F)};var _=o(A);_.__click=F=>F.stopPropagation();var T=o(_),z=c(o(T),2);z.__click=function(...F){e.close?.apply(this,F)};var R=c(T,2),Y=o(R),ae=c(o(Y),2);fr(ae);var O=c(Y,2),Z=c(o(O),2),ne=o(Z),W=o(ne);W.value=(W.__value=null)??"";var G=c(W);$e(G,17,()=>n(v),Ye,(F,E)=>{var V=kc(),re=o(V),K={};H(()=>{q(re,n(E).name),K!==(K=n(E).id)&&(V.value=(V.__value=n(E).id)??"")}),g(F,V)});var M=c(ne,2);M.__click=y;var U=c(O,2),ce=c(o(U),2),le=c(U,2),fe=c(o(le),2),we=c(le,2),I=o(we);I.__click=function(...F){e.close?.apply(this,F)};var L=c(I,2),Q=o(L);H(()=>{L.disabled=n(i),q(Q,n(i)?"Adding...":"Add Task")}),ka("submit",R,f),Te(ae,()=>n(a),F=>p(a,F)),pt(ne,()=>n(s),F=>p(s,F)),Te(ce,()=>n(l),F=>p(l,F)),Te(fe,()=>n(r),F=>p(r,F)),g(b,A)};$(x,b=>{e.isOpen&&b(S)})}var k=c(x,2);yc(k,{get isOpen(){return n(u)},close:h}),g(t,m),Qe()}st(["click"]);var qc=w('<div class="material-group-header svelte-ty272s"><span class="material-group-name svelte-ty272s"> </span> <span class="material-group-count svelte-ty272s"> </span></div>'),Tc=w('<span class="material-badge svelte-ty272s"> </span>'),jc=w('<div class="task-item svelte-ty272s"><div class="task-line-1 svelte-ty272s"><span> </span> <button class="delete-btn svelte-ty272s" title="Delete">√ó</button></div> <div class="task-line-2 svelte-ty272s"><select><option>Planned</option><option>Pending</option><option>Done</option></select> <!> <input type="text" class="assignee-input svelte-ty272s" placeholder="Assignee"/></div></div>'),Ec=w("<!> <!>",1),Ac=w('<div class="empty-tasks svelte-ty272s"> </div>'),Cc=w('<div class="embedded-tasks svelte-ty272s"><div class="tasks-header svelte-ty272s"><h4 class="svelte-ty272s">Tasks</h4> <div class="header-actions svelte-ty272s"><button class="group-toggle-btn svelte-ty272s"> </button> <select class="filter-select svelte-ty272s"><option>Hide Done</option><option>Show All</option><option>Pending</option></select> <button class="add-task-btn svelte-ty272s">+ Add</button></div></div> <div class="tasks-list svelte-ty272s"><!> <!></div></div> <!>',1);function Dc(t,e){Je(e,!0);let a=Ct(e,"filterAssignee",3,""),r=j(ke(e.document.tasks||[])),s=j("hide_done"),l=j(!1),i=j(!0),v=We(()=>[...n(r)].sort((M,U)=>M.status==="done"&&U.status!=="done"?1:M.status!=="done"&&U.status==="done"?-1:0)),u=We(()=>n(v).filter(M=>{if(n(s)==="hide_done"&&M.status==="done"||n(s)==="pending"&&M.status!=="pending")return!1;if(n(s)==="all"){if(a()&&a().trim()){const U=(M.assignee||"").toLowerCase(),ce=a().toLowerCase();return U.includes(ce)}return!0}if(a()&&a().trim()){const U=(M.assignee||"").toLowerCase(),ce=a().toLowerCase();if(!U.includes(ce))return!1}return!0})),d=We(()=>()=>{if(!n(i))return{"All Tasks":n(u)};const M={};n(u).forEach(le=>{const fe=le.material?le.material.name:"(No Material)";M[fe]||(M[fe]=[]),M[fe].push(le)});const U={};return Object.keys(M).sort((le,fe)=>le==="(No Material)"?1:fe==="(No Material)"?-1:le.localeCompare(fe)).forEach(le=>{U[le]=M[le]}),U});async function f(M,U){try{M.status=U,await Bs(M.id,{status:U}),e.refresh()}catch(ce){console.error(ce)}}async function y(M,U){try{await Bs(M.id,{assignee:U})}catch(ce){console.error(ce)}}async function h(M){if(confirm("Delete task?"))try{await Gi(M),p(r,n(r).filter(U=>U.id!==M),!0),e.refresh()}catch(U){console.error(U)}}async function m(M){try{const U=await Bi(e.document.id,{name:M.name,assignee:M.assignee,status:"planned",material_id:M.material_id});p(r,[...n(r),U],!0),e.refresh()}catch(U){throw console.error(U),U}}var x=Cc(),S=Se(x),k=o(S),b=c(o(k),2),A=o(b);A.__click=()=>p(i,!n(i));var _=o(A),T=c(A,2),z=o(T);z.value=z.__value="hide_done";var R=c(z);R.value=R.__value="all";var Y=c(R);Y.value=Y.__value="pending";var ae=c(T,2);ae.__click=()=>p(l,!0);var O=c(k,2),Z=o(O);$e(Z,17,()=>Object.entries(n(d)()),([M,U])=>M,(M,U)=>{var ce=We(()=>Vs(n(U),2));let le=()=>n(ce)[0],fe=()=>n(ce)[1];var we=Ec(),I=Se(we);{var L=F=>{var E=qc(),V=o(E),re=o(V),K=c(V,2),ye=o(K);H(()=>{q(re,le()),q(ye,`(${fe().length??""})`)}),g(F,E)};$(I,F=>{n(i)&&Object.keys(n(d)()).length>1&&F(L)})}var Q=c(I,2);$e(Q,17,fe,F=>F.id,(F,E,V)=>{var re=jc(),K=o(re),ye=o(K),N=o(ye),X=c(ye,2);X.__click=()=>h(n(E).id);var J=c(K,2),ee=o(J);ee.__change=oe=>f(n(E),oe.target.value);var D=o(ee);D.value=D.__value="planned";var ue=c(D);ue.value=ue.__value="pending";var se=c(ue);se.value=se.__value="done";var de;nn(ee);var ie=c(ee,2);{var he=oe=>{var pe=Tc(),xe=o(pe);H(()=>{Ze(pe,"title",`Material: ${n(E).material.name??""}`),q(xe,`üì¶ ${n(E).material.name??""}`)}),g(oe,pe)};$(ie,oe=>{n(E).material&&oe(he)})}var ve=c(ie,2);ve.__change=()=>y(n(E),n(E).assignee),H(()=>{Ie(ye,1,`task-name ${n(E).status==="done"?"done-text":""}`,"svelte-ty272s"),q(N,n(E).name),Ie(ee,1,`status-select ${n(E).status??""}`,"svelte-ty272s"),de!==(de=n(E).status)&&(ee.value=(ee.__value=n(E).status)??"",qs(ee,n(E).status))}),Te(ve,()=>n(E).assignee,oe=>n(E).assignee=oe),g(F,re)}),g(M,we)});var ne=c(Z,2);{var W=M=>{var U=Ac(),ce=o(U);H(()=>q(ce,n(r).length>0?"No tasks match filter.":"No tasks yet.")),g(M,U)};$(ne,M=>{n(u).length===0&&M(W)})}var G=c(S,2);Sc(G,{get isOpen(){return n(l)},close:()=>p(l,!1),onSubmit:m}),H(()=>{Ze(A,"title",n(i)?"Show flat list":"Group by material"),q(_,n(i)?"üì¶":"üìã")}),pt(T,()=>n(s),M=>p(s,M)),g(t,x),Qe()}st(["click","change"]);var Pc=w('<p class="upload-status svelte-1yijx0t">Uploading...</p>'),Rc=w('<div class="attachment-item svelte-1yijx0t"><span class="attachment-name svelte-1yijx0t"> </span> <button type="button" class="remove-btn svelte-1yijx0t">√ó</button></div>'),$c=w('<div class="attachments-list svelte-1yijx0t"></div>'),zc=w('<div class="modal-overlay svelte-1yijx0t"><div class="modal-content svelte-1yijx0t"><div class="modal-header svelte-1yijx0t"><h3 class="svelte-1yijx0t"> </h3> <button class="close-btn svelte-1yijx0t">&times;</button></div> <form class="modal-body svelte-1yijx0t"><div class="form-group svelte-1yijx0t"><label for="author" class="svelte-1yijx0t">Author</label> <input id="author" type="text" placeholder="Your Name" class="svelte-1yijx0t"/></div> <div class="form-group svelte-1yijx0t"><label for="type" class="svelte-1yijx0t">Type</label> <select id="type" class="svelte-1yijx0t"><option>Info</option><option>Warning</option><option>Error</option></select></div> <div class="form-group svelte-1yijx0t"><label for="text" class="svelte-1yijx0t">Message</label> <textarea id="text" required rows="4" class="svelte-1yijx0t"></textarea></div> <div class="form-group svelte-1yijx0t"><label for="attachments" class="svelte-1yijx0t">Attachments</label> <div class="file-upload-wrapper svelte-1yijx0t"><input id="attachments" type="file" multiple class="svelte-1yijx0t"/> <!></div> <!></div> <div class="actions svelte-1yijx0t"><button type="button" class="btn-secondary svelte-1yijx0t">Cancel</button> <button type="submit" class="btn-primary svelte-1yijx0t"> </button></div></form></div></div>');function Wr(t,e){Je(e,!0);let a=Ct(e,"entry",3,null),r=j(""),s=j("info"),l=j(""),i=j(!1),v=j(ke([])),u=j(!1);Nt(()=>{e.isOpen&&(a()?(p(r,a().text||"",!0),p(s,a().type||"info",!0),p(l,a().author||"",!0),p(v,a().attachments||[],!0)):(p(l,localStorage.getItem("journal_author")||"",!0),p(r,""),p(s,"info"),p(v,[],!0)))});async function d(S){const k=Array.from(S.target.files);if(k.length!==0){p(u,!0);try{for(const b of k){const A=await on(b);n(v).push({file_path:A.file_path,filename:A.filename,media_type:A.media_type})}}catch(b){console.error("Upload failed",b),alert("Failed to upload attachment")}finally{p(u,!1),S.target.value=""}}}function f(S){n(v).splice(S,1)}async function y(S){S.preventDefault(),p(i,!0),n(l)&&localStorage.setItem("journal_author",n(l));try{const k={text:n(r),type:n(s),status:a()?.status||"pending",author:n(l),document_id:e.documentId,attachments:n(v)};a()?await un(a().id,k):await Ir(k),window.dispatchEvent(new CustomEvent("journal-entries-updated")),e.close()}catch(k){console.error(k),alert(a()?"Failed to update note":"Failed to create note")}finally{p(i,!1)}}var h=Be(),m=Se(h);{var x=S=>{var k=zc();k.__click=function(...K){e.close?.apply(this,K)};var b=o(k);b.__click=K=>K.stopPropagation();var A=o(b),_=o(A),T=o(_),z=c(_,2);z.__click=function(...K){e.close?.apply(this,K)};var R=c(A,2),Y=o(R),ae=c(o(Y),2),O=c(Y,2),Z=c(o(O),2),ne=o(Z);ne.value=ne.__value="info";var W=c(ne);W.value=W.__value="warning";var G=c(W);G.value=G.__value="error";var M=c(O,2),U=c(o(M),2),ce=c(M,2),le=c(o(ce),2),fe=o(le);fe.__change=d;var we=c(fe,2);{var I=K=>{var ye=Pc();g(K,ye)};$(we,K=>{n(u)&&K(I)})}var L=c(le,2);{var Q=K=>{var ye=$c();$e(ye,21,()=>n(v),Ye,(N,X,J)=>{var ee=Rc(),D=o(ee),ue=o(D),se=c(D,2);se.__click=()=>f(J),H(()=>q(ue,n(X).filename)),g(N,ee)}),g(K,ye)};$(L,K=>{n(v).length>0&&K(Q)})}var F=c(ce,2),E=o(F);E.__click=function(...K){e.close?.apply(this,K)};var V=c(E,2),re=o(V);H(()=>{q(T,a()?"Edit Note":`Add Note to ${e.documentName}`),fe.disabled=n(u),V.disabled=n(i),q(re,n(i)?"Saving...":a()?"Update Note":"Add Note")}),ka("submit",R,y),Te(ae,()=>n(l),K=>p(l,K)),pt(Z,()=>n(s),K=>p(s,K)),Te(U,()=>n(r),K=>p(r,K)),g(S,k)};$(m,S=>{e.isOpen&&S(x)})}g(t,h),Qe()}st(["click","change"]);var Mc=w('<img class="svelte-jm2ier"/>'),Ic=w('<div class="file-placeholder svelte-jm2ier"><span> </span> <a target="_blank" rel="noreferrer">Download</a></div>'),Lc=w('<div class="image-wrapper svelte-jm2ier"><!></div>'),Oc=w('<div class="modal-overlay svelte-jm2ier"><div class="modal-content svelte-jm2ier"><button class="close-btn svelte-jm2ier">&times;</button> <div class="gallery svelte-jm2ier"></div></div></div>');function Zr(t,e){var a=Be(),r=Se(a);{var s=l=>{var i=Oc();i.__click=function(...f){e.close?.apply(this,f)};var v=o(i);v.__click=f=>f.stopPropagation();var u=o(v);u.__click=function(...f){e.close?.apply(this,f)};var d=c(u,2);$e(d,21,()=>e.attachments,Ye,(f,y)=>{var h=Lc(),m=o(h);{var x=k=>{var b=Mc();H(()=>{Ze(b,"src",n(y).file_path),Ze(b,"alt",n(y).filename)}),g(k,b)},S=k=>{var b=Ic(),A=o(b),_=o(A),T=c(A,2);H(()=>{q(_,`üìÑ ${n(y).filename??""}`),Ze(T,"href",n(y).file_path)}),g(k,b)};$(m,k=>{n(y).media_type&&n(y).media_type.startsWith("image/")?k(x):k(S,!1)})}g(f,h)}),g(l,i)};$(r,l=>{e.isOpen&&l(s)})}g(t,a)}st(["click"]);var Nc=w("<option> </option>"),Fc=w('<div class="modal-overlay svelte-12q38jy"><div class="modal-content svelte-12q38jy"><div class="modal-header svelte-12q38jy"><h3 class="svelte-12q38jy">üîç Filter Documents</h3> <button class="close-btn svelte-12q38jy">&times;</button></div> <div class="modal-body svelte-12q38jy"><div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Document Type</h4> <select class="filter-input svelte-12q38jy"><option>All Types</option><option>Plan</option><option>Mail</option><option>Other</option></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Status</h4> <select class="filter-input svelte-12q38jy"><option>All Statuses</option><option>In Progress</option><option>Done</option></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Tag</h4> <input type="text" placeholder="Filter by tag..." class="filter-input svelte-12q38jy"/></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Assignee</h4> <input type="text" placeholder="Filter by assignee..." class="filter-input svelte-12q38jy"/></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Material</h4> <select class="filter-input svelte-12q38jy"><option>All Materials</option><!></select></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Task Types (Show documents with these task types)</h4> <div class="checkbox-group svelte-12q38jy"><label class="checkbox-label svelte-12q38jy"><input type="checkbox" class="svelte-12q38jy"/> <span class="checkbox-text svelte-12q38jy">Planned</span></label> <label class="checkbox-label svelte-12q38jy"><input type="checkbox" class="svelte-12q38jy"/> <span class="checkbox-text svelte-12q38jy">Pending</span></label> <label class="checkbox-label svelte-12q38jy"><input type="checkbox" class="svelte-12q38jy"/> <span class="checkbox-text svelte-12q38jy">Done</span></label></div></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Date Range</h4> <select class="filter-input svelte-12q38jy"><option>Registration Date</option><option>Done Date</option></select> <div class="date-range svelte-12q38jy"><input type="date" class="filter-input svelte-12q38jy" placeholder="Start Date"/> <span class="date-separator svelte-12q38jy">to</span> <input type="date" class="filter-input svelte-12q38jy" placeholder="End Date"/></div></div> <div class="filter-section svelte-12q38jy"><h4 class="svelte-12q38jy">Sort By</h4> <div class="sort-controls svelte-12q38jy"><select class="filter-input svelte-12q38jy"><option>Date</option><option>Name</option><option>Author</option><option>Status</option><option>Done Date</option></select> <button class="sort-order-btn svelte-12q38jy" title="Toggle sort order"> </button></div></div></div> <div class="modal-footer svelte-12q38jy"><button class="btn-secondary svelte-12q38jy">Reset All</button> <button class="btn-primary svelte-12q38jy">Apply Filters</button></div></div></div>');function Bc(t,e){Je(e,!0);let a=j(ke({filterType:"",filterStatus:"",filterTag:"",filterAssignee:"",filterMaterial:"",filterTaskTypes:[],startDate:"",endDate:"",dateField:"registration_date",sortBy:"registration_date",sortOrder:"desc"})),r=j(ke([])),s=!1;Nt(()=>{e.isOpen&&!s&&(e.filters&&(p(a,{...e.filters},!0),Array.isArray(n(a).filterTaskTypes)||(n(a).filterTaskTypes=[])),l()),s=e.isOpen});async function l(){try{p(r,await ns(),!0)}catch(h){console.error("Failed to load materials",h)}}function i(){e.onApply(n(a)),e.close()}function v(){p(a,{filterType:"",filterStatus:"",filterTag:"",filterAssignee:"",filterMaterial:"",filterTaskTypes:[],startDate:"",endDate:"",dateField:"registration_date",sortBy:"registration_date",sortOrder:"desc"},!0)}function u(h){n(a).filterTaskTypes.includes(h)?n(a).filterTaskTypes=n(a).filterTaskTypes.filter(m=>m!==h):n(a).filterTaskTypes=[...n(a).filterTaskTypes,h]}var d=Be(),f=Se(d);{var y=h=>{var m=Fc();m.__click=function(...me){e.close?.apply(this,me)};var x=o(m);x.__click=me=>me.stopPropagation();var S=o(x),k=c(o(S),2);k.__click=function(...me){e.close?.apply(this,me)};var b=c(S,2),A=o(b),_=c(o(A),2),T=o(_);T.value=T.__value="";var z=c(T);z.value=z.__value="plan";var R=c(z);R.value=R.__value="mail";var Y=c(R);Y.value=Y.__value="other";var ae=c(A,2),O=c(o(ae),2),Z=o(O);Z.value=Z.__value="";var ne=c(Z);ne.value=ne.__value="in_progress";var W=c(ne);W.value=W.__value="done";var G=c(ae,2),M=c(o(G),2),U=c(G,2),ce=c(o(U),2),le=c(U,2),fe=c(o(le),2),we=o(fe);we.value=we.__value="";var I=c(we);$e(I,17,()=>n(r),Ye,(me,ge)=>{var Oe=Nc(),Fe=o(Oe),Ae={};H(()=>{q(Fe,n(ge).name),Ae!==(Ae=n(ge).id)&&(Oe.value=(Oe.__value=n(ge).id)??"")}),g(me,Oe)});var L=c(le,2),Q=c(o(L),2),F=o(Q),E=o(F);E.__change=()=>u("planned");var V=c(F,2),re=o(V);re.__change=()=>u("pending");var K=c(V,2),ye=o(K);ye.__change=()=>u("done");var N=c(L,2),X=c(o(N),2),J=o(X);J.value=J.__value="registration_date";var ee=c(J);ee.value=ee.__value="done_date";var D=c(X,2),ue=o(D),se=c(ue,4),de=c(N,2),ie=c(o(de),2),he=o(ie),ve=o(he);ve.value=ve.__value="registration_date";var oe=c(ve);oe.value=oe.__value="name";var pe=c(oe);pe.value=pe.__value="author";var xe=c(pe);xe.value=xe.__value="status";var P=c(xe);P.value=P.__value="done_date";var C=c(he,2);C.__click=()=>n(a).sortOrder=n(a).sortOrder==="desc"?"asc":"desc";var te=o(C),_e=c(b,2),De=o(_e);De.__click=v;var Me=c(De,2);Me.__click=i,H((me,ge,Oe)=>{As(E,me),As(re,ge),As(ye,Oe),q(te,n(a).sortOrder==="desc"?"‚Üì Desc":"‚Üë Asc")},[()=>n(a).filterTaskTypes.includes("planned"),()=>n(a).filterTaskTypes.includes("pending"),()=>n(a).filterTaskTypes.includes("done")]),pt(_,()=>n(a).filterType,me=>n(a).filterType=me),pt(O,()=>n(a).filterStatus,me=>n(a).filterStatus=me),Te(M,()=>n(a).filterTag,me=>n(a).filterTag=me),Te(ce,()=>n(a).filterAssignee,me=>n(a).filterAssignee=me),pt(fe,()=>n(a).filterMaterial,me=>n(a).filterMaterial=me),pt(X,()=>n(a).dateField,me=>n(a).dateField=me),Te(ue,()=>n(a).startDate,me=>n(a).startDate=me),Te(se,()=>n(a).endDate,me=>n(a).endDate=me),pt(he,()=>n(a).sortBy,me=>n(a).sortBy=me),g(h,m)};$(f,h=>{e.isOpen&&h(y)})}g(t,d),Qe()}st(["click","change"]);var Gc=w('<span class="tag-chip svelte-1qsxu3n"> <button type="button" class="svelte-1qsxu3n">&times;</button></span>'),Uc=w('<li class="svelte-1qsxu3n"> </li>'),Yc=w('<ul class="suggestions svelte-1qsxu3n"></ul>'),Hc=w('<div class="tag-input-container svelte-1qsxu3n"><!> <div class="input-wrapper svelte-1qsxu3n"><input type="text" class="svelte-1qsxu3n"/> <!></div></div>');function Xc(t,e){Je(e,!0);let a=Ct(e,"selectedTags",31,()=>ke([])),r=Ct(e,"placeholder",3,"Add tag..."),s=j(""),l=j(ke([])),i=j(ke([])),v=j(!1),u;It(async()=>{try{p(l,await Pi(),!0)}catch(_){console.error("Failed to fetch tags",_)}});function d(_){if(p(s,_.target.value,!0),n(s).includes(",")){const T=n(s).split(",");for(let z of T)z=z.trim(),z&&(a().includes(z)||a([...a(),z]));p(s,""),p(v,!1);return}n(s)?(p(i,n(l).filter(T=>T.name.toLowerCase().includes(n(s).toLowerCase())&&!a().includes(T.name)),!0),p(v,!0)):p(v,!1)}function f(_){_&&!a().includes(_)&&a([...a(),_]),p(s,""),p(v,!1),u.focus()}function y(_){a(a().filter(T=>T!==_))}function h(_){_.key==="Enter"?(_.preventDefault(),n(s).trim()&&f(n(s).trim())):_.key==="Backspace"&&!n(s)&&a().length>0&&y(a()[a().length-1])}var m=Hc(),x=o(m);$e(x,17,a,Ye,(_,T)=>{var z=Gc(),R=o(z),Y=c(R);Y.__click=()=>y(n(T)),H(()=>q(R,`${n(T)??""} `)),g(_,z)});var S=c(x,2),k=o(S);k.__input=d,k.__keydown=h,ln(k,_=>u=_,()=>u);var b=c(k,2);{var A=_=>{var T=Yc();$e(T,21,()=>n(i),Ye,(z,R)=>{var Y=Uc();Y.__click=()=>f(n(R).name);var ae=o(Y);H(()=>q(ae,n(R).name)),g(z,Y)}),g(_,T)};$(b,_=>{n(v)&&n(i).length>0&&_(A)})}H(()=>Ze(k,"placeholder",r())),ka("blur",k,()=>setTimeout(()=>p(v,!1),200)),ka("focus",k,()=>n(s)&&p(v,!0)),Te(k,()=>n(s),_=>p(s,_)),g(t,m),Qe()}st(["click","input","keydown"]);var Vc=w('<span class="filter-badge svelte-s90sg6">‚óè</span>'),Wc=w('<div class="card-desc svelte-s90sg6"> </div>'),Zc=w('<span class="tag-badge svelte-s90sg6"> </span>'),Jc=w('<button class="icon-badge attachment-badge svelte-s90sg6" title="View Attachments"> </button>'),Qc=w('<span class="icon-badge task-planned svelte-s90sg6" title="Planned Tasks"> </span>'),Kc=w('<span class="icon-badge task-pending svelte-s90sg6" title="Pending Tasks"> </span>'),eu=w('<span class="icon-badge task-done svelte-s90sg6" title="Completed Tasks"> </span>'),tu=w("<!> <!> <!>",1),au=w('<span class="icon-badge journal-info svelte-s90sg6" title="Info Notes"> </span>'),su=w('<span class="icon-badge journal-warning svelte-s90sg6" title="Warnings"> </span>'),nu=w('<span class="icon-badge journal-error svelte-s90sg6" title="Errors"> </span>'),ru=w("<!> <!> <!>",1),lu=w('<div class="badges-tags-row svelte-s90sg6"><!> <!> <!> <!></div>'),iu=w('<div class="meta-item svelte-s90sg6"><span class="label svelte-s90sg6">Done:</span> <span class="value"> </span></div>'),ou=w('<button class="note-attachment-btn svelte-s90sg6"> </button>'),cu=w('<div><div class="note-header svelte-s90sg6"><span> </span> <span class="note-author svelte-s90sg6"> </span> <span class="note-date svelte-s90sg6"> </span> <!> <button class="note-edit-btn svelte-s90sg6" title="Edit note">‚úèÔ∏è</button> <button> </button></div> <p class="note-text svelte-s90sg6"> </p></div>'),uu=w('<div class="embedded-notes svelte-s90sg6"><h4 class="svelte-s90sg6">Notes</h4> <div class="notes-list svelte-s90sg6"></div></div>'),vu=w('<div class="dropdown-menu svelte-s90sg6"><button class="dropdown-item svelte-s90sg6">üìù Add Note</button> <button class="dropdown-item svelte-s90sg6"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg> Edit</button> <button class="dropdown-item delete-item svelte-s90sg6"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg> Delete</button></div>'),du=w('<div class="card svelte-s90sg6"><div class="card-header svelte-s90sg6"><div class="title-group svelte-s90sg6"><h3 class="svelte-s90sg6"> </h3> <span class="badge badge-type svelte-s90sg6"> </span></div> <select><option>In Progress</option><option>Done</option></select></div> <!> <!> <div class="card-meta svelte-s90sg6"><div class="meta-item svelte-s90sg6"><span class="label svelte-s90sg6">Author:</span> <span class="value"> </span></div> <div class="meta-item svelte-s90sg6"><span class="label svelte-s90sg6">Date:</span> <span class="value"> </span></div> <!></div> <!> <!> <div class="card-actions svelte-s90sg6"><button class="action-btn primary-btn svelte-s90sg6" title="View Content"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg> View</button> <div class="dropdown-container svelte-s90sg6"><button class="action-btn dropdown-btn svelte-s90sg6" title="More actions"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg></button> <!></div></div></div>'),fu=w('<div class="empty-state svelte-s90sg6"><p>No documents found.</p></div>'),pu=w('<div class="list-container svelte-s90sg6"><div class="filters-bar svelte-s90sg6"><div class="main-filters svelte-s90sg6"><div class="search-box svelte-s90sg6"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon svelte-s90sg6"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <input type="text" placeholder="Search documents..." class="svelte-s90sg6"/></div> <button class="filter-btn svelte-s90sg6" title="Filter &amp; Sort"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg> Filters <!></button></div></div> <div class="cards-wrapper svelte-s90sg6"><!> <!></div> <!> <!> <!> <!></div>');function hu(t,e){Je(e,!0);let a=j(ke([])),r=j(""),s=j(""),l=j(""),i=j(""),v=j(""),u=j(""),d=j(ke([])),f=j(""),y=j(""),h=j("registration_date"),m=j(ke([])),x=j(null),S=j(null),k=j(null),b=j(null),A=j(!1),_=j("registration_date"),T=j("desc"),z=j(null);async function R(){let P=await cn(n(r),n(s),n(l),n(_),n(T),n(i),n(f),n(y),n(h),n(v));n(d)&&n(d).length>0&&(P=P.filter(C=>!C.tasks||C.tasks.length===0?!1:C.tasks.some(te=>n(d).includes(te.status)))),n(u)&&(P=P.filter(C=>!C.tasks||C.tasks.length===0?!1:C.tasks.some(te=>te.material_id&&te.material_id.toString()===n(u).toString()))),p(a,P,!0)}async function Y(){p(m,await Yi(),!0)}It(()=>{R(),Y()});async function ae(P,C){await Mi(P.id,C),R()}async function O(P){confirm("Are you sure you want to delete this document?")&&(await Oi(P),R())}function Z(){R()}function ne(P){p(x,P,!0)}function W(){p(x,null)}function G(P){p(S,P,!0),p(k,null)}function M(P,C){p(S,P,!0),p(k,C,!0)}function U(){p(S,null),p(k,null),R()}async function ce(P,C){const te=C==="pending"?"done":"pending";try{await un(P,{status:te}),R(),window.dispatchEvent(new CustomEvent("journal-entries-updated"))}catch(_e){console.error("Failed to update note status",_e)}}function le(P){p(b,P,!0)}function fe(){p(b,null)}function we(P){if(!P)return null;const C={planned:0,pending:0,done:0};return P.forEach(te=>{C[te.status]!==void 0&&C[te.status]++}),C}function I(P){if(!P)return null;const C={info:0,warning:0,error:0};return P.forEach(te=>{C[te.type]!==void 0&&C[te.type]++}),C}function L(){p(A,!0)}function Q(){p(A,!1)}function F(P){p(s,P.filterType,!0),p(l,P.filterStatus,!0),p(i,P.filterTag,!0),p(v,P.filterAssignee,!0),p(u,P.filterMaterial||"",!0),p(d,P.filterTaskTypes||[],!0),p(f,P.startDate,!0),p(y,P.endDate,!0),p(h,P.dateField,!0),p(_,P.sortBy,!0),p(T,P.sortOrder,!0),R()}function E(P){p(z,n(z)===P?null:P,!0)}function V(){p(z,null)}var re={refresh:R},K=pu(),ye=o(K),N=o(ye),X=o(N),J=c(o(X),2);J.__input=Z;var ee=c(X,2);ee.__click=L;var D=c(o(ee),2);{var ue=P=>{var C=Vc();g(P,C)};$(D,P=>{(n(s)||n(l)||n(i)||n(v)||n(f)||n(y)||n(d)&&n(d).length>0)&&P(ue)})}var se=c(ye,2),de=o(se);$e(de,17,()=>n(a),P=>P.id,(P,C)=>{const te=We(()=>we(n(C).tasks)),_e=We(()=>I(n(C).journal_entries));var De=du(),Me=o(De),me=o(Me),ge=o(me),Oe=o(ge),Fe=c(ge,2),Ae=o(Fe),Pe=c(me,2);Pe.__change=Ke=>ae(n(C),Ke.target.value);var nt=o(Pe);nt.value=nt.__value="in_progress";var et=c(nt);et.value=et.__value="done";var Xe;nn(Pe);var Ge=c(Me,2);{var lt=Ke=>{var yt=Wc(),Dt=o(yt);H(()=>q(Dt,n(C).description)),g(Ke,yt)};$(Ge,Ke=>{n(C).description&&Ke(lt)})}var bt=c(Ge,2);{var it=Ke=>{var yt=lu(),Dt=o(yt);{var sa=ot=>{var ht=Be(),Pt=Se(ht);$e(Pt,17,()=>n(C).tags,Ye,(na,Yt)=>{var Ht=Zc(),Lt=o(Ht);H(()=>q(Lt,`#${n(Yt).name??""}`)),g(na,Ht)}),g(ot,ht)};$(Dt,ot=>{n(C).tags&&n(C).tags.length>0&&ot(sa)})}var Ve=c(Dt,2);{var Ia=ot=>{var ht=Jc();ht.__click=()=>le(n(C).attachments);var Pt=o(ht);H(()=>q(Pt,`üì∑ ${n(C).attachments.length??""}`)),g(ot,ht)};$(Ve,ot=>{n(C).attachments&&n(C).attachments.length>0&&ot(Ia)})}var La=c(Ve,2);{var Oa=ot=>{var ht=tu(),Pt=Se(ht);{var na=Ue=>{var tt=Qc(),_t=o(tt);H(()=>q(_t,`üìÖ ${n(te).planned??""}`)),g(Ue,tt)};$(Pt,Ue=>{n(te).planned>0&&Ue(na)})}var Yt=c(Pt,2);{var Ht=Ue=>{var tt=Kc(),_t=o(tt);H(()=>q(_t,`‚è≥ ${n(te).pending??""}`)),g(Ue,tt)};$(Yt,Ue=>{n(te).pending>0&&Ue(Ht)})}var Lt=c(Yt,2);{var Na=Ue=>{var tt=eu(),_t=o(tt);H(()=>q(_t,`‚úÖ ${n(te).done??""}`)),g(Ue,tt)};$(Lt,Ue=>{n(te).done>0&&Ue(Na)})}g(ot,ht)};$(La,ot=>{n(te)&&ot(Oa)})}var Es=c(La,2);{var ls=ot=>{var ht=ru(),Pt=Se(ht);{var na=Ue=>{var tt=au(),_t=o(tt);H(()=>q(_t,`‚ÑπÔ∏è ${n(_e).info??""}`)),g(Ue,tt)};$(Pt,Ue=>{n(_e).info>0&&Ue(na)})}var Yt=c(Pt,2);{var Ht=Ue=>{var tt=su(),_t=o(tt);H(()=>q(_t,`‚ö†Ô∏è ${n(_e).warning??""}`)),g(Ue,tt)};$(Yt,Ue=>{n(_e).warning>0&&Ue(Ht)})}var Lt=c(Yt,2);{var Na=Ue=>{var tt=nu(),_t=o(tt);H(()=>q(_t,`‚ùå ${n(_e).error??""}`)),g(Ue,tt)};$(Lt,Ue=>{n(_e).error>0&&Ue(Na)})}g(ot,ht)};$(Es,ot=>{n(_e)&&ot(ls)})}g(Ke,yt)};$(bt,Ke=>{(n(C).tags&&n(C).tags.length>0||n(C).attachments&&n(C).attachments.length>0||n(te)||n(_e))&&Ke(it)})}var B=c(bt,2),be=o(B),Ne=c(o(be),2),rt=o(Ne),dt=c(be,2),ft=c(o(dt),2),da=o(ft),fa=c(dt,2);{var Ut=Ke=>{var yt=iu(),Dt=c(o(yt),2),sa=o(Dt);H(()=>q(sa,n(C).done_date)),g(Ke,yt)};$(fa,Ke=>{n(C).done_date&&Ke(Ut)})}var qa=c(B,2);Dc(qa,{get document(){return n(C)},refresh:R,get filterAssignee(){return n(v)}});var Ta=c(qa,2);{var Jr=Ke=>{var yt=uu(),Dt=c(o(yt),2);$e(Dt,21,()=>n(C).journal_entries,Ye,(sa,Ve)=>{var Ia=cu(),La=o(Ia),Oa=o(La),Es=o(Oa),ls=c(Oa,2),ot=o(ls),ht=c(ls,2),Pt=o(ht),na=c(ht,2);{var Yt=_t=>{var is=ou();is.__click=()=>le(n(Ve).attachments);var al=o(is);H(()=>{Ze(is,"title",`View attachments (${n(Ve).attachments.length??""})`),q(al,`üìé ${n(Ve).attachments.length??""}`)}),g(_t,is)};$(na,_t=>{n(Ve).attachments&&n(Ve).attachments.length>0&&_t(Yt)})}var Ht=c(na,2);Ht.__click=()=>M(n(C),n(Ve));var Lt=c(Ht,2);Lt.__click=()=>ce(n(Ve).id,n(Ve).status);var Na=o(Lt),Ue=c(La,2),tt=o(Ue);H(()=>{Ie(Ia,1,`note-item ${n(Ve).type??""}`,"svelte-s90sg6"),Ie(Oa,1,`note-badge ${n(Ve).type??""}`,"svelte-s90sg6"),q(Es,n(Ve).type),q(ot,n(Ve).author||"Unknown"),q(Pt,n(Ve).created_at),Ie(Lt,1,`note-status-btn ${n(Ve).status??""}`,"svelte-s90sg6"),Ze(Lt,"title",n(Ve).status==="pending"?"Click to mark as done":"Click to mark as pending"),q(Na,n(Ve).status),q(tt,n(Ve).text)}),g(sa,Ia)}),g(Ke,yt)};$(Ta,Ke=>{n(C).journal_entries&&n(C).journal_entries.length>0&&Ke(Jr)})}var Qr=c(Ta,2),yn=o(Qr);yn.__click=()=>ne(n(C));var Kr=c(yn,2),kn=o(Kr);kn.__click=()=>E(n(C).id);var el=c(kn,2);{var tl=Ke=>{var yt=vu(),Dt=o(yt);Dt.__click=()=>{G(n(C)),V()};var sa=c(Dt,2);sa.__click=()=>{e.onEdit(n(C)),V()};var Ve=c(sa,2);Ve.__click=()=>{O(n(C).id),V()},g(Ke,yt)};$(el,Ke=>{n(z)===n(C).id&&Ke(tl)})}H(()=>{q(Oe,n(C).name),q(Ae,n(C).type),Ie(Pe,1,`status-select ${n(C).status??""}`,"svelte-s90sg6"),Xe!==(Xe=n(C).status)&&(Pe.value=(Pe.__value=n(C).status)??"",qs(Pe,n(C).status)),q(rt,n(C).author||"-"),q(da,n(C).registration_date)}),g(P,De)});var ie=c(de,2);{var he=P=>{var C=fu();g(P,C)};$(ie,P=>{n(a).length===0&&P(he)})}var ve=c(se,2);{let P=We(()=>!!n(x));Gs(ve,{get isOpen(){return n(P)},close:W,maxWidth:"800px",children:(C,te)=>{fc(C,{get document(){return n(x)}})},$$slots:{default:!0}})}var oe=c(ve,2);{let P=We(()=>!!n(S)),C=We(()=>n(S)?.id),te=We(()=>n(S)?.name);Wr(oe,{get isOpen(){return n(P)},close:U,get documentId(){return n(C)},get documentName(){return n(te)},get entry(){return n(k)}})}var pe=c(oe,2);{let P=We(()=>!!n(b)),C=We(()=>n(b)||[]);Zr(pe,{get isOpen(){return n(P)},close:fe,get attachments(){return n(C)}})}var xe=c(pe,2);{let P=We(()=>({filterType:n(s),filterStatus:n(l),filterTag:n(i),filterAssignee:n(v),filterMaterial:n(u),filterTaskTypes:n(d),startDate:n(f),endDate:n(y),dateField:n(h),sortBy:n(_),sortOrder:n(T)}));Bc(xe,{get isOpen(){return n(A)},close:Q,get filters(){return n(P)},onApply:F})}return Te(J,()=>n(r),P=>p(r,P)),g(t,K),Qe(re)}st(["input","click","change"]);var _u=w('<span class="att-badge svelte-v5qqzx"> </span>'),gu=w('<div class="attachments-preview svelte-v5qqzx"></div>'),mu=w('<div class="entry-form svelte-v5qqzx"><input type="text" placeholder="Author" class="author-input svelte-v5qqzx"/> <select class="svelte-v5qqzx"><option>Info</option><option>Warning</option><option>Error</option></select> <textarea placeholder="Message..." class="svelte-v5qqzx"></textarea> <div class="file-input-group svelte-v5qqzx"><input type="file" multiple class="svelte-v5qqzx"/> <!></div> <button>Save</button></div>'),bu=w("<p>Loading...</p>"),yu=w('<p class="empty">No entries found.</p>'),ku=w('<span class="doc-ref svelte-v5qqzx"> </span>'),wu=w('<a target="_blank" class="svelte-v5qqzx"><img class="svelte-v5qqzx"/></a>'),xu=w('<a target="_blank" class="svelte-v5qqzx"> </a>'),Su=w('<div class="attachment-thumb svelte-v5qqzx"><!></div>'),qu=w('<div class="entry-attachments svelte-v5qqzx"></div>'),Tu=w('<div><div class="entry-header svelte-v5qqzx"><span> </span> <span class="author svelte-v5qqzx"> </span> <span class="date"> </span> <!> <div class="actions svelte-v5qqzx"><button class="edit-btn svelte-v5qqzx">‚úèÔ∏è Edit</button> <button class="status-btn svelte-v5qqzx"> </button> <button class="delete-btn svelte-v5qqzx">üóë</button></div></div> <p class="text svelte-v5qqzx"> </p> <!></div>'),ju=w('<div class="journal-container svelte-v5qqzx"><div class="toolbar svelte-v5qqzx"><div class="filters svelte-v5qqzx"><select class="svelte-v5qqzx"><option>All Types</option><option>Info</option><option>Warning</option><option>Error</option></select> <select class="svelte-v5qqzx"><option>All Statuses</option><option>Pending</option><option>Done</option></select></div> <button class="add-btn svelte-v5qqzx"> </button></div> <!> <div class="entries-list svelte-v5qqzx"><!></div> <!></div>');function Eu(t,e){Je(e,!0);let a=j(ke([])),r=j(!1),s=j(null),l=j(""),i=j(""),v=j(!1),u=j(""),d=j("info"),f=j(""),y=j(ke([]));async function h(){p(r,!0);try{p(a,await Ni(n(l),n(i)),!0)}catch(E){console.error(E)}finally{p(r,!1)}}It(()=>{p(f,localStorage.getItem("journal_author")||"",!0),h();const E=()=>{h()};return window.addEventListener("journal-entries-updated",E),()=>{window.removeEventListener("journal-entries-updated",E)}});async function m(E){const V=Array.from(E.target.files);if(V.length!==0){for(const re of V)try{const K=await on(re);n(y).push(K)}catch(K){console.error("Upload failed",K),alert("Upload failed for "+re.name)}E.target.value=""}}async function x(){if(!(!n(u)&&n(y).length===0)){n(f)&&localStorage.setItem("journal_author",n(f));try{await Ir({text:n(u),type:n(d),status:"pending",author:n(f),attachments:n(y)}),p(u,""),p(y,[],!0),p(v,!1),h()}catch(E){console.error("Failed to add entry",E)}}}async function S(E){const V=E.status==="pending"?"done":"pending";try{await un(E.id,{status:V}),h()}catch(re){console.error(re)}}async function k(E){if(confirm("Are you sure?"))try{await Fi(E),h()}catch(V){console.error(V)}}function b(E){p(s,E,!0)}function A(){p(s,null),h()}Nt(()=>{h()});var _=ju(),T=o(_),z=o(T),R=o(z);R.__change=h;var Y=o(R);Y.value=Y.__value="";var ae=c(Y);ae.value=ae.__value="info";var O=c(ae);O.value=O.__value="warning";var Z=c(O);Z.value=Z.__value="error";var ne=c(R,2);ne.__change=h;var W=o(ne);W.value=W.__value="";var G=c(W);G.value=G.__value="pending";var M=c(G);M.value=M.__value="done";var U=c(z,2);U.__click=()=>p(v,!n(v));var ce=o(U),le=c(T,2);{var fe=E=>{var V=mu(),re=o(V),K=c(re,2),ye=o(K);ye.value=ye.__value="info";var N=c(ye);N.value=N.__value="warning";var X=c(N);X.value=X.__value="error";var J=c(K,2),ee=c(J,2),D=o(ee);D.__change=m;var ue=c(D,2);{var se=ie=>{var he=gu();$e(he,21,()=>n(y),Ye,(ve,oe)=>{var pe=_u(),xe=o(pe);H(()=>q(xe,n(oe).filename)),g(ve,pe)}),g(ie,he)};$(ue,ie=>{n(y).length>0&&ie(se)})}var de=c(ee,2);de.__click=x,Te(re,()=>n(f),ie=>p(f,ie)),pt(K,()=>n(d),ie=>p(d,ie)),Te(J,()=>n(u),ie=>p(u,ie)),g(E,V)};$(le,E=>{n(v)&&E(fe)})}var we=c(le,2),I=o(we);{var L=E=>{var V=bu();g(E,V)},Q=E=>{var V=Be(),re=Se(V);{var K=N=>{var X=yu();g(N,X)},ye=N=>{var X=Be(),J=Se(X);$e(J,17,()=>n(a),Ye,(ee,D)=>{var ue=Tu(),se=o(ue),de=o(se),ie=o(de),he=c(de,2),ve=o(he),oe=c(he,2),pe=o(oe),xe=c(oe,2);{var P=Ae=>{var Pe=ku(),nt=o(Pe);H(()=>q(nt,`Ref: Doc #${n(D).document_id??""}`)),g(Ae,Pe)};$(xe,Ae=>{n(D).document_id&&Ae(P)})}var C=c(xe,2),te=o(C);te.__click=()=>b(n(D));var _e=c(te,2);_e.__click=()=>S(n(D));var De=o(_e),Me=c(_e,2);Me.__click=()=>k(n(D).id);var me=c(se,2),ge=o(me),Oe=c(me,2);{var Fe=Ae=>{var Pe=qu();$e(Pe,21,()=>n(D).attachments,Ye,(nt,et)=>{var Xe=Su(),Ge=o(Xe);{var lt=it=>{var B=wu(),be=o(B);H(()=>{Ze(B,"href",n(et).file_path),Ze(be,"src",n(et).file_path),Ze(be,"alt",n(et).filename)}),g(it,B)},bt=it=>{var B=xu(),be=o(B);H(()=>{Ze(B,"href",n(et).file_path),q(be,`üìÑ ${n(et).filename??""}`)}),g(it,B)};$(Ge,it=>{n(et).media_type&&n(et).media_type.startsWith("image/")?it(lt):it(bt,!1)})}g(nt,Xe)}),g(Ae,Pe)};$(Oe,Ae=>{n(D).attachments&&n(D).attachments.length>0&&Ae(Fe)})}H(()=>{Ie(ue,1,`entry-card ${n(D).type??""} ${n(D).status??""}`,"svelte-v5qqzx"),Ie(de,1,`badge ${n(D).type??""}`,"svelte-v5qqzx"),q(ie,n(D).type),q(ve,n(D).author||"Unknown"),q(pe,n(D).created_at),q(De,n(D).status==="pending"?"‚òë Mark Done":"‚Ü© Reopen"),q(ge,n(D).text)}),g(ee,ue)}),g(N,X)};$(re,N=>{n(a).length===0?N(K):N(ye,!1)},!0)}g(E,V)};$(I,E=>{n(r)?E(L):E(Q,!1)})}var F=c(we,2);{let E=We(()=>!!n(s)),V=We(()=>n(s)?.document_id);Wr(F,{get isOpen(){return n(E)},close:A,get documentId(){return n(V)},documentName:"Journal Entry",get entry(){return n(s)}})}H(()=>q(ce,n(v)?"Cancel":"+ New Entry")),pt(R,()=>n(l),E=>p(l,E)),pt(ne,()=>n(i),E=>p(i,E)),g(t,_),Qe()}st(["change","click"]);var Au=w('<div class="loading-state svelte-g0byll">Loading tasks...</div>'),Cu=w('<div class="empty-state svelte-g0byll">Enter an assignee name above to view their tasks.</div>'),Du=w('<div class="empty-state svelte-g0byll">No pending or planned tasks found for this assignee.</div>'),Pu=w('<div><div class="task-info svelte-g0byll"><span> </span> <button class="btn-done svelte-g0byll" title="Mark as done">‚úì</button> <span class="task-name svelte-g0byll"> </span></div></div>'),Ru=w('<div class="material-group svelte-g0byll"><div class="material-header svelte-g0byll"><span class="material-name svelte-g0byll"> </span> <span class="task-count svelte-g0byll"> </span></div> <div class="tasks-list svelte-g0byll"></div></div>'),$u=w('<div class="doc-group svelte-g0byll"><div class="doc-header svelte-g0byll"><h3 class="svelte-g0byll"> </h3> <span> </span></div> <!></div>'),zu=w('<div class="documents-list svelte-g0byll"></div>'),Mu=w('<div class="job-view svelte-g0byll"><div class="assignee-filter svelte-g0byll"><label for="assignee" class="svelte-g0byll">Assignee:</label> <input id="assignee" type="text" placeholder="Enter assignee name..." class="svelte-g0byll"/> <button class="btn-load svelte-g0byll"> </button></div> <!></div>');function Iu(t,e){Je(e,!0);let a=j(ke([])),r=j(""),s=j(!1);It(()=>{p(r,localStorage.getItem("job_assignee")||"",!0),n(r)&&l()});async function l(){if(!n(r).trim()){p(a,[],!0);return}p(s,!0);try{const b=await cn();p(a,b.map(A=>({...A,tasks:(A.tasks||[]).filter(_=>_.assignee&&_.assignee.toLowerCase().includes(n(r).toLowerCase())&&(_.status==="pending"||_.status==="planned"))})).filter(A=>A.tasks.length>0),!0)}catch(b){console.error(b)}finally{p(s,!1)}}function i(){localStorage.setItem("job_assignee",n(r)),l()}async function v(b){try{await Bs(b,{status:"done"}),await l()}catch(A){console.error(A),alert("Failed to update task status")}}function u(b){const _=[...b.tasks||[]].sort((z,R)=>z.status==="pending"&&R.status!=="pending"?-1:z.status!=="pending"&&R.status==="pending"?1:0),T={};return _.forEach(z=>{const R=z.material?z.material.name:"(No Material)";T[R]||(T[R]=[]),T[R].push(z)}),T}var d=Mu(),f=o(d),y=c(o(f),2);y.__change=i;var h=c(y,2);h.__click=l;var m=o(h),x=c(f,2);{var S=b=>{var A=Au();g(b,A)},k=b=>{var A=Be(),_=Se(A);{var T=R=>{var Y=Cu();g(R,Y)},z=R=>{var Y=Be(),ae=Se(Y);{var O=ne=>{var W=Du();g(ne,W)},Z=ne=>{var W=zu();$e(W,21,()=>n(a),G=>G.id,(G,M)=>{const U=We(()=>u(n(M)));var ce=$u(),le=o(ce),fe=o(le),we=o(fe),I=c(fe,2),L=o(I),Q=c(le,2);$e(Q,17,()=>Object.entries(n(U)),Ye,(F,E)=>{var V=We(()=>Vs(n(E),2));let re=()=>n(V)[0],K=()=>n(V)[1];var ye=Ru(),N=o(ye),X=o(N),J=o(X),ee=c(X,2),D=o(ee),ue=c(N,2);$e(ue,21,K,se=>se.id,(se,de)=>{var ie=Pu(),he=o(ie),ve=o(he),oe=o(ve),pe=c(ve,2);pe.__click=()=>v(n(de).id);var xe=c(pe,2),P=o(xe);H(()=>{Ie(ie,1,`task-row ${n(de).status??""}`,"svelte-g0byll"),Ie(ve,1,`task-status-badge ${n(de).status??""}`,"svelte-g0byll"),q(oe,n(de).status),q(P,n(de).name)}),g(se,ie)}),H(()=>{q(J,`üì¶ ${re()??""}`),q(D,`${K().length??""} task${K().length!==1?"s":""}`)}),g(F,ye)}),H(()=>{q(we,n(M).name),Ie(I,1,`doc-badge ${n(M).type??""}`,"svelte-g0byll"),q(L,n(M).type)}),g(G,ce)}),g(ne,W)};$(ae,ne=>{n(a).length===0?ne(O):ne(Z,!1)},!0)}g(R,Y)};$(_,R=>{n(r).trim()?R(z,!1):R(T)},!0)}g(b,A)};$(x,b=>{n(s)?b(S):b(k,!1)})}H(b=>{h.disabled=b,q(m,n(s)?"Loading...":"Load")},[()=>n(s)||!n(r).trim()]),Te(y,()=>n(r),b=>p(r,b)),g(t,d),Qe()}st(["change","click"]);var Lu=w("<p>Loading parts...</p>"),Ou=w('<div class="empty-state svelte-xfu7xu"><p>No parts found in the library.</p> <p class="hint svelte-xfu7xu">Parts are automatically imported from the "Sidra" network folder.</p></div>'),Nu=w('<tr class="svelte-xfu7xu"><td class="font-mono svelte-xfu7xu"> </td><td class="svelte-xfu7xu"> </td><td class="svelte-xfu7xu"><span class="badge svelte-xfu7xu"> </span></td><td class="svelte-xfu7xu"> </td><td class="svelte-xfu7xu"> </td><td class="svelte-xfu7xu"><button class="action-btn svelte-xfu7xu">View</button></td></tr>'),Fu=w('<div class="table-container svelte-xfu7xu"><table class="svelte-xfu7xu"><thead><tr><th class="svelte-xfu7xu">Registration</th><th class="svelte-xfu7xu">Name</th><th class="svelte-xfu7xu">Ver</th><th class="svelte-xfu7xu">Dimensions</th><th class="svelte-xfu7xu">Material</th><th class="svelte-xfu7xu">Actions</th></tr></thead><tbody></tbody></table></div>'),Bu=w('<div class="view-container svelte-xfu7xu"><div class="header svelte-xfu7xu"><h2 class="svelte-xfu7xu">Parts Library</h2></div> <!></div>');function Gu(t,e){Je(e,!0);let a=j(ke([])),r=j(!0);async function s(){p(r,!0);try{p(a,await Wi(),!0)}catch(d){console.error(d)}finally{p(r,!1)}}It(s);var l=Bu(),i=c(o(l),2);{var v=d=>{var f=Lu();g(d,f)},u=d=>{var f=Be(),y=Se(f);{var h=x=>{var S=Ou();g(x,S)},m=x=>{var S=Fu(),k=o(S),b=c(o(k));$e(b,21,()=>n(a),Ye,(A,_)=>{var T=Nu(),z=o(T),R=o(z),Y=c(z),ae=o(Y),O=c(Y),Z=o(O),ne=o(Z),W=c(O),G=o(W),M=c(W),U=o(M);H((ce,le)=>{q(R,n(_).registration_number),q(ae,n(_).name),q(ne,n(_).version),q(G,`${ce??""} x ${le??""}`),q(U,n(_).material?n(_).material.name:"-")},[()=>n(_).width.toFixed(1),()=>n(_).height.toFixed(1)]),g(A,T)}),g(x,S)};$(y,x=>{n(a).length===0?x(h):x(m,!1)},!0)}g(d,f)};$(i,d=>{n(r)?d(v):d(u,!1)})}g(t,l),Qe()}var Uu=w('<div class="canvas-container svelte-1eph566"><div class="toolbar svelte-1eph566"><button title="Navigate (Pan)">‚úã</button> <button title="Select">‚Üñ</button></div>  <canvas class="svelte-1eph566"></canvas> <div class="zoom-controls svelte-1eph566"><button title="Reset Zoom" class="svelte-1eph566">‚ü≤</button> <span class="zoom-level svelte-1eph566"> </span></div></div>');function Yu(t,e){Je(e,!1);let a=Ct(e,"sheet",8,null),r=Ct(e,"width",8,800),s=Ct(e,"height",8,600);const l=Ai();let i=Ua(),v=null,u=1,d=Ua(1),f=0,y=0,h=Ua(!1),m=0,x=0,S=Ua("navigate"),k={minX:0,minY:0,maxX:100,maxY:100},b=0,A=0,_=null,T=null;It(()=>{n(i)&&(v=n(i).getContext("2d"),console.log("GncCanvas: mounted, ctx:",v),Y())});function z(N){let X=1/0,J=1/0,ee=-1/0,D=-1/0,ue=!1,se=0,de=0;console.log("calculateBounds: sheet.parts.length =",N.parts.length);for(const ie of N.parts){console.log("calculateBounds: part.contours.length =",ie.contours.length);for(const he of ie.contours){console.log("calculateBounds: contour.id =",he.id,"commands.length =",he.commands.length);for(const ve of he.commands)ve.x!==void 0&&(se=ve.x),ve.y!==void 0&&(de=ve.y),(ve.x!==void 0||ve.y!==void 0)&&(ue=!0,se<X&&(X=se),se>ee&&(ee=se),de<J&&(J=de),de>D&&(D=de),console.log("calculateBounds: found point",se,de,"from cmd.type =",ve.type))}}return console.log("calculateBounds: hasPoints =",ue,"bounds =",{minX:X,minY:J,maxX:ee,maxY:D}),ue?{minX:X,minY:J,maxX:ee,maxY:D}:{minX:0,minY:0,maxX:100,maxY:100}}function R(N,X){return{x:(N-b)/u+k.minX,y:(s()-X-A)/u+k.minY}}function Y(){if(!v||!a()){console.log("GncCanvas draw: skipping - ctx:",!!v,"sheet:",!!a());return}console.log("GncCanvas draw: starting draw with sheet:",a()),v.fillStyle="#1e1e1e",v.fillRect(0,0,r(),s()),k=z(a()),console.log("GncCanvas draw: bounds:",k);const N=k.maxX-k.minX,X=k.maxY-k.minY;if(N===0&&X===0){console.log("GncCanvas draw: no data (dataW and dataH are 0)");return}const J=20,ee=r()-J*2,D=s()-J*2,ue=ee/N,se=D/X;u=Math.min(ue,se)*.95*n(d);const ie=N*u,he=X*u;b=(r()-ie)/2+f,A=(s()-he)/2+y;const ve=pe=>b+(pe-k.minX)*u,oe=pe=>s()-(A+(pe-k.minY)*u);a().parts.forEach((pe,xe)=>{const P=xe*137%360;pe.contours.forEach(C=>{const te=_===C.id,_e=T===C.id;v.beginPath(),v.strokeStyle=te?"#ffffff":_e?"#fbbf24":`hsl(${P}, 70%, 60%)`,v.lineWidth=te||_e?3:1.5,v.shadowBlur=te?10:_e?5:0,v.shadowColor=te?"#ffffff":_e?"#fbbf24":"transparent";let De=null,Me=null,me=!1;C.commands.forEach(ge=>{const Oe=De,Fe=Me;if(ge.x!==void 0&&(De=ge.x),ge.y!==void 0&&(Me=ge.y),!(De===null||Me===null)){if(ge.type==="G00"||ge.command==="G"&&ge.value===0)v.moveTo(ve(De),oe(Me)),me=!0;else if(ge.type==="G01"||ge.command==="G"&&ge.value===1||ge.type==="MODAL"||ge.type==="G41"||ge.type==="G40")me?v.lineTo(ve(De),oe(Me)):(v.moveTo(ve(De),oe(Me)),me=!0);else if((ge.type==="G02"||ge.type==="G03"||ge.command==="G"&&(ge.value===2||ge.value===3))&&ge.i!==void 0&&ge.j!==void 0&&Oe!==null&&Fe!==null){const Ae=ge.i,Pe=ge.j,nt=Oe+Ae,et=Fe+Pe,Xe=Math.sqrt(Ae*Ae+Pe*Pe),Ge=ve(nt),lt=oe(et),bt=Xe*u,it=Math.atan2(oe(Fe)-lt,ve(Oe)-Ge),B=Math.atan2(oe(Me)-lt,ve(De)-Ge),be=ge.type==="G02"||ge.command==="G"&&ge.value===2;v.arc(Ge,lt,bt,it,B,be)}}}),v.stroke(),v.shadowBlur=0})})}function ae(N,X){if(!a())return null;const J=n(i).getBoundingClientRect(),ee=N-J.left,D=X-J.top,ue=R(ee,D),se=ue.x,de=ue.y,ie=5/u;let he=null,ve=null,oe=1/0;for(const pe of a().parts)for(const xe of pe.contours){let P=null,C=null,te=1/0;for(const _e of xe.commands){const De=_e.x!==void 0?_e.x:P,Me=_e.y!==void 0?_e.y:C;let me=1/0;if(P!==null&&C!==null&&De!==null&&Me!==null){if(_e.type==="G01"||_e.command==="G"&&_e.value===1||_e.type==="MODAL"||_e.type==="G41"||_e.type==="G40")me=Z(se,de,P,C,De,Me);else if(_e.type==="G02"||_e.type==="G03"||_e.command==="G"&&(_e.value===2||_e.value===3)){const ge=_e.i||0,Oe=_e.j||0,Fe=P+ge,Ae=C+Oe,Pe=Math.sqrt(ge*ge+Oe*Oe),nt=Math.sqrt((se-Fe)**2+(de-Ae)**2);me=Math.abs(nt-Pe);const et=Math.atan2(C-Ae,P-Fe),Xe=Math.atan2(Me-Ae,De-Fe),Ge=Math.atan2(de-Ae,se-Fe),lt=_e.type==="G02"||_e.command==="G"&&_e.value===2;ce(Ge,et,Xe,lt)||(me=1/0)}}me<te&&(te=me),P=De,C=Me}te<ie&&te<oe&&(oe=te,he=xe,ve=pe)}return he?{contour:he,part:ve}:null}function O(N){const X=ae(N.clientX,N.clientY);X?(_=X.contour.id,l("select",X)):(_=null,l("select",null)),Y()}function Z(N,X,J,ee,D,ue){const se=N-J,de=X-ee,ie=D-J,he=ue-ee,ve=se*ie+de*he,oe=ie*ie+he*he;let pe=-1;oe!=0&&(pe=ve/oe);let xe,P;pe<0?(xe=J,P=ee):pe>1?(xe=D,P=ue):(xe=J+pe*ie,P=ee+pe*he);const C=N-xe,te=X-P;return Math.sqrt(C*C+te*te)}function ne(N){N.preventDefault();const X=n(i).getBoundingClientRect(),J=N.clientX-X.left,ee=N.clientY-X.top,D=R(J,ee),ue=N.deltaY>0?.9:1.1,se=Math.max(.1,Math.min(10,n(d)*ue));if(u===0||n(d)===0)return;const ie=u/n(d)*se,he=k.maxX-k.minX,ve=k.maxY-k.minY,oe=he*ie,pe=ve*ie,xe=J-(D.x-k.minX)*ie,P=s()-ee-(D.y-k.minY)*ie;f=xe-(r()-oe)/2,y=P-(s()-pe)/2,p(d,se),Y()}function W(N){m=N.clientX,x=N.clientY,n(S)==="navigate"&&p(h,!0)}function G(N){if(n(S)==="navigate"&&n(h)){const X=N.clientX-m,J=N.clientY-x;f+=X,y-=J,m=N.clientX,x=N.clientY,Y()}else if(n(S)==="select"){const X=ae(N.clientX,N.clientY),J=X?X.contour.id:null;J!==T&&(T=J,Y())}}function M(){T!==null&&(T=null,Y()),n(h)&&p(h,!1)}function U(N){const X=Math.abs(N.clientX-m),J=Math.abs(N.clientY-x),ee=X<5&&J<5;n(S)==="navigate"?p(h,!1):n(S)==="select"&&ee&&O(N)}function ce(N,X,J,ee){const D=Math.PI*2,ue=(N%D+D)%D,se=(X%D+D)%D,de=(J%D+D)%D;if(ee){const ie=(se-de+D)%D;return(se-ue+D)%D<=ie}else{const ie=(de-se+D)%D;return(ue-se+D)%D<=ie}}function le(){p(d,1),f=0,y=0,Y()}si(()=>(Pr(a()),n(i)),()=>{a()&&n(i)&&(console.log("GncCanvas: sheet changed, redrawing...",a()),Y())}),ni(),Mr();var fe=Uu(),we=o(fe),I=o(we);I.__click=()=>p(S,"navigate");let L;var Q=c(I,2);Q.__click=()=>p(S,"select");let F;var E=c(we,2);E.__mousedown=W,E.__mousemove=G,E.__mouseup=U,ln(E,N=>p(i,N),()=>n(i));var V=c(E,2),re=o(V);re.__click=le;var K=c(re,2),ye=o(K);H(N=>{Fs(fe,`width: ${r()??""}px; height: ${s()??""}px;`),L=Ie(I,1,"svelte-1eph566",null,L,{active:n(S)==="navigate"}),F=Ie(Q,1,"svelte-1eph566",null,F,{active:n(S)==="select"}),Ze(E,"width",r()),Ze(E,"height",s()),Fs(E,`cursor: ${n(S)==="navigate"?n(h)?"grabbing":"grab":"default"}`),q(ye,`${N??""}%`)},[()=>(n(d),va(()=>Math.round(n(d)*100)))]),ka("wheel",E,ne),ka("mouseleave",E,M),g(t,fe),Qe()}st(["click","mousedown","mousemove","mouseup"]);var Hu=w('<span class="filename svelte-57krl6"> </span>'),Xu=w('<div class="loading svelte-57krl6">Parsing GNC file...</div>'),Vu=w('<div class="placeholder svelte-57krl6"><p>No file loaded.</p> <p class="hint svelte-57krl6">Upload a .GNC file to visualize and edit.</p></div>'),Wu=w('<p class="hint-text svelte-57krl6">Load a GNC file to view properties.</p>'),Zu=w('<h3 class="svelte-57krl6">Sheet Properties</h3> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Program Size (mm):</span> <div class="inline-inputs svelte-57krl6"><input type="number" step="0.1" class="svelte-57krl6"/> <span class="svelte-57krl6">√ó</span> <input type="number" step="0.1" class="svelte-57krl6"/></div></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Thickness (mm):</span> <input type="number" step="0.1"/></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Cut Count:</span> <input type="number" min="1"/></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Material:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Total Parts:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Total Contours:</span> <span class="value svelte-57krl6"> </span></div>',1),Ju=w("<option> </option>"),Qu=w('<div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Part Name:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Contours:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Corner Count:</span> <span class="value svelte-57krl6"> </span></div>',1),Ku=w('<h3 class="svelte-57krl6">Part Properties</h3> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Select Part:</span> <select></select></div> <!>',1),ev=w('<div class="prop-field svelte-57krl6"><label class="svelte-57krl6"> </label> <input type="text" class="svelte-57krl6"/></div>'),tv=w('<p class="empty-props">No technological parameters found.</p>'),av=w('<div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Contour ID:</span> <span class="value svelte-57krl6"> </span></div> <div class="prop-group svelte-57krl6"><span class="label svelte-57krl6">Corners:</span> <span class="value svelte-57krl6"> </span></div> <h4 class="section-title svelte-57krl6">Technology Parameters</h4> <div class="p-codes-list"><!></div>',1),sv=w(`<p class="hint-text svelte-57krl6">Select a contour on the canvas to view and edit its
                        properties.</p>`),nv=w('<h3 class="svelte-57krl6">Contour Properties</h3> <!>',1),rv=w('<div class="view-container svelte-57krl6"><div class="header svelte-57krl6"><h2 class="svelte-57krl6">GNC Editor</h2> <div class="actions svelte-57krl6"><input type="file" id="gnc-upload" accept=".gnc,.nc" class="file-input svelte-57krl6"/> <label for="gnc-upload" class="upload-btn svelte-57krl6">Open File</label> <!> <button class="save-btn svelte-57krl6">Save Changes</button></div></div> <div class="workspace svelte-57krl6"><div class="canvas-area svelte-57krl6"><!></div> <div class="properties-panel svelte-57krl6"><div class="mode-selector svelte-57krl6"><button>Sheet</button> <button>Part</button> <button>Contour</button></div> <!></div></div></div>');function lv(t,e){Je(e,!0);let a=j(null),r=j(null),s=j(""),l=j(!1),i=j("sheet"),v=j(null);async function u(L){const Q=L.target.files[0];if(Q){p(s,Q.name,!0),p(l,!0),p(a,null),p(r,null);try{p(a,await to(Q),!0),console.log("Parsed GNC sheet:",n(a)),console.log("Parts:",n(a)?.parts),console.log("Total parts:",n(a)?.total_parts),n(a)?.parts?.length>0&&p(v,n(a).parts[0].id,!0)}catch(F){alert("Error parsing GNC file"),console.error(F)}finally{p(l,!1)}}}function d(L){const Q=L.detail;if(!Q){p(r,null);return}Q.contour?(p(r,Q.contour,!0),Q.part?(p(v,Q.part.id,!0),n(i)==="sheet"&&p(i,"contour")):p(i,"contour")):(p(r,Q,!0),p(i,"contour"))}async function f(){if(!(!n(a)||!n(s)))try{const L=await ao(n(a),n(s),!0);alert(`Saved successfully to ${L.path}`)}catch{alert("Failed to save file")}}function y(L,Q){n(r)&&n(r).metadata&&(n(r).metadata[L]=Q)}function h(L,Q){n(a)&&(n(a)[L]=Q)}let m=We(()=>n(a)?.parts?.find(L=>L.id===n(v)));var x=rv(),S=o(x),k=c(o(S),2),b=o(k);b.__change=u;var A=c(b,4);{var _=L=>{var Q=Hu(),F=o(Q);H(()=>q(F,n(s))),g(L,Q)};$(A,L=>{n(s)&&L(_)})}var T=c(A,2);T.__click=f;var z=c(S,2),R=o(z),Y=o(R);{var ae=L=>{var Q=Xu();g(L,Q)},O=L=>{var Q=Be(),F=Se(Q);{var E=re=>{Yu(re,{get sheet(){return n(a)},width:800,height:600,$$events:{select:d}})},V=re=>{var K=Vu();g(re,K)};$(F,re=>{n(a)?re(E):re(V,!1)},!0)}g(L,Q)};$(Y,L=>{n(l)?L(ae):L(O,!1)})}var Z=c(R,2),ne=o(Z),W=o(ne);W.__click=()=>p(i,"sheet");let G;var M=c(W,2);M.__click=()=>p(i,"part");let U;var ce=c(M,2);ce.__click=()=>p(i,"contour");let le;var fe=c(ne,2);{var we=L=>{var Q=Wu();g(L,Q)},I=L=>{var Q=Be(),F=Se(Q);{var E=re=>{var K=Zu(),ye=c(Se(K),2),N=c(o(ye),2),X=o(N);X.__input=te=>h("program_width",parseFloat(te.target.value));var J=c(X,4);J.__input=te=>h("program_height",parseFloat(te.target.value));var ee=c(ye,2),D=c(o(ee),2);D.__input=te=>h("thickness",parseFloat(te.target.value));var ue=c(ee,2),se=c(o(ue),2);se.__input=te=>h("cut_count",parseInt(te.target.value));var de=c(ue,2),ie=c(o(de),2),he=o(ie),ve=c(de,2),oe=c(o(ve),2),pe=o(oe),xe=c(ve,2),P=c(o(xe),2),C=o(P);H(()=>{Fa(X,n(a).program_width||0),Fa(J,n(a).program_height||0),Fa(D,n(a).thickness||0),Fa(se,n(a).cut_count||1),q(he,n(a).material||"N/A"),q(pe,n(a).total_parts),q(C,n(a).total_contours)}),g(re,K)},V=re=>{var K=Be(),ye=Se(K);{var N=J=>{var ee=Ku(),D=c(Se(ee),2),ue=c(o(D),2);$e(ue,21,()=>n(a).parts,Ye,(ie,he)=>{var ve=Ju(),oe=o(ve),pe={};H(()=>{q(oe,n(he).name||`Part ${n(he).id}`),pe!==(pe=n(he).id)&&(ve.value=(ve.__value=n(he).id)??"")}),g(ie,ve)});var se=c(D,2);{var de=ie=>{var he=Qu(),ve=Se(he),oe=c(o(ve),2),pe=o(oe),xe=c(ve,2),P=c(o(xe),2),C=o(P),te=c(xe,2),_e=c(o(te),2),De=o(_e);H(()=>{q(pe,n(m).name||"N/A"),q(C,n(m).contours.length),q(De,n(m).corner_count)}),g(ie,he)};$(se,ie=>{n(m)&&ie(de)})}pt(ue,()=>n(v),ie=>p(v,ie)),g(J,ee)},X=J=>{var ee=Be(),D=Se(ee);{var ue=se=>{var de=nv(),ie=c(Se(de),2);{var he=oe=>{var pe=av(),xe=Se(pe),P=c(o(xe),2),C=o(P),te=c(xe,2),_e=c(o(te),2),De=o(_e),Me=c(te,4),me=o(Me);{var ge=Fe=>{var Ae=Be(),Pe=Se(Ae);$e(Pe,17,()=>Object.entries(n(r).metadata),Ye,(nt,et)=>{var Xe=We(()=>Vs(n(et),2));let Ge=()=>n(Xe)[0],lt=()=>n(Xe)[1];var bt=Be(),it=Se(bt);{var B=be=>{var Ne=ev(),rt=o(Ne),dt=o(rt),ft=c(rt,2);ft.__input=da=>y(Ge(),da.target.value),H(()=>{Ze(rt,"for",Ge()),q(dt,Ge()),Ze(ft,"id",Ge()),Fa(ft,lt())}),g(be,Ne)};$(it,be=>{Ge().startsWith("P")&&be(B)})}g(nt,bt)}),g(Fe,Ae)},Oe=Fe=>{var Ae=tv();g(Fe,Ae)};$(me,Fe=>{n(r).metadata?Fe(ge):Fe(Oe,!1)})}H(()=>{q(C,`#${n(r).id??""}`),q(De,n(r).corner_count)}),g(oe,pe)},ve=oe=>{var pe=sv();g(oe,pe)};$(ie,oe=>{n(r)?oe(he):oe(ve,!1)})}g(se,de)};$(D,se=>{n(i)==="contour"&&se(ue)},!0)}g(J,ee)};$(ye,J=>{n(i)==="part"?J(N):J(X,!1)},!0)}g(re,K)};$(F,re=>{n(i)==="sheet"?re(E):re(V,!1)},!0)}g(L,Q)};$(fe,L=>{n(a)?L(I,!1):L(we)})}H(()=>{T.disabled=!n(a),G=Ie(W,1,"svelte-57krl6",null,G,{active:n(i)==="sheet"}),U=Ie(M,1,"svelte-57krl6",null,U,{active:n(i)==="part"}),le=Ie(ce,1,"svelte-57krl6",null,le,{active:n(i)==="contour"})}),g(t,x),Qe()}st(["change","click","input"]);var iv=w("<option> </option>"),ov=w('<div class="form-panel svelte-gim6qq"><h3>New Stock Item</h3> <div class="form-grid svelte-gim6qq"><div class="field svelte-gim6qq"><label class="svelte-gim6qq">Material</label> <select class="svelte-gim6qq"><option>Select Material...</option><!></select></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Width (mm)</label> <input type="number" min="0" class="svelte-gim6qq"/></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Height (mm)</label> <input type="number" min="0" class="svelte-gim6qq"/></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Quantity</label> <input type="number" min="0" class="svelte-gim6qq"/></div> <div class="field svelte-gim6qq"><label class="svelte-gim6qq">Location</label> <input type="text" placeholder="e.g. A-01" class="svelte-gim6qq"/></div> <div class="actions"><button class="save-btn svelte-gim6qq">Save Item</button></div></div></div>'),cv=w('<p class="loading svelte-gim6qq">Loading stock...</p>'),uv=w('<div class="empty-state svelte-gim6qq"><p>No stock items found.</p></div>'),vv=w('<tr><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"> </td><td class="svelte-gim6qq"><button class="delete-btn svelte-gim6qq">Delete</button></td></tr>'),dv=w('<div class="table-container svelte-gim6qq"><table class="svelte-gim6qq"><thead><tr><th class="svelte-gim6qq">Material</th><th class="svelte-gim6qq">Dimensions</th><th class="svelte-gim6qq">Qty</th><th class="svelte-gim6qq">Reserved</th><th class="svelte-gim6qq">Location</th><th class="svelte-gim6qq">Actions</th></tr></thead><tbody></tbody></table></div>'),fv=w('<div class="view-container svelte-gim6qq"><div class="header svelte-gim6qq"><h2 class="svelte-gim6qq">Stock Management</h2> <button class="primary-btn svelte-gim6qq"> </button></div> <!> <!></div>');function pv(t,e){Je(e,!0);let a=j(ke([])),r=j(ke([])),s=j(!0),l=j(!1),i=j(ke({material_id:"",width:0,height:0,quantity:0,location:""}));async function v(){p(s,!0);try{const[_,T]=await Promise.all([Zi(),ns()]);p(a,_,!0),p(r,T,!0)}catch(_){console.error(_)}finally{p(s,!1)}}async function u(){if(n(i).material_id)try{const _=await Ji(n(i));p(a,[...n(a),_],!0),p(l,!1),p(i,{material_id:"",width:0,height:0,quantity:0,location:""},!0)}catch(_){alert("Failed to add stock item"),console.error(_)}}async function d(_){if(confirm("Are you sure you want to delete this item?"))try{await Qi(_),p(a,n(a).filter(T=>T.id!==_),!0)}catch{alert("Failed to delete item")}}It(v);var f=fv(),y=o(f),h=c(o(y),2);h.__click=()=>p(l,!n(l));var m=o(h),x=c(y,2);{var S=_=>{var T=ov(),z=c(o(T),2),R=o(z),Y=c(o(R),2),ae=o(Y);ae.value=ae.__value="";var O=c(ae);$e(O,17,()=>n(r),Ye,(I,L)=>{var Q=iv(),F=o(Q),E={};H(()=>{q(F,n(L).name),E!==(E=n(L).id)&&(Q.value=(Q.__value=n(L).id)??"")}),g(I,Q)});var Z=c(R,2),ne=c(o(Z),2),W=c(Z,2),G=c(o(W),2),M=c(W,2),U=c(o(M),2),ce=c(M,2),le=c(o(ce),2),fe=c(ce,2),we=o(fe);we.__click=u,pt(Y,()=>n(i).material_id,I=>n(i).material_id=I),Te(ne,()=>n(i).width,I=>n(i).width=I),Te(G,()=>n(i).height,I=>n(i).height=I),Te(U,()=>n(i).quantity,I=>n(i).quantity=I),Te(le,()=>n(i).location,I=>n(i).location=I),g(_,T)};$(x,_=>{n(l)&&_(S)})}var k=c(x,2);{var b=_=>{var T=cv();g(_,T)},A=_=>{var T=Be(),z=Se(T);{var R=ae=>{var O=uv();g(ae,O)},Y=ae=>{var O=dv(),Z=o(O),ne=c(o(Z));$e(ne,21,()=>n(a),Ye,(W,G)=>{var M=vv(),U=o(M),ce=o(U),le=c(U),fe=o(le),we=c(le),I=o(we),L=c(we),Q=o(L),F=c(L),E=o(F),V=c(F),re=o(V);re.__click=()=>d(n(G).id),H(()=>{q(ce,n(G).material?n(G).material.name:"Unknown"),q(fe,`${n(G).width??""} x ${n(G).height??""}`),q(I,n(G).quantity),q(Q,n(G).reserved),q(E,n(G).location||"-")}),g(W,M)}),g(ae,O)};$(z,ae=>{n(a).length===0?ae(R):ae(Y,!1)},!0)}g(_,T)};$(k,_=>{n(s)?_(b):_(A,!1)})}H(()=>q(m,n(l)?"Cancel":"Add Stock")),g(t,f),Qe()}st(["click"]);var hv=w('<p class="loading svelte-18qgo6s">Loading logs...</p>'),_v=w('<div class="empty-state svelte-18qgo6s">No logs yet. Start the conversation!</div>'),gv=w('<div class="log-card svelte-18qgo6s"><div class="log-header svelte-18qgo6s"><span class="author svelte-18qgo6s"> </span> <span class="time svelte-18qgo6s"> </span></div> <div class="log-content svelte-18qgo6s"> </div></div>'),mv=w('<div class="logs-feed svelte-18qgo6s"></div>'),bv=w('<div class="view-container svelte-18qgo6s"><div class="header svelte-18qgo6s"><h2 class="svelte-18qgo6s">Shift Logs</h2></div> <div class="input-area svelte-18qgo6s"><div class="input-row svelte-18qgo6s"><input type="text" placeholder="Author Name" class="author-input svelte-18qgo6s"/> <button class="post-btn svelte-18qgo6s">Post Log</button></div> <textarea placeholder="What happened during this shift?" rows="3" class="svelte-18qgo6s"></textarea></div> <!></div>');function yv(t,e){Je(e,!0);let a=j(ke([])),r=j(!0),s=j(""),l=j(ke(localStorage.getItem("shift_author")||""));async function i(){p(r,!0);try{p(a,await Ki(),!0)}catch(b){console.error(b)}finally{p(r,!1)}}async function v(){if(!(!n(s).trim()||!n(l).trim())){localStorage.setItem("shift_author",n(l));try{const b=await eo({author:n(l),content:n(s),type:"info"});p(a,[b,...n(a)],!0),p(s,"")}catch{alert("Failed to add log")}}}It(i);var u=bv(),d=c(o(u),2),f=o(d),y=o(f),h=c(y,2);h.__click=v;var m=c(f,2),x=c(d,2);{var S=b=>{var A=hv();g(b,A)},k=b=>{var A=Be(),_=Se(A);{var T=R=>{var Y=_v();g(R,Y)},z=R=>{var Y=mv();$e(Y,21,()=>n(a),Ye,(ae,O)=>{var Z=gv(),ne=o(Z),W=o(ne),G=o(W),M=c(W,2),U=o(M),ce=c(ne,2),le=o(ce);H(fe=>{q(G,n(O).author),q(U,fe),q(le,n(O).content)},[()=>new Date(n(O).timestamp).toLocaleString()]),g(ae,Z)}),g(R,Y)};$(_,R=>{n(a).length===0?R(T):R(z,!1)},!0)}g(b,A)};$(x,b=>{n(r)?b(S):b(k,!1)})}H(b=>h.disabled=b,[()=>!n(s).trim()||!n(l).trim()]),Te(y,()=>n(l),b=>p(l,b)),Te(m,()=>n(s),b=>p(s,b)),g(t,u),Qe()}st(["click"]);var kv=w('<button type="button" class="btn-outline svelte-f0yvr0">üì∑ View Gallery</button>'),wv=w('<p class="info-text svelte-f0yvr0"> </p>'),xv=w('<p class="info-text svelte-f0yvr0">Uploading...</p>'),Sv=w('<p class="error-text svelte-f0yvr0"> </p>'),qv=w('<p class="error-text svelte-f0yvr0"> </p>'),Tv=w('<div class="attachment-item svelte-f0yvr0"><span class="file-name svelte-f0yvr0"> </span> <button type="button" class="remove-btn svelte-f0yvr0">‚ùå</button></div>'),jv=w('<div class="attachment-item new svelte-f0yvr0"><span class="file-name svelte-f0yvr0"> </span> <button type="button" class="remove-btn svelte-f0yvr0">‚ùå</button></div>'),Ev=w('<div class="attachments-list svelte-f0yvr0"><!> <!></div>'),Av=w('<div class="form-container svelte-f0yvr0"><h3 class="svelte-f0yvr0"> </h3> <form><div class="form-section upload-section svelte-f0yvr0"><h4 class="svelte-f0yvr0">Files & Scanning</h4> <div class="upload-buttons svelte-f0yvr0"><div class="upload-btn-wrapper svelte-f0yvr0"><button type="button" class="btn-outline svelte-f0yvr0">üìÑ Add Attachments</button> <input type="file" multiple title="Add Attachments (No Scan)" class="svelte-f0yvr0"/></div> <div class="upload-btn-wrapper svelte-f0yvr0"><button type="button" class="btn-outline svelte-f0yvr0">üîç Scan Documents (OCR)</button> <input type="file" multiple accept="image/*,application/pdf" title="Scan (OCR)" class="svelte-f0yvr0"/></div> <!></div> <!> <!> <!> <!> <!></div> <div class="form-group svelte-f0yvr0"><label for="name" class="svelte-f0yvr0">Name</label> <input id="name" type="text" required placeholder="e.g. Project Alpha Specs" class="svelte-f0yvr0"/></div> <div class="form-group svelte-f0yvr0"><label for="description" class="svelte-f0yvr0">Description</label> <textarea id="description" rows="3" placeholder="Brief description of the document..." class="svelte-f0yvr0"></textarea></div> <div class="form-group svelte-f0yvr0"><label for="tags" class="svelte-f0yvr0">Tags</label> <!></div> <div class="form-group svelte-f0yvr0"><label for="content" class="svelte-f0yvr0">Recognized Content (Markdown)</label> <textarea id="content" rows="10" placeholder="Recognized document content will appear here..." class="svelte-f0yvr0"></textarea></div> <div class="row svelte-f0yvr0"><div class="form-group half svelte-f0yvr0"><label for="type" class="svelte-f0yvr0">Type</label> <select id="type" class="svelte-f0yvr0"><option>Plan</option><option>Mail</option><option>Other</option></select></div> <div class="form-group half svelte-f0yvr0"><label for="status" class="svelte-f0yvr0">Status</label> <select id="status" class="svelte-f0yvr0"><option>In Progress</option><option>Done</option></select></div></div> <div class="row svelte-f0yvr0"><div class="form-group half svelte-f0yvr0"><label for="date" class="svelte-f0yvr0">Registration Date</label> <input id="date" type="date" class="svelte-f0yvr0"/></div> <div class="form-group half svelte-f0yvr0"><label for="done_date" class="svelte-f0yvr0">Done Date</label> <input id="done_date" type="date" class="svelte-f0yvr0"/></div></div> <div class="form-group svelte-f0yvr0"><label for="author" class="svelte-f0yvr0">Author</label> <input id="author" type="text" placeholder="Your Name" class="svelte-f0yvr0"/></div> <div class="actions svelte-f0yvr0"><button type="button" class="btn-secondary svelte-f0yvr0">Cancel</button> <button type="submit" class="btn-primary svelte-f0yvr0"> </button></div></form> <!></div>');function Cv(t,e){Je(e,!0);let a=Ct(e,"document",3,null),r=j(ke(a()?.name||"")),s=j(ke(a()?.description||"")),l=j(ke(a()?.type||"plan")),i=j(ke(a()?.status||"in_progress")),v=j(ke(a()?.registration_date||"")),u=j(ke(a()?.content||"")),d=j(ke(a()?.author||"")),f=j(ke(a()?.done_date||"")),y=ke(a()?.attachments||[]),h=j(ke([])),m=j(ke(a()?.tags?.map(B=>B.name)||[])),x=j(!1),S=j(!1),k=j(!1),b=j(""),A=j(""),_=j(""),T=j(null);It(()=>{if(!a()){const B=localStorage.getItem("doc_author");B&&p(d,B,!0)}}),Nt(()=>{n(i)==="done"&&!n(f)&&p(f,new Date().toISOString().split("T")[0],!0)});async function z(B){const be=Array.from(B.target.files);if(be.length!==0){p(x,!0),p(b,"");try{for(let Ne=0;Ne<be.length;Ne++){const rt=be[Ne];p(A,`Scanning file ${Ne+1} of ${be.length}...`);const dt=await Li(rt);dt.name&&!n(r)&&p(r,dt.name,!0);const ft=dt.content||"";n(u)&&ft?p(u,n(u)+(`

---

`+ft)):ft&&p(u,ft,!0),dt.attachment&&n(h).push(dt.attachment)}}catch(Ne){p(b,"Failed to scan one or more documents. Please try again or enter details manually."),console.error(Ne)}finally{p(x,!1),p(A,""),B.target.value=""}}}async function R(B){const be=Array.from(B.target.files);if(be.length!==0){p(S,!0);try{for(const Ne of be){const rt=await on(Ne);n(h).push({file_path:rt.file_path,filename:rt.filename,media_type:rt.media_type})}}catch(Ne){console.error("Upload failed",Ne),alert("Failed to upload attachment")}finally{p(S,!1),B.target.value=""}}}function Y(){p(T,[...y,...n(h)],!0)}async function ae(B,be){if(be)n(h).splice(B,1);else{if(!confirm("Permanently delete this attachment?"))return;const Ne=y[B];try{await Ui(Ne.id),y.splice(B,1)}catch(rt){console.error("Failed to delete attachment",rt),alert("Failed to delete attachment")}}}async function O(B){B.preventDefault(),p(k,!0),p(_,"");try{n(d)&&localStorage.setItem("doc_author",n(d));const be={name:n(r),description:n(s),type:n(l),status:n(i),registration_date:n(v)||void 0,content:n(u),author:n(d),done_date:n(f)||void 0,attachments:n(h),tags:n(m)};a()?await Ii(a().id,be):await zi(be),a()||(p(r,""),p(s,""),p(l,"plan"),p(i,"in_progress"),p(v,""),p(u,""),p(d,localStorage.getItem("doc_author")||"",!0),p(f,""),p(h,[],!0),p(m,[],!0)),e.onDocumentCreated()}catch(be){console.error("Failed to save document:",be),p(_,"Failed to save document. Please try again.")}finally{p(k,!1)}}var Z=Av(),ne=o(Z),W=o(ne),G=c(ne,2),M=o(G),U=c(o(M),2),ce=o(U),le=c(o(ce),2);le.__change=R;var fe=c(ce,2),we=c(o(fe),2);we.__change=z;var I=c(fe,2);{var L=B=>{var be=kv();be.__click=Y,g(B,be)};$(I,B=>{(y.length>0||n(h).length>0)&&B(L)})}var Q=c(U,2);{var F=B=>{var be=wv(),Ne=o(be);H(()=>q(Ne,n(A)||"Scanning... Please wait.")),g(B,be)};$(Q,B=>{n(x)&&B(F)})}var E=c(Q,2);{var V=B=>{var be=xv();g(B,be)};$(E,B=>{n(S)&&B(V)})}var re=c(E,2);{var K=B=>{var be=Sv(),Ne=o(be);H(()=>q(Ne,n(b))),g(B,be)};$(re,B=>{n(b)&&B(K)})}var ye=c(re,2);{var N=B=>{var be=qv(),Ne=o(be);H(()=>q(Ne,n(_))),g(B,be)};$(ye,B=>{n(_)&&B(N)})}var X=c(ye,2);{var J=B=>{var be=Ev(),Ne=o(be);$e(Ne,17,()=>y,Ye,(dt,ft,da)=>{var fa=Tv(),Ut=o(fa),qa=o(Ut),Ta=c(Ut,2);Ta.__click=()=>ae(da,!1),H(()=>{Ze(Ut,"title",n(ft).filename),q(qa,n(ft).filename)}),g(dt,fa)});var rt=c(Ne,2);$e(rt,17,()=>n(h),Ye,(dt,ft,da)=>{var fa=jv(),Ut=o(fa),qa=o(Ut),Ta=c(Ut,2);Ta.__click=()=>ae(da,!0),H(()=>{Ze(Ut,"title",n(ft).filename),q(qa,`(New) ${n(ft).filename??""}`)}),g(dt,fa)}),g(B,be)};$(X,B=>{(y.length>0||n(h).length>0)&&B(J)})}var ee=c(M,2),D=c(o(ee),2),ue=c(ee,2),se=c(o(ue),2),de=c(ue,2),ie=c(o(de),2);Xc(ie,{get selectedTags(){return n(m)},set selectedTags(B){p(m,B,!0)}});var he=c(de,2),ve=c(o(he),2),oe=c(he,2),pe=o(oe),xe=c(o(pe),2),P=o(xe);P.value=P.__value="plan";var C=c(P);C.value=C.__value="mail";var te=c(C);te.value=te.__value="other";var _e=c(pe,2),De=c(o(_e),2),Me=o(De);Me.value=Me.__value="in_progress";var me=c(Me);me.value=me.__value="done";var ge=c(oe,2),Oe=o(ge),Fe=c(o(Oe),2),Ae=c(Oe,2),Pe=c(o(Ae),2),nt=c(ge,2),et=c(o(nt),2),Xe=c(nt,2),Ge=o(Xe);Ge.__click=function(...B){e.onCancel?.apply(this,B)};var lt=c(Ge,2),bt=o(lt),it=c(G,2);{let B=We(()=>!!n(T)),be=We(()=>n(T)||[]);Zr(it,{get isOpen(){return n(B)},close:()=>p(T,null),get attachments(){return n(be)}})}H(()=>{q(W,a()?"Edit Document":"New Document"),Pe.disabled=n(i)!=="done",lt.disabled=n(k)||n(S)||n(x),q(bt,n(k)?"Saving...":a()?"Save Changes":"Register Document")}),ka("submit",G,O),Te(D,()=>n(r),B=>p(r,B)),Te(se,()=>n(s),B=>p(s,B)),Te(ve,()=>n(u),B=>p(u,B)),pt(xe,()=>n(l),B=>p(l,B)),pt(De,()=>n(i),B=>p(i,B)),Te(Fe,()=>n(v),B=>p(v,B)),Te(Pe,()=>n(f),B=>p(f,B)),Te(et,()=>n(d),B=>p(d,B)),g(t,Z),Qe()}st(["change","click"]);var Dv=w('<button class="add-btn svelte-1n46o8q"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> New Document</button>'),Pv=w('<div class="startup-overlay svelte-1n46o8q"><div class="startup-modal svelte-1n46o8q"><div class="startup-header svelte-1n46o8q"><h2 class="svelte-1n46o8q">Welcome to DocuFlow</h2> <p class="svelte-1n46o8q">Please configure the database connection to continue.</p></div> <!></div></div>'),Rv=w('<div class="app-container svelte-1n46o8q"><!> <div class="main-content-wrapper svelte-1n46o8q"><header class="svelte-1n46o8q"><div class="header-content svelte-1n46o8q"><h1 class="svelte-1n46o8q"> </h1> <div class="header-actions svelte-1n46o8q"><button class="icon-btn svelte-1n46o8q" title="Settings"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></button> <!></div></div></header> <main class="svelte-1n46o8q"><!></main></div> <!> <!> <!></div>');function $v(t,e){Je(e,!0);let a=j(!1),r=j("dashboard"),s=j(!1),l=j(!1),i=j(null),v=j(null);function u(I){p(r,I,!0)}function d(I){switch(I){case"dashboard":return"Dashboard";case"documents":return"Documents";case"journal":return"Journal";case"job":return"Job Processing";case"parts":return"Parts Library";case"gnc":return"GNC Editor";case"stock":return"Stock Management";case"logs":return"Shift Logs";default:return"DocuFlow"}}function f(){p(i,null),p(s,!0)}function y(I){p(i,I,!0),p(s,!0)}function h(){p(s,!1),p(i,null)}function m(){p(l,!0)}function x(){p(l,!1)}function S(){h(),n(v)&&n(v).refresh&&n(v).refresh()}It(async()=>{const I=localStorage.getItem("user_role");(!I||I==="operator")&&localStorage.setItem("user_role","admin");try{(await Ri()).status!=="configured"&&p(a,!0)}catch(L){console.error("Config check failed",L)}});function k(){p(a,!1)}var b=Rv(),A=o(b);uo(A,{get activeView(){return n(r)},onSelect:u});var _=c(A,2),T=o(_),z=o(T),R=o(z),Y=o(R),ae=c(R,2),O=o(ae);O.__click=m;var Z=c(O,2);{var ne=I=>{var L=Dv();L.__click=f,g(I,L)};$(Z,I=>{n(r)==="documents"&&I(ne)})}var W=c(T,2),G=o(W);{var M=I=>{go(I,{})},U=I=>{var L=Be(),Q=Se(L);{var F=V=>{ln(hu(V,{onEdit:y}),re=>p(v,re,!0),()=>n(v))},E=V=>{var re=Be(),K=Se(re);{var ye=X=>{Eu(X,{})},N=X=>{var J=Be(),ee=Se(J);{var D=se=>{Iu(se,{})},ue=se=>{var de=Be(),ie=Se(de);{var he=oe=>{Gu(oe,{})},ve=oe=>{var pe=Be(),xe=Se(pe);{var P=te=>{lv(te,{})},C=te=>{var _e=Be(),De=Se(_e);{var Me=ge=>{pv(ge,{})},me=ge=>{var Oe=Be(),Fe=Se(Oe);{var Ae=Pe=>{yv(Pe,{})};$(Fe,Pe=>{n(r)==="logs"&&Pe(Ae)},!0)}g(ge,Oe)};$(De,ge=>{n(r)==="stock"?ge(Me):ge(me,!1)},!0)}g(te,_e)};$(xe,te=>{n(r)==="gnc"?te(P):te(C,!1)},!0)}g(oe,pe)};$(ie,oe=>{n(r)==="parts"?oe(he):oe(ve,!1)},!0)}g(se,de)};$(ee,se=>{n(r)==="job"?se(D):se(ue,!1)},!0)}g(X,J)};$(K,X=>{n(r)==="journal"?X(ye):X(N,!1)},!0)}g(V,re)};$(Q,V=>{n(r)==="documents"?V(F):V(E,!1)},!0)}g(I,L)};$(G,I=>{n(r)==="dashboard"?I(M):I(U,!1)})}var ce=c(_,2);Gs(ce,{get isOpen(){return n(s)},close:h,children:(I,L)=>{Cv(I,{onDocumentCreated:S,onCancel:h,get document(){return n(i)}})},$$slots:{default:!0}});var le=c(ce,2);Gs(le,{get isOpen(){return n(l)},close:x,children:(I,L)=>{Mn(I,{get isOpen(){return n(l)},close:x})},$$slots:{default:!0}});var fe=c(le,2);{var we=I=>{var L=Pv(),Q=o(L),F=c(o(Q),2);Mn(F,{isOpen:!0,close:k}),g(I,L)};$(fe,I=>{n(a)&&I(we)})}H(I=>q(Y,I),[()=>d(n(r))]),g(t,b),Qe()}st(["click"]);window.onerror=function(t,e,a,r,s){const l=document.createElement("div");l.style.position="fixed",l.style.top="0",l.style.left="0",l.style.width="100%",l.style.background="#fee2e2",l.style.color="#991b1b",l.style.padding="20px",l.style.zIndex="999999",l.style.borderBottom="2px solid #7f1d1d",l.innerHTML=`<strong>Error:</strong> ${t}<br><small>${e}:${a}:${r}</small><pre>${s?.stack||""}</pre>`,document.body.appendChild(l)};window.onunhandledrejection=function(t){const e=document.createElement("div");e.innerHTML+=`<br><strong>Unhandled Rejection:</strong> ${t.reason}`,document.body.prepend(e)};pi($v,{target:document.getElementById("app")});
